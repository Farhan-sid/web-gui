/*! For license information please see impreseeCore.min.js.LICENSE.txt */
!function(e){function t(t){for(var n,o,i=t[0],c=t[1],u=t[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(l&&l(t);d.length;)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={1:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp_impresee=window.webpackJsonp_impresee||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([191,2]),r()}(Array(23).concat([function(e,t,r){},,,,,,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/63a9a69539f176ded9698a2a4ac24537.svg"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/bf1506f431846fad21f4cd600ca702e5.svg"},,function(e,t,r){},,,function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/d18268f15406d8326dee12e9a7e9d957.gif"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/7e003215c9377367d1296896ae22637e.svg"},,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/fbfa80877b756f8875decc87f8391c12.png"},function(e,t,r){},,,,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/7d6f69581c2f2b5a55db156bf864ed41.svg"},,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/adc1b467bb1f7e21cbd5971db737b0f9.svg"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/44ca7d4b5fc70dd15f55326c1115cc1a.svg"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/c28e5a2fd2bd60b96918d0c479e538ee.svg"},,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/57088c9f5b1697b8d25cb8e68b538a29.svg"},,,,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/bd3fbd19ff7a7d6e8af4552e33172fc8.png"},,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/2c6e9a142457bc37ee16f6dfa7660353.png"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/09d0ebef7048591cd7bd4f48859a357a.svg"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/4bc66cab6ab00407b304299034b5889c.png"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/828f6cf8d0984784fa997e3daa7b5af0.svg"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/729641c86764e178701e5a9cfb0b0995.gif"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/12dba2ec7542965a5429e456d6435870.svg"},,,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/0ecd9aa6aba594336cc67d5dac8d994c.svg"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/2fe377bf529b33fe39dcf3106790a4f4.svg"},,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/161d56c903d94dcfa24032b3bc33a209.svg"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/886ccec30f3b85cdb2cf97e8163588bc.svg"},,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/e4b657d54809bd7d479a26754bd02b85.gif"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/08a40e93429c37342fee4736c0e6ab70.png"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/788d7c2eceb596259dea1daa0698cdcf.png"},,function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/891234af8aca72b388e8b7d89953863a.svg"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/2b56fed025a3ce2a92b413ad38d3fe70.svg"},function(e,t){e.exports="https://cdn.impresee.com/snippet/v5.6/media/434be912f7e485b6195f9b4d9985a0f8.svg"},,,,,,,,,,,function(e,t,r){},function(e,t,r){},,,,,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},,,,,,function(e,t,r){},function(e,t,r){},,,,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,function(e,t,r){},,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"DRAWING",(function(){return G})),r.d(n,"CROPPING",(function(){return j})),r.d(n,"DISPLAYING_RESULTS",(function(){return q})),r.d(n,"ERROR",(function(){return Q})),r.d(n,"CLOSED",(function(){return z})),r.d(n,"OPEN",(function(){return Y})),r.d(n,"CLOSED_RESULTS",(function(){return W})),r.d(n,"SEARCHING",(function(){return V})),r.d(n,"SEARCHING_BY_AREA",(function(){return X})),r.d(n,"CROPPING_QUERY",(function(){return K})),r.d(n,"DISPLAY_DROP_DOWN",(function(){return $})),r.d(n,"LOADING_DROP_DOWN_RESULTS",(function(){return J})),r.d(n,"SEARCHING_BY_CHANGING_PARAMETERS",(function(){return Z})),r.d(n,"DISPLAY_FORMAT_GRID",(function(){return ee})),r.d(n,"DISPLAY_FORMAT_LIST",(function(){return te})),r.d(n,"OPEN_VISUAL_SEARCH_ON_LOAD",(function(){return re})),r.d(n,"OPEN_SKETCH_SEARCH_ON_LOAD",(function(){return ne}));var a={};r.r(a),r.d(a,"IMPRESEE_MODAL_CLASS",(function(){return ae})),r.d(a,"IMPRESEE_MODAL_CLASS_EMBEDDED_RESULTS",(function(){return se})),r.d(a,"IMPRESEE_MODAL_ID",(function(){return oe})),r.d(a,"IMPRESEE_MODAL_ID_RESULTS",(function(){return ie})),r.d(a,"IMPRESEE_MODAL_ID_TEXT_RESULTS",(function(){return ce})),r.d(a,"CLOSE_BUTTON_CLASS",(function(){return ue})),r.d(a,"CLOSE_BUTTON_CLASS_HIDDEN",(function(){return le})),r.d(a,"MODAL_OVERLAY_CLASS",(function(){return pe})),r.d(a,"MODAL_OVERLAY_CLASS_EMBEDDED_RESULTS",(function(){return de})),r.d(a,"IMPRESEE_RESULTS_CLASS",(function(){return he})),r.d(a,"IMPRESEE_RESULTS_CLASS_EMBEDDED_RESULTS",(function(){return fe})),r.d(a,"IMAGE_CANVAS",(function(){return me})),r.d(a,"IMAGE_SEARCH_TRIGGER_ADDED",(function(){return ye}));var s={};r.r(s),r.d(s,"baseUrl",(function(){return ve})),r.d(s,"searchURL",(function(){return Se})),r.d(s,"detectURL",(function(){return ge})),r.d(s,"searchByBoxURL",(function(){return we})),r.d(s,"recoverSearchUrl",(function(){return Ee})),r.d(s,"searchByTextURL",(function(){return Re})),r.d(s,"verifyApp",(function(){return be})),r.d(s,"serviceTimeout",(function(){return _e}));var o={};r.r(o),r.d(o,"SEARCH_BY_PHOTO",(function(){return Ie})),r.d(o,"SEARCH_BY_SKETCH",(function(){return Ce})),r.d(o,"SEARCH_BY_TEXT",(function(){return Te})),r.d(o,"INSTANT_SEARCH",(function(){return Be})),r.d(o,"SEARCH_BY_FILTER",(function(){return Ae})),r.d(o,"SEARCH_BY_REORDER_VALUE",(function(){return De})),r.d(o,"SEARCH_BY_CHANGE_PAGE_EVENT",(function(){return Oe})),r.d(o,"CUSTOM_DETECTION",(function(){return xe})),r.d(o,"CANCEL_REQUEST",(function(){return Le})),r.d(o,"SIMPLE_SEARCH_TEXT",(function(){return Pe})),r.d(o,"FULL_SEARCH_TEXT",(function(){return ke})),r.d(o,"SEARCH_BY_PAGE_CHANGE",(function(){return Ne})),r.d(o,"SEARCH_BY_REORDER",(function(){return Me})),r.d(o,"SEARCH_BY_FILTERING",(function(){return Fe})),r.d(o,"RANGE_FILTER",(function(){return He})),r.d(o,"VALUE_FILTER",(function(){return Ue}));var i={};r.r(i),r.d(i,"searchResultsTitle",(function(){return je})),r.d(i,"searchButtonLabel",(function(){return qe})),r.d(i,"oops",(function(){return Qe})),r.d(i,"errorTitle",(function(){return ze})),r.d(i,"errorMessage",(function(){return Ye})),r.d(i,"shareYourSearchTitle",(function(){return We})),r.d(i,"shareYourSearchMessage",(function(){return Ve})),r.d(i,"dragAndDropTitle",(function(){return Xe})),r.d(i,"dragAndDropMessage",(function(){return Ke})),r.d(i,"customSelectionSearchLabel",(function(){return $e})),r.d(i,"searchSuggestions",(function(){return Je})),r.d(i,"recommendedCategories",(function(){return Ze})),r.d(i,"currencySymbol",(function(){return et})),r.d(i,"searchByPhoto",(function(){return tt})),r.d(i,"searchBySketch",(function(){return rt})),r.d(i,"seeAllResults",(function(){return nt})),r.d(i,"noMatchingResult",(function(){return at})),r.d(i,"onSale",(function(){return st})),r.d(i,"searchRecommendedProducts",(function(){return ot})),r.d(i,"resultsTitleforTextSearch",(function(){return it})),r.d(i,"numberResultsTitle",(function(){return ct})),r.d(i,"resultsTitleForMobile",(function(){return ut})),r.d(i,"filtersTitle",(function(){return lt})),r.d(i,"clearFilters",(function(){return pt})),r.d(i,"sortBy",(function(){return dt})),r.d(i,"applyFilters",(function(){return ht})),r.d(i,"tryAgainWhenNoResults",(function(){return ft}));var c={};r.r(c),r.d(c,"mainColor",(function(){return yt})),r.d(c,"imageSearchButtonDefault",(function(){return vt})),r.d(c,"imageSearchButton",(function(){return St})),r.d(c,"imageSearchButtonColor",(function(){return gt})),r.d(c,"useDetection",(function(){return wt})),r.d(c,"addSearchToUrl",(function(){return Et})),r.d(c,"afterLoadResults",(function(){return Rt})),r.d(c,"beforeLoadResults",(function(){return bt})),r.d(c,"onSearchFailed",(function(){return _t})),r.d(c,"onCloseResults",(function(){return It})),r.d(c,"onBeforeSearch",(function(){return Ct})),r.d(c,"beforeOneClickSearch",(function(){return Tt})),r.d(c,"containerSelector",(function(){return Bt})),r.d(c,"photoApp",(function(){return At})),r.d(c,"sketchApp",(function(){return Dt})),r.d(c,"useSearchByPhoto",(function(){return Ot})),r.d(c,"useSearchBySketch",(function(){return xt})),r.d(c,"onlyCameraAsInput",(function(){return Lt})),r.d(c,"disableImageCrop",(function(){return Pt})),r.d(c,"currencySymbolAtTheEnd",(function(){return kt})),r.d(c,"numberFractionDigits",(function(){return Nt})),r.d(c,"decimalSeparator",(function(){return Mt})),r.d(c,"thousandsSeparator",(function(){return Ft})),r.d(c,"colorOnSale",(function(){return Ht})),r.d(c,"poweredByImpreseeLink",(function(){return Ut})),r.d(c,"customGoogleAnalytics",(function(){return Gt})),r.d(c,"displayOnSaleProducts",(function(){return jt})),r.d(c,"recommendedProductsToDisplay",(function(){return qt})),r.d(c,"parsePriceFunction",(function(){return Qt})),r.d(c,"parseDiscountFunction",(function(){return zt})),r.d(c,"formatPriceRangeFilterValue",(function(){return Yt})),r.d(c,"searchByPhotoIconURL",(function(){return Wt})),r.d(c,"searchBySketchIconURL",(function(){return Vt})),r.d(c,"createHiddenFilters",(function(){return Xt})),r.d(c,"isFilterVisible",(function(){return Kt})),r.d(c,"parseFilterRange",(function(){return $t})),r.d(c,"allowImpreseeCookies",(function(){return Jt})),r.d(c,"addLabelsToDesktopDropdown",(function(){return Zt}));var u={};r.r(u),r.d(u,"searchDelayMilis",(function(){return tr})),r.d(u,"searchBarSelector",(function(){return rr})),r.d(u,"textSearchApp",(function(){return nr})),r.d(u,"useMobileEmbedded",(function(){return ar})),r.d(u,"pressSeeAll",(function(){return sr})),r.d(u,"useText",(function(){return or})),r.d(u,"displayMobileDropdownAsGrid",(function(){return ir})),r.d(u,"fullTextSearchContainerSelector",(function(){return cr})),r.d(u,"mobileSearchTriggerSelector",(function(){return ur})),r.d(u,"instantSearchMobileResults",(function(){return lr})),r.d(u,"instantSearchMobileResultsGrid",(function(){return pr})),r.d(u,"instantSearchDesktopResults",(function(){return dr})),r.d(u,"numSuggestionsMobile",(function(){return hr})),r.d(u,"numSuggestionsDesktop",(function(){return fr})),r.d(u,"useSearchSuggestions",(function(){return mr})),r.d(u,"defaultPageSize",(function(){return yr})),r.d(u,"onCloseResults",(function(){return vr})),r.d(u,"onOpenDropDownResults",(function(){return Sr})),r.d(u,"computeTopFromElement",(function(){return gr})),r.d(u,"extraPressSeeAllButton",(function(){return wr})),r.d(u,"useButtonAsSearchBar",(function(){return Er})),r.d(u,"showQtyInFilters",(function(){return Rr})),r.d(u,"useInfiniteScroll",(function(){return br})),r.d(u,"useFullAsInstant",(function(){return _r})),r.d(u,"loseSearchBarFocusOnScroll",(function(){return Ir})),r.d(u,"offsetDropdownLocation",(function(){return Cr})),r.d(u,"buttonAsSearchBarSelector",(function(){return Tr})),r.d(u,"overlayInputClassName",(function(){return Br})),r.d(u,"buttonSearchBarLocation",(function(){return Ar}));var l={};r.r(l),r.d(l,"OPEN_SEARCH",(function(){return Dr})),r.d(l,"DO_SEARCH",(function(){return Or})),r.d(l,"FINISH_SEARCH",(function(){return xr})),r.d(l,"LOAD_SEARCH",(function(){return Lr})),r.d(l,"CLOSE_SEARCH",(function(){return Pr})),r.d(l,"NO_SEARCH",(function(){return kr})),r.d(l,"DO_SEARCH_GET_RESULTS",(function(){return Nr}));var p,d,h,f,m,y,v=r(24),S=r.n(v),g=r(0),w=r(9),E=r(34),R=r(72),b=r(3),_=r.n(b),I=r(4),C=r.n(I),T=r(1),B=r.n(T),A=r(5),D=r.n(A),O=r(6),x=r.n(O),L=r(2),P=r.n(L),k=r(8),N=r.n(k),M=r(7),F=r.n(M),H=r(28),U=r.n(H),G="DRAWING",j="CROPPING",q="DISPLAYING_RESULTS",Q="ERROR",z="CLOSED",Y="OPEN",W="CLOSED_RESULTS",V="SEARCHING",X="SEARCHING_BY_AREA",K="CROPPING_QUERY",$="DISPLAY_DROP_DOWN",J="LOADING_DROP_DOWN_RESULTS",Z="SEARCHING_BY_CHANGING_PARAMETERS",ee="GRID",te="LIST",re="visual",ne="sketch",ae="ImpreseeModal",se="ImpreseeModal ImpreseeEmbeddedResults",oe="ImpreseeModalID",ie="ImpreseeModalIDResults",ce="ImpreseeTextResultsModalId",ue="ImpreseeModalCloseButton",le="ImpreseeModalCloseButton ImpreseeHiddenCloseIcon",pe="ImpreseeModalOverlay",de="ImpreseeModalOverlay ImpreseeEmbeddedResults",he="ImpreseeResults",fe="ImpreseeResults ImpreseeEmbeddedResults",me="ImpreseeDetectionQueryID",ye="ImpreseeImageSearchButtonAdded",ve="https://api.impresee.com",Se=ve+"/ImpreseeSearch/api/v3/search/text/",ge=ve+"/ImpreseeSearch/api/v3/search/text/",we=ve+"/ImpreseeSearch/api/v3/search/text/",Ee=ve+"/ImpreseeSearch/api/v1/rest/data/get_search/",Re=ve+"/ImpreseeSearch/api/v3/search/text/",be=ve+"/ImpreseeSearch/api/v3/search/available/",_e=3e4,Ie="photo",Ce="sketch",Te="text",Be="instant search",Ae="search filter",De="search reorder",Oe="search change page",xe="CUSTOM_DETECTION",Le="CANCEL_REQUEST",Pe="INSTANT_SEARCH_TEXT",ke="FULL_SEARCH_TEXT",Ne="SEARCH_BY_PAGE_CHANGE",Me="SEARCH_BY_REORDER",Fe="SEARCH_BY_FILTERING",He="RANGE",Ue="MULTI_OPTIONS",Ge=window._wssee[0].texts||{},je=Ge.searchResultsTitle||"Search results",qe=Ge.searchButtonLabel||"Search",Qe=Ge.oops||"Oops...",ze=Ge.error||Qe+" We didn't expect this at all.",Ye=Ge.errorDescription||"It seems our system is overheating, please try again later.",We=Ge.shareYourSearchTitle||"Share what you found:",Ve=Ge.shareYourSearchMessage||"Take a look at what I found!",Xe=Ge.dragAndDropImageTitle||"Drag & Drop an image or just click here",Ke=Ge.dragAndDropImageMessage||"Upload the image you'd like to use to search",$e=Ge.customSelectionSearchLabel||"Custom search",Je=Ge.searchSuggestions||"Popular searches",Ze=Ge.recommendedCategories||"Recommended categories",et=Ge.currencySymbol||"$",tt=Ge.searchByPhoto||"Search by image",rt=Ge.searchBySketch||"Search by drawing",nt=Ge.seeAllResults||"See all results",at=Ge.noMatchingResult||"We couldn't find any results for: ",st=Ge.onSale||"On sale",ot=Ge.searchRecommendedProducts||"Recommended products",it=Ge.resultsTitleforTextSearch||"Search results for",ct=Ge.numberResultsTitle||"Displaying {1} results",ut=Ge.resultsTitleForMobile||'Displaying {1} results for "{2}"',lt=Ge.filtersTitle||"Filters",pt=Ge.clearFilters||"Clear filters",dt=Ge.sortBy||"Sort by",ht=Ge.applyFilters||"Apply",ft=Ge.tryAgainWhenNoResults||"Why don't you try drawing or taking a picture of what you want?",mt=window._wssee[0].setup||{},yt=mt.mainColor||"#bababa",vt="impresee-one-click-search-img",St=mt.imageSearchButton||vt,gt=mt.imageSearchButtonColor||"#475d77",wt=mt.useDetection||!1,Et=mt.addSearchDataToUrl||!1,Rt=mt.afterLoadResults||function(e,t){},bt=mt.beforeLoadResults||function(e,t){},_t=mt.onSearchFailed||function(){},It=mt.onCloseResults||function(){},Ct=mt.onBeforeSearch||function(){},Tt=mt.beforeOneClickSearch||function(e,t){},Bt=mt.container||null,At=mt.photoApp||null,Dt=mt.sketchApp||null,Ot=(null===(p=mt.useSearchByPhoto)||void 0===p||p)&&mt.photoApp,xt=(null===(d=mt.useSearchBySketch)||void 0===d||d)&&mt.sketchApp,Lt=mt.onlyCameraAsInput||!1,Pt=mt.disableImageCrop||!1,kt=mt.currencySymbolAtTheEnd||!1,Nt=isNaN(Number(mt.numberFractionDigits))?2:mt.numberFractionDigits,Mt=mt.decimalSeparator||".",Ft=mt.thousandsSeparator||",",Ht=mt.colorOnSale||"#FF0000",Ut="".concat("https://api.impresee.com","/ImpreseeSearch/api/v3/search/about/").concat(At),Gt=mt.customGoogleAnalytics||null,jt=null===(h=mt.displayOnSaleProducts)||void 0===h||h,qt=mt.recommendedProductsToDisplay||2,Qt=mt.parsePriceFunction||null,zt=mt.parseDiscountFunction||function(e){return"".concat(e,"%")},Yt=mt.formatPriceRangeFilterValue||null,Wt=mt.searchByPhotoIconURL||null,Vt=mt.searchBySketchIconURL||null,Xt=mt.createHiddenFilters||function(){return[]},Kt=mt.isFilterVisible||function(e,t,r){return!0},$t=mt.parseFilterRange||function(e){return e},Jt=null===(f=mt.allowImpreseeCookies)||void 0===f||f,Zt=mt.addLabelsToDesktopDropdown||!1,er=window._wssee[0].searchByText||{},tr=er.searchDelayMilis||300,rr=er.searchBarSelector||null,nr=er.textSearchApp||null,ar=er.useMobileEmbedded||null,sr=er.pressSeeAll||function(e){},or=er.useText||!1,ir=er.displayMobileDropdownAsGrid||!1,cr=er.fullTextSearchContainerSelector||null,ur=er.mobileSearchTriggerSelector||null,lr=er.instantSearchMobileResults||10,pr=er.instantSearchMobileResultsGrid||12,dr=er.instantSearchDesktopResults||4,hr=4,fr=8,mr=null===(m=er.useSearchSuggestions)||void 0===m||m,yr=er.pageSize||16,vr=er.onCloseResults||function(e){},Sr=er.onOpenDropDownResults||function(){},gr=er.computeTopFromElement||null,wr=er.extraPressSeeAllButton||null,Er=er.useButtonAsSearchBar||!1,Rr=null===(y=er.showQtyInFilters)||void 0===y||y,br=er.useInfiniteScroll||!1,_r=er.useFullAsInstant||!1,Ir=er.loseSearchBarFocusOnScroll||!1,Cr=er.offsetDropdownLocation||0,Tr="#impresee-open-search-bar",Br="impresee-input-overlay-searchbar",Ar=function(){switch(window._wssee[0].searchByText.buttonSearchBarLocation){case"TOP_LEFT":return"TopLeft";case"MIDDLE_LEFT":return"MiddleLeft";case"BOTTOM_LEFT":return"BottomLeft";case"TOP_RIGHT":return"TopRight";case"MIDDLE_RIGHT":return"MiddleRight";case"BOTTOM_RIGHT":return"BottomRight";default:return"BottomLeft"}},Dr="open_search",Or="do_search",xr="finish_search",Lr="load_search_data",Pr="close_search",kr="no_search",Nr="get_search_results",Mr=r(18),Fr=r.n(Mr);function Hr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ur(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Gr=function(){function e(t,r,n,a,s,o,i,c,u,l){var p,d=this,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:function(){return null},f=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],m=arguments.length>12&&void 0!==arguments[12]?arguments[12]:function(){return null};_()(this,e),this.inputRef=t||h(),t||null!==(p=window._wssee[0].searchByText.useText)&&void 0!==p&&!p||(console.warn("[Impresee] No valid search bar found when trying to use search by text!"),console.warn("[Impresee] Please check that your search bar selector is correct")),this.searchFunction=r,this.onFocus=o,this.searchApp=n,this.searchDelayMilis=a,this.searchBars=s||[];var y=h();y&&this.searchBars.push(y),this.searchByTextTimer=-1,this.onEmptyInput=i,this.scheduleSearch=this.scheduleSearch.bind(this),this.onError=c,this.onBeforeSearch=u,this.focusSearchBarEvent=this.focusSearchBarEvent.bind(this),this.onBlurSearchBarEvent=this.onBlurSearchBarEvent.bind(this),this.pressSeeAllOnEnter=this.pressSeeAllOnEnter.bind(this),this.addSearchEventListener=this.addSearchEventListener.bind(this),this.addSearchEventListenerExtraSeeAll=this.addSearchEventListenerExtraSeeAll.bind(this),this.addSearchByTextQuery=l,this.searchOnEnter=f,this.onSearchBarBlur=m,this.setExtraPressAllButton();var v={attributes:!0,childList:!0,subtree:!0},S=function(e,t){var r,n=Hr(e);try{for(n.s();!(r=n.n()).done;){var a=r.value,s=a.target,o=[];if("childList"===a.type){if(!window._wssee[0])continue;o=s.querySelectorAll((window._wssee[0].searchByText||{}).searchBarSelector)}for(var i=0,c=Array.from(o);i<c.length;i++){var u=c[i];u.addEventListener("focus",d.focusSearchBarEvent),u.addEventListener("blur",d.onBlurSearchBarEvent),u.addEventListener("click",d.focusSearchBarEvent),u.dataset.isAlreadySearchBar=!0}}}catch(e){n.e(e)}finally{n.f()}},g=new MutationObserver(S);g.observe(document.body,v)}return C()(e,[{key:"addSearchEventListener",value:function(e){this.inputRef.classList.contains("ImpreseeSearchBarInFullSearch")||this.inputRef&&this.inputRef.value&&((window._wssee[0].searchByText.pressSeeAll||function(e){})(this.inputRef.value),e.preventDefault(),e.stopPropagation(),this.addSearchByTextQuery(this.inputRef.value),e.stopPropagation())}},{key:"addSearchEventListenerExtraSeeAll",value:function(e){this.inputRef.classList.contains("ImpreseeSearchBarInFullSearch")||this.inputRef&&((window._wssee[0].searchByText.pressSeeAll||function(e){})(this.inputRef.value),e.preventDefault(),e.stopPropagation(),this.addSearchByTextQuery(this.inputRef.value),e.stopPropagation())}},{key:"setExtraPressAllButton",value:function(){if(window._wssee[0].searchByText.extraPressSeeAllButton){var e=document.querySelectorAll(window._wssee[0].searchByText.extraPressSeeAllButton),t=Array.from(e);if(t.length>0){var r,n=Hr(t);try{for(n.s();!(r=n.n()).done;){r.value.addEventListener("click",this.addSearchEventListenerExtraSeeAll)}}catch(e){n.e(e)}finally{n.f()}}}}},{key:"setInputListeners",value:function(){this.inputRef&&(this.inputRef.dataset.isAlreadySearchBar=!0,this.inputRef.addEventListener("keyup",this.pressSeeAllOnEnter),this.inputRef.addEventListener("keyup",this.scheduleSearch),this.inputLastValue=this.inputRef.value)}},{key:"destroyInputListeners",value:function(){this.inputRef&&(this.inputRef.autocomplete="on",this.inputRef.removeEventListener("keyup",this.scheduleSearch),this.inputRef.removeEventListener("keyup",this.pressSeeAllOnEnter))}},{key:"pressSeeAllOnEnter",value:function(e){this.inputRef&&("Enter"!==e.code&&"NumpadEnter"!==e.code&&13!==e.keyCode||!this.searchOnEnter||(window.clearTimeout(this.searchByTextTimer),e.preventDefault(),e.stopPropagation(),(window._wssee[0].searchByText.pressSeeAll||function(e){})(this.inputRef.value),this.addSearchByTextQuery(this.inputRef.value),e.stopPropagation()))}},{key:"focusSearchBarEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.onFocus(e)}},{key:"onBlurSearchBarEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.onSearchBarBlur(e)}},{key:"changeInput",value:function(e){this.destroyInputListeners(),this.inputRef&&(this.inputRef.autocomplete="off"),this.inputRef=e,this.setInputListeners()}},{key:"setListeners",value:function(){if(this.setInputListeners(),this.searchBars)for(var e=0,t=Array.from(this.searchBars);e<t.length;e++){var r=t[e];r.dataset.isAlreadySearchBar=!0,r.addEventListener("focus",this.focusSearchBarEvent),r.addEventListener("blur",this.onBlurSearchBarEvent),r.addEventListener("click",this.focusSearchBarEvent)}else console.warn("Search by text not enabled due to lack of base search bar")}},{key:"searchManually",value:function(){var e=this;if(this.inputRef){var t=this.inputRef.value?this.inputRef.value.trim():"";this.inputRef&&t&&(this.searchByTextTimer>0&&window.clearTimeout(this.searchByTextTimer),this.searchFunction(this.inputRef.value,this.searchApp,window._wssee[0].setup.beforeLoadResults||function(e){},(function(){(window._wssee[0].setup.onSearchFailed||function(){})(),e.onError()}),this.onBeforeSearch))}}},{key:"scheduleSearch",value:function(e){var t=this;if(this.inputRef)if("Enter"!==e.code&&13!==e.keyCode){var r=this.inputRef.value?this.inputRef.value.trim():"";this.inputRef&&r||this.onEmptyInput(),this.inputLastValue!==r&&(this.searchByTextTimer>0&&window.clearTimeout(this.searchByTextTimer),this.inputLastValue=r,this.searchByTextTimer=window.setTimeout((function(){t.inputRef.value&&t.inputRef.value.trim()!==t.inputLastValue||t.searchFunction(t.inputRef.value,t.searchApp,window._wssee[0].setup.beforeLoadResults||function(e){},(function(){(window._wssee[0].setup.onSearchFailed||function(){})(),t.onError()}),t.onBeforeSearch)}),window._wssee[0].searchByText.searchDelayMilis||300))}else this.inputRef.blur()}},{key:"destroy",value:function(){if(this.searchByTextTimer>0&&window.clearTimeout(this.searchByTextTimer),this.destroyInputListeners(),this.searchBars){var e,t=Hr(this.searchBars);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.removeEventListener("focus",this.focusSearchBarEvent),r.removeEventListener("blur",this.onBlurSearchBarEvent)}}catch(e){t.e(e)}finally{t.f()}}if(window._wssee[0].searchByText.extraPressSeeAllButton){var n=document.querySelectorAll(window._wssee[0].searchByText.extraPressSeeAllButton),a=Array.from(n);if(a.length>0){var s,o=Hr(a);try{for(o.s();!(s=o.n()).done;){s.value.removeEventListener("click",this.addSearchEventListener)}}catch(e){o.e(e)}finally{o.f()}}}}}]),e}(),jr=r(29),qr=r.n(jr),Qr=r(30),zr=r.n(Qr);r(114);function Yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Wr=function(e){D()(r,e);var t=Yr(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"render",value:function(){var e,t;return g.default.createElement("div",{className:"ImpreseeSearchBarTools"},(null===(e=window._wssee[0].setup.useSearchByPhoto)||void 0===e||e)&&g.default.createElement("div",{className:"ImpreseeTool",onClick:this.props.searchByPhoto},g.default.createElement("img",{src:window._wssee[0].setup.searchByPhotoIconURL?window._wssee[0].setup.searchByPhotoIconURL:zr.a,alt:window._wssee[0].texts.searchByPhoto||"Search by image"}),g.default.createElement("span",null,window._wssee[0].texts.searchByPhoto||"Search by image")),(null===(t=window._wssee[0].setup.useSearchBySketch)||void 0===t||t)&&g.default.createElement("div",{className:"ImpreseeTool",onClick:this.props.searchBySketch},g.default.createElement("img",{src:window._wssee[0].setup.searchBySketchIconURL?window._wssee[0].setup.searchBySketchIconURL:qr.a,alt:window._wssee[0].texts.searchBySketch||"Search by drawing"}),g.default.createElement("span",null,window._wssee[0].texts.searchBySketch||"Search by drawing")))}}]),r}(g.Component),Vr=(r(115),function(e){var t=e.query,r=e.searchByPhoto,n=e.searchBySketch;return g.default.createElement("div",{className:"ImpreseeNoResults"},g.default.createElement("div",{className:"ImpreseeNoResultsMessage"},g.default.createElement("span",{style:{fontSize:"18px"}},window._wssee[0].texts.noMatchingResult||"We couldn't find any results for: ",' "',g.default.createElement("span",{className:"ImpreseeQueryText"},t),'"'," ")),g.default.createElement("div",{className:"ImpreseeTryAgain"},g.default.createElement("h3",null,window._wssee[0].texts.tryAgainWhenNoResults||"Why don't you try drawing or taking a picture of what you want?"),g.default.createElement(Wr,{searchByPhoto:r,searchBySketch:n})))});var Xr=function(){var e,t=window.history.state||{},r=window.location.hash.match(/#see\((.*)\)/),n=null!==r&&r.length>1?r[1].split(","):[],a=t.page||n[0]||0,s=t.filters||n[1]||"",o=t.reorderBy||n[2]||"";return{page:a,filters:s?JSON.parse((e=s,decodeURIComponent(escape(window.atob(e))))):{},reorderBy:o,filterBase64:s}},Kr=function(e,t,r){var n;if(null===(n=window._wssee[0].searchByText.addTextSearchToUrl)||void 0===n||n){var a=window._wssee[0].searchByText.baseSearchUrl||"";return"".concat(a,"#see(").concat(e,",").concat(t,",").concat(r,")")}return null},$r=function(){return((window._wssee||[{}])[0].searchByText||{}).useInfiniteScroll||!1},Jr=function(e,t){if(e&&t){var r=Number(e),n=Number(t);return 0===r||isNaN(r)||0===n||isNaN(n)?0:Math.round(100*(n-r)/r)}return 0},Zr=function(e,t){window.impreseeGtag&&window.impreseeGtag("event",e,t)},en=function(e,t,r){return(window._wssee[0].setup.parsePriceFunction||null)instanceof Function?window._wssee[0].setup.parsePriceFunction(t,r):rn(e)},tn=function(e){return(window._wssee[0].setup.formatPriceRangeFilterValue||null)instanceof Function?window._wssee[0].setup.formatPriceRangeFilterValue(e):rn(e)},rn=function(e){var t,r=Number(e);if(isNaN(r))t=e;else{var n=r.toFixed(isNaN(Number(window._wssee[0].setup.numberFractionDigits))?2:window._wssee[0].setup.numberFractionDigits).split(".");t=n[0].toString().replace(/\B(?=(\d{3})+(?!\d))/g,window._wssee[0].setup.thousandsSeparator||","),n.length>1&&(t=t+(window._wssee[0].setup.decimalSeparator||".")+n[1])}return"".concat(window._wssee[0].setup.currencySymbolAtTheEnd?"":window._wssee[0].texts.currencySymbol||"$").concat(t).concat(window._wssee[0].setup.currencySymbolAtTheEnd?window._wssee[0].texts.currencySymbol||"$":"")},nn=function(e,t,r,a,s){if(n.LOADING_DROP_DOWN_RESULTS!==r)return 0===e.length&&0===t.length?null:0===e.length?g.default.createElement(Vr,{query:t,searchByPhoto:a,searchBySketch:s}):void 0},an=function(e,t){if(e&&t){var r=Number(e);return Number(t)<r}return!1},sn=function(e){var t=e.split(/(?=[A-Z])/).join("-").toLowerCase();return"data-".concat(t)},on=function(){return Math.random().toString(20).substr(2,12)},cn=function(e){var t={};if(!e.data)return t;for(var r=0,n=Object.entries(e.data);r<n.length;r++){var a=Fr()(n[r],2),s=a[0],o=a[1];t[sn(s)]=o}return t},un=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},ln=function(){var e,t={};window._wssee&&window._wssee.length>0&&window._wssee[0].setup&&(null===(e=window._wssee[0].setup.allowImpreseeCookies)||void 0===e||e||(t["Impresee-Tracking"]="no-cookies"));return t},pn="CHANGE_STATUS",dn="SEARCH",hn="SEARCH_AREA",fn="DETECT";function mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null,r=null;switch(e){case n.DRAWING:t=o.SEARCH_BY_SKETCH,r=l.OPEN_SEARCH;break;case n.CROPPING:t=o.SEARCH_BY_PHOTO,r=l.OPEN_SEARCH;break;case n.CLOSED:t=o.NO_SEARCH,r=l.close_search}if(t&&r){var a={event_category:t,event_label:window.location.hostname};Zr(r,a)}return{type:pn,payload:e}}function yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"ACTIVE_SEARCH_BAR",payload:e}}function vn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"CHANGE_DROPDOWN_STATUS",payload:e}}function Sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"CHANGE_FULL_TEXT_SEARCH_STATUS",payload:e}}function gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{type:"MODAL_SIZE",payload:{width:e,height:t}}}function wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"LOAD_LOCAL_QUERY",payload:e}}function En(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{type:"SET_DISPLAY_QUERY_SIZE",payload:{width:e,height:t}}}function Rn(){return{type:"CLEAN_TEXT_QUERY"}}var bn=r(26),_n=r.n(bn),In=r(19),Cn=r.n(In),Tn=r(14),Bn=r(27),An=r.n(Bn),Dn=function(){var e;return function(t,r){return e&&e.cancel(o.CANCEL_REQUEST),e=An.a.CancelToken.source(),An.a.post(t,r,{headers:ln(),cancelToken:e.token,timeout:s.serviceTimeout,withCredentials:!0})}},On=Dn();function xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return function(){var p=_n()(Cn.a.mark((function p(d){var h,f,m;return Cn.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(d({type:pn,payload:n.SEARCHING}),h=s.searchURL+t,p.prev=2,Zr(l.DO_SEARCH,{event_category:r,event_label:window.location.hostname}),r!==o.SEARCH_BY_PHOTO){p.next=10;break}return p.next=7,On(h,{search_type:"FULL",is_mobile:Tn.isMobile||window.innerWidth<=768?"true":"false",page_size:100,query_image:{image_base64:e,image_upload_id:"",box_rank:0,box_custom:null,image_url:u}});case 7:f=p.sent,p.next=13;break;case 10:return p.next=12,On(h,{search_type:"FULL",is_mobile:Tn.isMobile||window.innerWidth<=768?"true":"false",page_size:100,query_sketch:{sketch_base64:e,sketch_upload_id:"",draw_sequence:c}});case 12:f=p.sent;case 13:if(m=f.data,Zr(l.FINISH_SEARCH,{event_category:l.DO_SEARCH_GET_RESULTS,event_label:window.location.hostname}),m.type=r,0===m.status){p.next=20;break}return i(),d({type:pn,payload:n.ERROR}),p.abrupt("return");case 20:a(r),d({type:dn,payload:m}),p.next=29;break;case 24:p.prev=24,p.t0=p.catch(2),console.error(p.t0),i(),d({type:pn,payload:n.ERROR});case 29:case"end":return p.stop()}}),p,null,[[2,24]])})));return function(e){return p.apply(this,arguments)}}()}function Ln(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(){var i=_n()(Cn.a.mark((function i(c){var u,l,p;return Cn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return u=s.detectURL+t,i.prev=1,i.next=4,On(u,{search_type:"FULL",is_mobile:Tn.isMobile||window.innerWidth<=768?"true":"false",page_size:100,query_image:{image_base64:e,image_upload_id:"",box_rank:0,box_custom:null,image_url:a}});case 4:if(l=i.sent,c({type:fn,payload:{}}),(p=l.data).type=o.SEARCH_BY_PHOTO,0===p.status){i.next=12;break}return r(),c({type:pn,payload:n.ERROR}),i.abrupt("return");case 12:c({type:fn,payload:p}),i.next=20;break;case 15:i.prev=15,i.t0=i.catch(1),console.error(i.t0),r(),c({type:pn,payload:n.ERROR});case 20:case"end":return i.stop()}}),i,null,[[1,15]])})));return function(e){return i.apply(this,arguments)}}()}var Pn=r(73),kn=r.n(Pn);r(135);function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Mn=function(e){D()(r,e);var t=Nn(r);function r(e){var a;return _()(this,r),a=t.call(this,e),N()(B()(a),"stopEventPropagation",(function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()})),N()(B()(a),"searchByUrl",(function(e){(c.beforeOneClickSearch||function(e,t){})(e,a.props.imageUrl),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=window._wssee[0].setup.useDetection||!1;a.props.loadLocalQueryImage(""),a.props.setStatus(n.SEARCHING),t?a.performDetection(a.props.imageUrl):a.performSearch(a.props.imageUrl)})),a.applicationUuid=c.photoApp||"",a.onSearchFailed=window._wssee[0].setup.onSearchFailed||function(){},a.beforeLoadResults=window._wssee[0].setup.beforeLoadResults||function(e){},a.isValidImage=a.isValidImage.bind(B()(a)),a.state={id:"see-"+on()},a}return C()(r,[{key:"componentDidMount",value:function(){var e=document.getElementById(this.state.id);e.addEventListener("click",this.searchByUrl),e.addEventListener("mouseenter",this.stopEventPropagation),e.addEventListener("mouseover",this.stopEventPropagation)}},{key:"isValidImage",value:function(){return!!this.props.imageUrl}},{key:"performSearch",value:function(e){this.props.performSearch(null,this.applicationUuid,o.SEARCH_BY_PHOTO,this.beforeLoadResults,this.onSearchFailed,{},e)}},{key:"performDetection",value:function(e){this.props.performDetection(null,this.applicationUuid,this.onSearchFailed,e)}},{key:"render",value:function(){if(this.isValidImage())return g.default.createElement("div",{id:this.state.id,className:"ImpreseeImageSearchTrigger",style:{backgroundColor:window._wssee[0].setup.imageSearchButtonColor||"#475d77"},onClickCapture:this.searchByUrl},g.default.createElement("img",{className:"ImpreseeImageSearchTriggerImage",src:kn.a,alt:""}))}}]),r}(g.Component),Fn=Object(w.b)(null,{setStatus:mn,performSearch:xn,performDetection:Ln,loadLocalQueryImage:wn})(Mn),Hn=r(74),Un=r.n(Hn);r(136);function Gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var jn=function(e){D()(r,e);var t=Gn(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).triggerSearchBar=n.triggerSearchBar.bind(B()(n)),n}return C()(r,[{key:"render",value:function(){return window._wssee[0].searchByText.useFullAsInstant?"":g.default.createElement("div",{className:"ImpreseeActivateSearchButton ".concat(u.buttonSearchBarLocation()),onClick:this.triggerSearchBar,id:"impresee-open-search-bar"},g.default.createElement("img",{src:Un.a,alt:"press to search"}))}},{key:"triggerSearchBar",value:function(){this.props.isMobile&&!window._wssee[0].searchByText.useFullAsInstant?(this.props.instantSearch(""),this.props.setDropDownStatus(n.DISPLAY_DROP_DOWN)):this.props.openSearchBarOverlay()}}]),r}(g.Component),qn=Object(w.b)(null,{setDropDownStatus:vn,openSearchBarOverlay:function(){return{type:"SHOW_SEARCH_BAR_OVERLAY"}}})(jn),Qn=r(31),zn=r.n(Qn),Yn=r(20),Wn=r.n(Yn),Vn=r(12),Xn=r.n(Vn),Kn=Dn(),$n=Dn(),Jn=function(e){switch(e){case o.SIMPLE_SEARCH_TEXT:return"INSTANT";case o.FULL_SEARCH_TEXT:return"FULL";case o.SEARCH_BY_PAGE_CHANGE:return"PAGE";case o.SEARCH_BY_REORDER:return"REORDER";case o.SEARCH_BY_FILTERING:return"FILTER";default:return"INSTANT"}},Zn=function(e){return Wn()(Xn()(e),(function(e){switch(e.type){case o.RANGE_FILTER:return e.active?{filter_code:e.code,filter_values:[e.rangeStart,e.rangeEnd]}:null;case o.VALUE_FILTER:for(var t=[],r=0,n=Object.entries(e.values);r<n.length;r++){var a=Fr()(n[r],2),s=a[0];a[1]&&t.push(s)}return{filter_code:e.code,filter_values:t};default:return null}}))};function ea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:10,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:o.SIMPLE_SEARCH_TEXT,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,m=arguments.length>11&&void 0!==arguments[11]?arguments[11]:[],y=arguments.length>12&&void 0!==arguments[12]&&arguments[12],v=arguments.length>13&&void 0!==arguments[13]&&arguments[13],S=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]&&arguments[15];return function(){var w=_n()(Cn.a.mark((function w(E){var R,b,_,I,C,T,B,A,D,O,x,L;return Cn.a.wrap((function(w){for(;;)switch(w.prev=w.next){case 0:if(b=Jn(p),0!==e.length||g||"INSTANT"===b||window._wssee[0].searchByText.allowEmptySearch){w.next=3;break}return w.abrupt("return");case 3:if(_=(_=(_=e.trim()).replace("[]","")).replace("[ ]",""),c(),I=s.searchByTextURL+t,C=Zn(d).filter((function(e){return null!==e})),T=m.filter((function(e){return null!==e})),null===(R=window._wssee[0].searchByText.useSearchSuggestions)||void 0===R||R||""!==e.length||!g){w.next=12;break}return w.abrupt("return");case 12:return B=f,A=u,D=p===o.SIMPLE_SEARCH_TEXT?Kn:$n,w.prev=15,w.next=18,D(I,{query_text:_,query_id:r,page_size:A,num_page:B,search_type:b,search_filter:C,search_reorder:h===i.defaultOrderCode?null:h,is_mobile:Tn.isMobile||window.innerWidth<=768?"true":"false",num_suggestions:S,is_suggested_search:g?"true":"false",is_from_first:v?"true":"false",where:T,loaded_from_url_params:y?"true":"false"});case 18:if(O=w.sent,x=O.data,v&&x&&(x.num_page=f),Zr(l.FINISH_SEARCH,{event_category:p,event_label:_,event_value:x.total_products}),0===x.status){w.next=25;break}return a(),w.abrupt("return");case 25:L=b,w.t0=b,w.next="INSTANT"===w.t0?29:"FULL"===w.t0?31:"FILTER"===w.t0?33:"REORDER"===w.t0?35:37;break;case 29:return L=o.INSTANT_SEARCH,w.abrupt("break",38);case 31:return L=o.SEARCH_BY_TEXT,w.abrupt("break",38);case 33:return L=o.SEARCH_BY_FILTER,w.abrupt("break",38);case 35:return L=o.SEARCH_BY_CHANGE_PAGE_EVENT,w.abrupt("break",38);case 37:return w.abrupt("break",38);case 38:n(L),E({type:b,payload:x}),w.next=49;break;case 42:if(w.prev=42,w.t1=w.catch(15),console.log(w.t1),w.t1.message!==o.CANCEL_REQUEST){w.next=48;break}return console.log("Canceling previous search by text request"),w.abrupt("return");case 48:a();case 49:case"end":return w.stop()}}),w,null,[[15,42]])})));return function(e){return w.apply(this,arguments)}}()}var ta=function(){return{type:"CLEAR_INSTANT_SEARCH_RESULTS",payload:null}},ra=r(75),na=r.n(ra),aa=(r(142),function(e){var t,r,n=e.leftImage,a=e.onClick,s=e.input,o=e.onClickSearchBySketch,i=e.onClickSearchByPhoto,c=e.onLoad,u=void 0===c?function(){}:c;return Object(g.useEffect)((function(){return u()}),[u,s]),g.default.createElement("div",{className:"ImpreseeCompleteSearchBar"},g.default.createElement("button",{className:"ImpreseeCloseSearchBarButton",onClick:a},g.default.createElement("img",{src:n||na.a,alt:"close"})),s,(null===(t=window._wssee[0].setup.useSearchBySketch)||void 0===t||t)&&g.default.createElement("button",{className:"ImpreseeSearchBarButton",onClick:o},g.default.createElement("img",{src:window._wssee[0].setup.searchBySketchIconURL?window._wssee[0].setup.searchBySketchIconURL:qr.a,alt:window._wssee[0].texts.searchBySketch||"Search by drawing"})),(null===(r=window._wssee[0].setup.useSearchByPhoto)||void 0===r||r)&&g.default.createElement("button",{className:"ImpreseeSearchBarButton",onClick:i},g.default.createElement("img",{src:window._wssee[0].setup.searchByPhotoIconURL?window._wssee[0].setup.searchByPhotoIconURL:zr.a,alt:window._wssee[0].texts.searchByPhoto||"Search by image"})))});function sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var oa=function(e){D()(r,e);var t=sa(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).search=n.props.search,n.instantSearch=n.props.instantSearch,n.searchByPhoto=n.searchByPhoto.bind(B()(n)),n.searchBySketch=n.searchBySketch.bind(B()(n)),n.onFocusSearchBar=n.onFocusSearchBar.bind(B()(n)),n.performFullSearch=n.performFullSearch.bind(B()(n)),n.onPressClose=n.onPressClose.bind(B()(n)),n.onCloseCustom=n.props.onClose||function(){},n.lazySearchBar=n.props.lazySearchBar||function(){return null},n}return C()(r,[{key:"onFocusSearchBar",value:function(e){if(this.props.isMobile){var t=document.getElementById("ImpreseeMobileSearchBarInput");null!=t&&(this.props.setActiveSearchBar(t),this.props.dropDownStatus===n.CLOSED&&this.instantSearch(t.value)),window._wssee[0].searchByText.useFullAsInstant||this.props.setDropDownStatus(n.DISPLAY_DROP_DOWN),e.stopPropagation()}}},{key:"searchByPhoto",value:function(){this.props.setStatus(n.CROPPING)}},{key:"searchBySketch",value:function(){this.props.setStatus(n.DRAWING)}},{key:"performFullSearch",value:function(e){this.inputRef.value="",this.generalSearchBar.inputLastValue="",this.props.addSearchByTextQuery(e)}},{key:"componentDidMount",value:function(){var e=this;if(this.props.searchBars&&this.props.searchBars.length>0){for(var t=0,r=Array.from(this.props.searchBars);t<r.length;t++){r[t].value=""}this.searchBar=this.props.searchBars[0]}this.generalSearchBar=new Gr(window._wssee[0].searchByText.useFullAsInstant?this.searchBar:this.inputRef,this.search,this.props.searchByTextApp,window._wssee[0].searchByText.useFullAsInstant?100:window._wssee[0].searchByText.searchDelayMilis||300,window._wssee[0].searchByText.useFullAsInstant?[].concat(zn()(this.props.searchBars),[this.inputRef]):this.props.searchBars,this.onFocusSearchBar,this.props.cleanQueryText,(function(){return e.props.setDropDownStatus(n.ERROR)}),this.props.onBeforeSearch,this.performFullSearch,this.lazySearchBar),this.inputRef.onfocusin=function(e){return e.stopPropagation()},this.generalSearchBar.setListeners();for(var a=0,s=Array.from(this.props.searchBars);a<s.length;a++){var o=s[a];(document.activeElement===o||document.activeElement.contains(o)&&"FORM"===document.activeElement.tagName)&&window.setTimeout((function(){e.onFocusSearchBar()}),50)}}},{key:"componentDidUpdate",value:function(e){var t=this;e.dropDownStatus!==this.props.dropDownStatus&&this.props.dropDownStatus===n.DISPLAY_DROP_DOWN&&(this.inputRef.focus(),window.setTimeout((function(){t.inputRef.focus()}),10)),e.displaySearchBarOverlayStatus!==this.props.displaySearchBarOverlayStatus&&this.props.displaySearchBarOverlayStatus===n.CLOSED&&(this.inputRef.value=null)}},{key:"componentWillUnmount",value:function(){this.generalSearchBar&&this.generalSearchBar.destroy()}},{key:"onPressClose",value:function(){this.props.setDropDownStatus(n.CLOSED),this.props.clearInstantSearchresults(),this.generalSearchBar&&(this.generalSearchBar.inputLastValue=""),(window._wssee[0].searchByText.onCloseResults||function(e){})(o.INSTANT_SEARCH),this.inputRef&&(this.inputRef.value=null),this.onCloseCustom()}},{key:"render",value:function(){var e=this;return g.default.createElement(aa,{onClick:this.onPressClose,onClickSearchBySketch:this.searchBySketch,onClickSearchByPhoto:this.searchByPhoto,input:g.default.createElement("input",{enterkeyhint:"go",autocomplete:"off",className:this.props.inputClassName||"",onFocus:function(t){t.stopPropagation(),e.props.setActiveSearchBar(t.target)},ref:function(t){return e.inputRef=t},id:"ImpreseeMobileSearchBarInput"})})}}]),r}(g.Component);var ia=Object(w.b)((function(e){return{dropDownStatus:e.dropDownStatus,displaySearchBarOverlayStatus:e.displaySearchBarOverlayStatus,textQueryId:e.textQueryId}}),{setDropDownStatus:vn,searchByText:ea,setStatus:mn,cleanQueryText:Rn,clearInstantSearchresults:ta,setActiveSearchBar:yn,setFullSearchResultsStatus:Sn})(oa);r(143);function ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var ua=function(e){D()(r,e);var t=ca(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:"ImpreseeSearchBarOverlay"},g.default.createElement("header",null,g.default.createElement(ia,{onClose:function(){return e.props.closeSearchBarOverlay()},inputClassName:u.overlayInputClassName,searchByTextApp:this.props.searchByTextApp,searchBars:this.props.searchBars,lazySearchBars:this.props.lazySearchBar,addSearchByTextQuery:this.props.addSearchByTextQuery,search:this.props.search,instantSearch:this.props.instantSearch})))}}]),r}(g.Component),la=Object(w.b)(null,{closeSearchBarOverlay:function(){return{type:"HIDE_SEARCH_BAR_OVERLAY"}}})(ua),pa=r(105),da=r(15),ha=r.n(da),fa=r(48),ma=r.n(fa),ya=r(76),va=r.n(ya),Sa=function(e){var t=e.classes,r=e.classNames,n=e.styles,a=e.closeIconSize,s=e.closeIconSvgPath,o=e.onClickCloseIcon,i=e.id;return g.default.createElement("button",{className:ha()(t.closeButton,r.closeButton),style:n.closeButton,onClick:o,id:i},g.default.createElement("svg",{className:ha()(t.closeIcon,r.closeIcon),style:n.closeIcon,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 36 36"},s))};Sa.propTypes={classNames:F.a.object.isRequired,styles:F.a.object.isRequired,classes:F.a.object.isRequired,closeIconSize:F.a.number.isRequired,closeIconSvgPath:F.a.node.isRequired,onClickCloseIcon:F.a.func.isRequired,id:F.a.string},Sa.defaultProps={id:null};var ga=Sa,wa=[],Ea=function(){return wa},Ra=function(e){-1===wa.indexOf(e)&&wa.push(e)},ba=function(e){var t=wa.indexOf(e);-1!==t&&wa.splice(t,1)},_a=function(e){return!!wa.length&&wa[wa.length-1]===e};r(147);function Ia(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(r),!0).forEach((function(t){N()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ia(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ta(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Ba="undefined"!=typeof window,Aa=function(e){D()(r,e);var t=Ta(r);function r(e){var n;return _()(this,r),n=t.call(this,e),N()(B()(n),"shouldClose",null),N()(B()(n),"handleOpen",(function(){Ra(B()(n)),Ba&&!n.props.container&&document.body.appendChild(n.container),n.props.blockScroll&&r.blockScroll(),document.addEventListener("keydown",n.handleKeydown)})),N()(B()(n),"handleClose",(function(){ba(B()(n)),n.props.blockScroll&&r.unblockScroll(),Ba&&!n.props.container&&document.body.removeChild(n.container),document.removeEventListener("keydown",n.handleKeydown)})),N()(B()(n),"handleClickOverlay",(function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose?(n.props.onOverlayClick&&n.props.onOverlayClick(e),n.props.closeOnOverlayClick&&n.props.onClose(e),n.shouldClose=null):n.shouldClose=null})),N()(B()(n),"handleClickCloseIcon",(function(e){n.props.onClose(e)})),N()(B()(n),"handleKeydown",(function(e){27===e.keyCode&&_a(B()(n))&&(n.props.onEscKeyDown&&n.props.onEscKeyDown(e),n.props.closeOnEsc&&n.props.onClose(e))})),N()(B()(n),"handleModalEvent",(function(){n.shouldClose=!1})),N()(B()(n),"handleEntered",(function(){n.props.onEntered&&n.props.onEntered()})),N()(B()(n),"handleExited",(function(){n.props.onExited&&n.props.onExited(),n.setState({showPortal:!1}),n.props.blockScroll&&r.unblockScroll()})),n.container=Ba&&document.createElement("div"),n.state={showPortal:n.props.open},n}return C()(r,[{key:"componentDidMount",value:function(){this.props.open&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e,t){t.showPortal&&!this.state.showPortal?this.handleClose():!e.open&&this.props.open&&this.handleOpen()}},{key:"componentWillUnmount",value:function(){this.state.showPortal&&this.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.open,r=e.center,n=e.classes,a=e.classNames,s=e.styles,o=e.showCloseIcon,i=e.closeIconSize,c=e.closeIconSvgPath,u=e.animationDuration,l=e.focusTrapped,p=e.focusTrapOptions,d=e.overlayId,h=e.modalId,f=e.closeIconId,m=e.role,y=e.ariaLabelledby,v=e.ariaDescribedby;if(!this.state.showPortal)return null;var S=g.default.createElement("div",null,this.props.children,o&&g.default.createElement(ga,{classes:n,classNames:a,styles:s,closeIconSize:i,closeIconSvgPath:c,onClickCloseIcon:this.handleClickCloseIcon,id:f}));return g.default.createPortal(g.default.createElement(pa.a,{in:t,appear:!0,classNames:{appear:a.transitionEnter||n.transitionEnter,appearActive:a.transitionEnterActive||n.transitionEnterActive,enter:a.transitionEnter||n.transitionEnter,enterActive:a.transitionEnterActive||n.transitionEnterActive,exit:a.transitionExit||n.transitionExit,exitActive:a.transitionExitActive||n.transitionExitActive},timeout:u,onEntered:this.handleEntered,onExited:this.handleExited},g.default.createElement("div",{className:ha()(n.overlay,a.overlay),onClick:this.handleClickOverlay,style:s.overlay,id:d},g.default.createElement("div",{className:ha()(n.modal,r&&n.modalCenter,a.modal),style:s.modal,onMouseDown:this.handleModalEvent,onMouseUp:this.handleModalEvent,onClick:this.handleModalEvent,id:h,role:m,"aria-modal":"true","aria-labelledby":y,"aria-describedby":v},l?g.default.createElement(va.a,{focusTrapOptions:Ca(Ca({},{clickOutsideDeactivates:!0}),p)},S):S))),this.props.container||this.container)}}],[{key:"blockScroll",value:function(){ma.a.on()}},{key:"getDerivedStateFromProps",value:function(e,t){return!t.showPortal&&e.open?{showPortal:!0}:null}}]),r}(g.Component);N()(Aa,"unblockScroll",(function(){0===Ea().length&&ma.a.off()})),Aa.propTypes={closeOnEsc:F.a.bool,closeOnOverlayClick:F.a.bool,onEntered:F.a.func,onExited:F.a.func,onClose:F.a.func.isRequired,onEscKeyDown:F.a.func,onOverlayClick:F.a.func,open:F.a.bool.isRequired,classNames:F.a.object,styles:F.a.object,children:F.a.node,classes:F.a.object,center:F.a.bool,showCloseIcon:F.a.bool,closeIconSize:F.a.number,closeIconSvgPath:F.a.node,animationDuration:F.a.number,container:F.a.object,blockScroll:F.a.bool,focusTrapped:F.a.bool,focusTrapOptions:F.a.object,overlayId:F.a.string,modalId:F.a.string,closeIconId:F.a.string,role:F.a.string,ariaLabelledby:F.a.string,ariaDescribedby:F.a.string},Aa.defaultProps={classes:{overlay:"ImpreseeGeneralModalOverlay",modal:"ImpreseeGeneralModal",modalCenter:"ImpreseeGeneralModalCenter",closeButton:"ImpreseeGeneralModalCloseButton",closeIcon:"ImpreseeGeneralModalCloseIcon",transitionEnter:"ImpreseeGeneralModalTransitionEnter",transitionEnterActive:"ImpreseeGeneralModalTransitionEnterActive",transitionExit:"ImpreseeGeneralModalTransitionExit",transitionExitActive:"ImpreseeGeneralModalTransitionExitActive"},closeOnEsc:!0,closeOnOverlayClick:!0,onEntered:void 0,onExited:void 0,onEscKeyDown:void 0,onOverlayClick:void 0,showCloseIcon:!0,closeIconSize:28,closeIconSvgPath:g.default.createElement("path",{d:"M28.5 9.62L26.38 7.5 18 15.88 9.62 7.5 7.5 9.62 15.88 18 7.5 26.38l2.12 2.12L18 20.12l8.38 8.38 2.12-2.12L20.12 18z"}),classNames:{},styles:{},children:null,center:!1,animationDuration:500,blockScroll:!0,focusTrapped:!0,focusTrapOptions:{},overlayId:void 0,modalId:void 0,closeIconId:void 0,role:"dialog",ariaLabelledby:void 0,ariaDescribedby:void 0};var Da=Aa,Oa=r(77),xa=r.n(Oa),La=function(){var e=Tn.isMobileOnly?130:150;return g.default.createElement("div",{className:"".concat(on()),style:{display:"flex",justifyContent:"center"}},g.default.createElement("a",{href:c.poweredByImpreseeLink,target:"_blank",rel:"noopener noreferrer"},g.default.createElement("img",{src:xa.a,alt:"".concat(on()),width:e})))},Pa=r(78),ka=r(79),Na=r(80);function Ma(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Fa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fa(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ha(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ua(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ha(Object(r),!0).forEach((function(t){N()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ha(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}function ja(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}var qa={display:"block",position:"absolute"},Qa=[{name:"interface",zIndex:15},{name:"drawing",zIndex:11},{name:"temp",zIndex:12},{name:"grid",zIndex:10}],za=F.a.oneOfType([F.a.number,F.a.string]),Ya=function(e){D()(r,e);var t=Ga(r);function r(e){var n;return _()(this,r),n=t.call(this,e),N()(B()(n),"componentWillUnmount",(function(){n.canvasObserver.unobserve(n.canvasContainer)})),N()(B()(n),"drawImage",(function(){n.props.imgSrc&&(n.image=new Image,n.image.src=n.props.imgSrc,n.image.onload=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ctx,r=e.img,n=e.x,a=e.y,s=e.w,o=e.h,i=e.offsetX,c=e.offsetY;"number"!=typeof n&&(n=0),"number"!=typeof a&&(a=0),"number"!=typeof s&&(s=t.canvas.width),"number"!=typeof o&&(o=t.canvas.height),"number"!=typeof i&&(i=.5),"number"!=typeof c&&(c=.5),i<0&&(i=0),c<0&&(c=0),i>1&&(i=1),c>1&&(c=1);var u,l,p,d,h=r.width,f=r.height,m=Math.min(s/h,o/f),y=h*m,v=f*m,S=1;y<s&&(S=s/y),Math.abs(S-1)<1e-14&&v<o&&(S=o/v),(u=(h-(p=h/((y*=S)/s)))*i)<0&&(u=0),(l=(f-(d=f/((v*=S)/o)))*c)<0&&(l=0),p>h&&(p=h),d>f&&(d=f),t.drawImage(r,u,l,p,d,n,a,s,o)}({ctx:n.ctx.grid,img:n.image})})})),N()(B()(n),"undo",(function(){var e=n.lines.slice(0,-1);n.clear(),n.simulateDrawingLines({lines:e,immediate:!0})})),N()(B()(n),"getDrawSequence",(function(){return n.lines})),N()(B()(n),"getSaveData",(function(){return JSON.stringify({lines:n.lines,width:n.props.canvasWidth,height:n.props.canvasHeight})})),N()(B()(n),"loadSaveData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.props.immediateLoading;if("string"!=typeof e)throw new Error("saveData needs to be of type string!");var r=JSON.parse(e),a=r.lines,s=r.width,o=r.height;if(!a||"function"!=typeof a.push)throw new Error("saveData.lines needs to be an array!");if(n.clear(),s===n.props.canvasWidth&&o===n.props.canvasHeight)n.simulateDrawingLines({lines:a,immediate:t});else{var i=n.props.canvasWidth/s,c=n.props.canvasHeight/o,u=(i+c)/2;n.simulateDrawingLines({lines:a.map((function(e){return Ua(Ua({},e),{},{points:e.points.map((function(e){return{x:e.x*i,y:e.y*c}})),brushRadius:e.brushRadius*u})})),immediate:t})}})),N()(B()(n),"simulateDrawingLines",(function(e){var t=e.lines,r=e.immediate,a=0,s=r?0:n.props.loadTimeOffset;t.forEach((function(e){for(var t=e.points,r=e.brushColor,o=e.brushRadius,i=function(e){a+=s,window.setTimeout((function(){n.drawPoints({points:t.slice(0,e+1),brushColor:r,brushRadius:o})}),a)},c=1;c<t.length;c++)i(c);a+=s,window.setTimeout((function(){n.points=t,n.saveLine({brushColor:r,brushRadius:o})}),a)}))})),N()(B()(n),"handleTouchStart",(function(e){var t=n.getPointerPos(e),r=t.x,a=t.y;n.lazy.update({x:r,y:a},{both:!0}),n.handleMouseDown(e),n.mouseHasMoved=!0})),N()(B()(n),"handleTouchMove",(function(e){e.preventDefault();var t=n.getPointerPos(e),r=t.x,a=t.y;n.handlePointerMove(r,a)})),N()(B()(n),"handleTouchEnd",(function(e){n.handleMouseUp(e);var t=n.lazy.getBrushCoordinates();n.lazy.update({x:t.x,y:t.y},{both:!0}),n.mouseHasMoved=!0})),N()(B()(n),"handleMouseDown",(function(e){e.preventDefault(),n.isPressing=!0})),N()(B()(n),"handleMouseMove",(function(e){var t=n.getPointerPos(e),r=t.x,a=t.y;n.handlePointerMove(r,a)})),N()(B()(n),"handleMouseUp",(function(e){e.preventDefault(),n.isDrawing=!1,n.isPressing=!1,n.saveLine()})),N()(B()(n),"handleCanvasResize",(function(e,t){var r,a=n.getSaveData(),s=Ma(e);try{for(s.s();!(r=s.n()).done;){var o=r.value.contentRect,i=o.width,c=o.height;n.setCanvasSize(n.canvas.interface,i,c),n.setCanvasSize(n.canvas.drawing,i,c),n.setCanvasSize(n.canvas.temp,i,c),n.setCanvasSize(n.canvas.grid,i,c),n.drawGrid(n.ctx.grid),n.loop({once:!0})}}catch(e){s.e(e)}finally{s.f()}n.loadSaveData(a,!0)})),N()(B()(n),"setCanvasSize",(function(e,t,r){e.width=t,e.height=r,e.style.width=t,e.style.height=r})),N()(B()(n),"isTouchEvent",(function(e){return-1!==e.type.indexOf("touch")})),N()(B()(n),"getPointerPos",(function(e){var t=n.canvas.interface.getBoundingClientRect(),r=e.clientX,a=e.clientY,s=t.top+document.body.scrollTop,o=t.left+document.body.scrollLeft;return e.changedTouches&&e.changedTouches.length>0&&(r=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY),n.isTouchEvent(e)?(r-=o,a-=s):(r-=t.left,a-=t.top),{x:r,y:a}})),N()(B()(n),"handlePointerMove",(function(e,t){if(!n.props.disabled){var r=n.lazy.update({x:e,y:t}),a=!n.lazy.isEnabled();(n.isPressing&&r&&!n.isDrawing||a&&n.isPressing)&&(n.isDrawing=!0,n.points.push(n.lazy.brush.toObject())),n.isDrawing&&(n.lazy.brushHasMoved()||a)&&(n.points.push(n.lazy.brush.toObject()),n.drawPoints({points:n.points,brushColor:n.props.brushColor,brushRadius:n.props.brushRadius})),n.mouseHasMoved=!0}})),N()(B()(n),"drawPoints",(function(e){var t=e.points,r=e.brushColor,a=e.brushRadius;n.ctx.temp.lineJoin="round",n.ctx.temp.lineCap="round",n.ctx.temp.strokeStyle=r,n.ctx.temp.clearRect(0,0,n.ctx.temp.canvas.width,n.ctx.temp.canvas.height),n.ctx.temp.lineWidth=2*a;var s=t[0],o=t[1];n.ctx.temp.moveTo(o.x,o.y),n.ctx.temp.beginPath();for(var i=1,c=t.length;i<c;i++){var u=ja(s,o);n.ctx.temp.quadraticCurveTo(s.x,s.y,u.x,u.y),s=t[i],o=t[i+1]}n.ctx.temp.lineTo(s.x,s.y),n.ctx.temp.stroke()})),N()(B()(n),"saveLine",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.brushColor,r=e.brushRadius;if(!(n.points.length<2)){n.lines.push({points:zn()(n.points),brushColor:t||n.props.brushColor,brushRadius:r||n.props.brushRadius}),n.points.length=0;var a=n.canvas.temp.width,s=n.canvas.temp.height;n.ctx.drawing.drawImage(n.canvas.temp,0,0,a,s),n.ctx.temp.clearRect(0,0,a,s)}})),N()(B()(n),"clear",(function(){n.lines=[],n.valuesChanged=!0,n.ctx.drawing.clearRect(0,0,n.canvas.drawing.width,n.canvas.drawing.height),n.ctx.temp.clearRect(0,0,n.canvas.temp.width,n.canvas.temp.height)})),N()(B()(n),"loop",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.once,r=void 0!==t&&t;if(n.mouseHasMoved||n.valuesChanged){var a=n.lazy.getPointerCoordinates(),s=n.lazy.getBrushCoordinates();n.drawInterface(n.ctx.interface,a,s),n.mouseHasMoved=!1,n.valuesChanged=!1}r||window.requestAnimationFrame((function(){n.loop()}))})),N()(B()(n),"drawGrid",(function(e){if(!n.props.hideGrid){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.beginPath(),e.setLineDash([5,1]),e.setLineDash([]),e.strokeStyle=n.props.gridColor,e.lineWidth=.5;for(var t=0;t<e.canvas.width;)t+=25,e.moveTo(t,0),e.lineTo(t,e.canvas.height);e.stroke();for(var r=0;r<e.canvas.height;)r+=25,e.moveTo(0,r),e.lineTo(e.canvas.width,r);e.stroke()}})),N()(B()(n),"drawInterface",(function(e,t,r){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.beginPath(),e.fillStyle=n.props.brushColor,e.arc(r.x,r.y,n.props.brushRadius,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.fillStyle=n.props.catenaryColor,e.arc(t.x,t.y,4,0,2*Math.PI,!0),e.fill(),n.lazy.isEnabled()&&(e.beginPath(),e.lineWidth=2,e.lineCap="round",e.setLineDash([2,4]),e.strokeStyle=n.props.catenaryColor,n.catenary.drawToCanvas(n.ctx.interface,r,t,n.chainLength),e.stroke()),e.beginPath(),e.fillStyle=n.props.catenaryColor,e.arc(r.x,r.y,2,0,2*Math.PI,!0),e.fill()})),n.canvas={},n.ctx={},n.catenary=new ka.Catenary,n.points=[],n.lines=[],n.mouseHasMoved=!0,n.valuesChanged=!0,n.isDrawing=!1,n.isPressing=!1,n}return C()(r,[{key:"componentDidMount",value:function(){var e=this;this.lazy=new Pa.LazyBrush({radius:this.props.lazyRadius*window.devicePixelRatio,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),this.chainLength=this.props.lazyRadius*window.devicePixelRatio,this.canvasObserver=new Na.a((function(t,r){return e.handleCanvasResize(t,r)})),this.canvasObserver.observe(this.canvasContainer),this.drawImage(),this.loop(),window.setTimeout((function(){var t=window.innerWidth/2,r=window.innerHeight/2;e.lazy.update({x:t-e.chainLength/4,y:r},{both:!0}),e.lazy.update({x:t+e.chainLength/4,y:r},{both:!1}),e.mouseHasMoved=!0,e.valuesChanged=!0,e.clear(),e.props.saveData&&e.loadSaveData(e.props.saveData)}),100)}},{key:"componentDidUpdate",value:function(e){e.lazyRadius!==this.props.lazyRadius&&(this.chainLength=this.props.lazyRadius*window.devicePixelRatio,this.lazy.setRadius(this.props.lazyRadius*window.devicePixelRatio)),e.saveData!==this.props.saveData&&this.loadSaveData(this.props.saveData),JSON.stringify(e)!==JSON.stringify(this.props)&&(this.valuesChanged=!0)}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:this.props.className,style:Ua({display:"block",background:this.props.backgroundColor,touchAction:"none",width:this.props.canvasWidth,height:this.props.canvasHeight},this.props.style),ref:function(t){t&&(e.canvasContainer=t)}},Qa.map((function(t){var r=t.name,n=t.zIndex,a="interface"===r;return g.default.createElement("canvas",{key:r,ref:function(t){t&&(e.canvas[r]=t,e.ctx[r]=t.getContext("2d"))},style:Ua(Ua({},qa),{},{zIndex:n}),onMouseDown:a?e.handleMouseDown:void 0,onMouseMove:a?e.handleMouseMove:void 0,onMouseUp:a?e.handleMouseUp:void 0,onMouseOut:a?e.handleMouseUp:void 0,onTouchStart:a?e.handleTouchStart:void 0,onTouchMove:a?e.handleTouchMove:void 0,onTouchEnd:a?e.handleTouchEnd:void 0,onTouchCancel:a?e.handleTouchEnd:void 0})})))}}]),r}(g.PureComponent);N()(Ya,"propTypes",{loadTimeOffset:F.a.number,lazyRadius:F.a.number,brushRadius:F.a.number,brushColor:F.a.string,catenaryColor:F.a.string,gridColor:F.a.string,backgroundColor:F.a.string,hideGrid:F.a.bool,canvasWidth:za,canvasHeight:za,disabled:F.a.bool,imgSrc:F.a.string,saveData:F.a.string,immediateLoading:F.a.bool}),N()(Ya,"defaultProps",{loadTimeOffset:5,lazyRadius:12,brushRadius:10,brushColor:"#444",catenaryColor:"#0a0302",gridColor:"rgba(150,150,150,0.17)",backgroundColor:"#FFF",hideGrid:!1,canvasWidth:400,canvasHeight:400,disabled:!1,imgSrc:"",saveData:"",immediateLoading:!1});var Wa=r(81),Va=r.n(Wa);r(150);function Xa(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ka(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ka(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function Ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Ja=function(e){D()(r,e);var t=$a(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).brushWidth=3,n.brushColor="#000",n.handleResize=n.handleResize.bind(B()(n)),n.searchBySketch=n.searchBySketch.bind(B()(n)),n.applicationUuid=c.sketchApp,n.mainColor=window._wssee[0].setup.mainColor||"#bababa",n.setButtonsBarHeight(),n}return C()(r,[{key:"setButtonsBarHeight",value:function(){this.props.isMobile?this.buttonsBarHeight=75:this.buttonsBarHeight=110}},{key:"getButtonsBarHeight",value:function(){return this.props.modalSize.height-this.buttonsBarHeight}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.canvasRef.clear()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.setButtonsBarHeight(),this.canvasRef.clear()}},{key:"isCanvasBlank",value:function(e){var t=e.getContext("2d");return!new Uint32Array(t.getImageData(0,0,e.width,e.height).data.buffer).some((function(e){return 0!==e}))}},{key:"searchBySketch",value:function(){var e,t=Xa(document.querySelectorAll(".ImpreseeGeneralModal.ImpreseeModal"));try{for(t.s();!(e=t.n()).done;){var r=e.value.getElementsByTagName("canvas");if(4===r.length){var a=r[1];if(this.isCanvasBlank(a))continue;this.props.setStatus(n.SEARCHING);var s=a.toDataURL("img/png"),i=this.canvasRef.getDrawSequence();this.props.performSearch(s,this.applicationUuid,o.SEARCH_BY_SKETCH,this.props.beforeLoadResults,this.props.onSearchFailed,i)}}}catch(e){t.e(e)}finally{t.f()}}},{key:"render",value:function(){var e=this;return g.default.createElement("div",null,g.default.createElement(Ya,{ref:function(t){return e.canvasRef=t},lazyRadius:0,hideGrid:!0,brushRadius:this.brushWidth,brushColor:this.brushColor,canvasWidth:this.props.modalSize.width,canvasHeight:this.getButtonsBarHeight()}),g.default.createElement("div",{className:"ImpreseeSearchBySketchBar"},g.default.createElement("div",{className:"ImpreseeClearCanvasButton",onClick:function(){return e.canvasRef.clear()}},g.default.createElement("img",{className:"ImpreseeTrashCanButton",alt:"trashcan",src:Va.a})),g.default.createElement(La,{isMobile:this.props.isMobile}),g.default.createElement("div",{className:"ImpreseeSearchBySketchButton",onClick:this.searchBySketch,style:{backgroundColor:this.mainColor}},window._wssee[0].texts.searchButtonLabel||"Search")))}}]),r}(g.Component);Ja.propTypes={beforeLoadResults:F.a.func.isRequired,onSearchFailed:F.a.func.isRequired};var Za=Object(w.b)((function(e){return{modalSize:e.modalSize}}),{setStatus:mn,performSearch:xn})(Ja),es=r(82),ts=r.n(es),rs=r(40),ns=r.n(rs),as=r(83),ss=r.n(as),os=r(84),is=r.n(os);r(65),r(66);function cs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var us=function(e){D()(r,e);var t=cs(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).props.isMobile?n.heightReduction=70:n.heightReduction=110,n.onChange=n.onChange.bind(B()(n)),n.search=n.search.bind(B()(n)),n.doSearch=n.doSearch.bind(B()(n)),n.applicationUuid=c.photoApp,n.onlyCameraAsInput=window._wssee[0].setup.onlyCameraAsInput||!1,n.disableImageCrop=window._wssee[0].setup.disableImageCrop||!1,n}return C()(r,[{key:"componentDidMount",value:function(){this.props.loadImage(null),this.inputFileRef.click(),window.setTimeout((function(){document.activeElement&&document.activeElement.blur()}),50)}},{key:"componentWillUnmount",value:function(){this.inputFileRef.value=""}},{key:"onChange",value:function(e){var t,r=this;if(e.preventDefault(),e.dataTransfer?t=e.dataTransfer.files:e.target&&(t=e.target.files),!(t.length<=0)){if(window._wssee[0].setup.useDetection||this.disableImageCrop){this.props.setStatus(n.SEARCHING);var a=this.props.performDetection,s=this.props.loadLocalQueryImage,o=this.props.onSearchFailed,i=this.applicationUuid,c=this.doSearch,u=window._wssee[0].setup.useDetection||!1,l=this.disableImageCrop;ts.a.imageFileResizer(t[0],400,600,"JPEG",90,0,(function(e){s(e),u?a(e,i,o):l&&c(e)}))}var p=new FileReader;p.onload=function(){r.props.loadImage(p.result)},p.readAsDataURL(t[0])}}},{key:"doSearch",value:function(e){this.props.loadLocalQueryImage(e),this.props.performSearch(e,this.applicationUuid,o.SEARCH_BY_PHOTO,this.props.beforeLoadResults,this.props.onSearchFailed)}},{key:"search",value:function(){this.props.setStatus(n.SEARCHING);var e={},t=this.cropper.getData();t.width>t.height?e.width=640:e.height=640;var r=this.cropper.getCroppedCanvas(e).toDataURL("image/jpeg",.8);this.doSearch(r)}},{key:"renderOnlyCameraAsInput",value:function(){return!!this.onlyCameraAsInput}},{key:"renderContent",value:function(){var e=this;return this.props.loadedImage?g.default.createElement("div",null,g.default.createElement(ns.a,{src:this.props.loadedImage,ref:function(t){e.cropper=t},style:{height:this.props.modalSize.height-this.heightReduction,width:this.props.modalSize.width,overflowX:"hidden",overflowY:"hidden"},zoomOnWheel:!1,zoomOnTouch:!1,dragMode:"none",guides:!1}),g.default.createElement("div",{className:"ImpreseeCropperButtonContainer"},g.default.createElement(La,{isMobile:this.props.isMobile}),g.default.createElement("div",{onClick:function(){return e.inputFileRef.click()},className:"ImpreseeChangeImageContainer"},g.default.createElement("img",{className:"ImpreseeChangeImage",alt:"Change",src:ss.a})),g.default.createElement("div",{className:"ImpreseeSearchByPhotoButton",onClick:this.search,style:{backgroundColor:window._wssee[0].setup.mainColor||"#bababa"}},window._wssee[0].texts.searchButtonLabel||"Search"))):g.default.createElement("div",{className:"ImpreseeClickOrDragAndDrop"},g.default.createElement("div",{className:"ImpreseeDragAndDropMessage"},g.default.createElement("div",{className:"ImpreseeDragAndDropMessageContainer"},g.default.createElement("img",{className:"ImpreseeDragAndDropImage",alt:"drag and drop",src:is.a}),g.default.createElement("h2",null,window._wssee[0].texts.dragAndDropImageTitle||"Drag & Drop an image or just click here"),g.default.createElement("span",{className:"ImpreseeDragAndDropSubtitle"},window._wssee[0].texts.dragAndDropImageMessage||"Upload the image you'd like to use to search"))),this.renderOnlyCameraAsInput()?g.default.createElement("input",{capture:this.renderOnlyCameraAsInput(),style:{height:"100%",width:"100%",opacity:0,cursor:"pointer"},type:"file",accept:"image/*,.jpg,.png",onChange:this.onChange}):g.default.createElement("input",{style:{height:"100%",width:"100%",opacity:0,cursor:"pointer"},type:"file",accept:"image/*,.jpg,.png",onChange:this.onChange}))}},{key:"render",value:function(){var e=this,t={display:"none"};return g.default.createElement("div",{className:"ImpreseeLoadImageContainer"},this.renderOnlyCameraAsInput()?g.default.createElement("input",{type:"file",style:t,accept:"image/*,.jpg,.png",ref:function(t){e.inputFileRef=t},capture:!0,onChange:this.onChange}):g.default.createElement("input",{type:"file",style:t,accept:"image/*,.jpg,.png",ref:function(t){e.inputFileRef=t},onChange:this.onChange}),this.renderContent())}}]),r}(g.Component);us.propTypes={beforeLoadResults:F.a.func.isRequired,onSearchFailed:F.a.func.isRequired};var ls=Object(w.b)((function(e){return{loadedImage:e.loadedImage,modalSize:e.modalSize}}),{loadImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"LOAD_IMAGE",payload:e}},setStatus:mn,performSearch:xn,performDetection:Ln,loadLocalQueryImage:wn})(us),ps=r(41),ds=r.n(ps);r(152);function hs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var fs=function(e){D()(r,e);var t=hs(r);function r(e){var n;_()(this,r),(n=t.call(this,e)).classNames={modal:a.IMPRESEE_MODAL_CLASS,closeButton:a.CLOSE_BUTTON_CLASS,overlay:a.MODAL_OVERLAY_CLASS},n.close=n.close.bind(B()(n)),n.handleResize=n.handleResize.bind(B()(n)),n.onEnteredModal=n.onEnteredModal.bind(B()(n)),n.onExitedModal=n.onExitedModal.bind(B()(n)),n.beforeLoadResults=window._wssee[0].setup.beforeLoadResults||function(e){},n.onSearchFailed=window._wssee[0].setup.onSearchFailed||function(){};var s=window._wssee[0].setup.containerSelector;return n.modalContainer=null!==s?document.querySelector(s):null,n}return C()(r,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"onEnteredModal",value:function(){this.previousModalHtmlStyle=null,this.updateStyleHtml(),this.handleResize()}},{key:"onExitedModal",value:function(){if((null!==this.props.containerSelector?document.querySelector(this.props.containerSelector):null)&&this.props.statusResults!==n.SEARCHING_BY_AREA&&this.props.statusResults!==n.CROPPING_QUERY){var e=document.querySelector("html");e&&this.previousModalHtmlStyle&&(e.style=this.previousModalHtmlStyle)}}},{key:"handleResize",value:function(){var e=document.getElementById(a.IMPRESEE_MODAL_ID);null!==e&&this.props.changedModalSize(e.clientWidth,e.clientHeight)}},{key:"close",value:function(){this.props.setStatus(n.CLOSED)}},{key:"updateStyleHtml",value:function(){if(null!==this.props.containerSelector?document.querySelector(this.props.containerSelector):null){var e=document.querySelector("html");e&&!this.previousModalHtmlStyle&&(this.previousModalHtmlStyle=e.style,e.style.position="fixed",e.style.overflow="hidden",e.style.width="100%")}}},{key:"renderContent",value:function(){switch(this.classNames.closeButton=a.CLOSE_BUTTON_CLASS,this.props.status){case n.CROPPING:return g.default.createElement(ls,{beforeLoadResults:this.beforeLoadResults,onSearchFailed:this.onSearchFailed,isMobile:this.props.isMobile});case n.DRAWING:return g.default.createElement(Za,{beforeLoadResults:this.beforeLoadResults,onSearchFailed:this.onSearchFailed,isMobile:this.props.isMobile});case n.SEARCHING:return this.classNames.closeButton=a.CLOSE_BUTTON_CLASS_HIDDEN,g.default.createElement("div",{className:"ImpreseeLoadingScreen"},g.default.createElement("img",{src:ds.a,alt:"loading..."}));default:return""}}},{key:"render",value:function(){return g.default.createElement(Da,{modalId:a.IMPRESEE_MODAL_ID,classNames:this.classNames,open:this.props.status!==n.CLOSED,closeOnOverlayClick:!1,onClose:this.close,onExited:this.onExitedModal,onEntered:this.onEnteredModal,animationDuration:100,focusTrapped:!1},this.renderContent())}}]),r}(g.Component);var ms=Object(w.b)((function(e){return{status:e.status,statusResults:e.statusResults}}),{setStatus:mn,changedModalSize:gn})(fs),ys=r(25),vs=r.n(ys);r(45),r(153),r(154);function Ss(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var gs=function(e){D()(r,e);var t=Ss(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"render",value:function(){var e=this,t=window._wssee[0].texts.addToCart||"Add to cart",r=window._wssee[0].setup.onClickAddToCart||function(e){};return g.default.createElement("div",{className:"ImpreseeAddToCart",style:{backgroundColor:window._wssee[0].setup.mainColor||"#bababa"},onClick:function(t){t.stopPropagation(),t.preventDefault(),r(e.props.product)}},g.default.createElement("span",null,t))}}]),r}(g.Component),ws=function(e){return an(e.from_price||e.price_from,e.price)?"ImpreseePrice":"ImpreseePrice ImpreseeNoDiscount"},Es=function(e){var t,r=e.product,n=(e.mainColor,window._wssee[0].setup.useAddToCartButton||!1);return g.default.createElement("a",vs()({className:"ImpreseeSimpleProduct",href:r.productUrl,key:r.rank},cn(r)),an(r.from_price,r.price)&&(null===(t=window._wssee[0].setup.displayOnSaleProducts)||void 0===t||t)&&function(e){var t,r=Jr(e.from_price||e.price_from,e.price);if(!an(e.from_price||e.price_from,e.price)||0===r||null!==(t=window._wssee[0].setup.displayOnSaleProducts)&&void 0!==t&&!t)return"";var n=window._wssee[0].setup.parseDiscountFunction||function(e){return"".concat(e,"%")};return g.default.createElement("div",{className:"ImpreseeDiscountPercentage",style:{backgroundColor:window._wssee[0].setup.colorOnSale||"#FF0000"}},n(r))}(r),g.default.createElement("div",{className:"ImpreseeItem"},g.default.createElement("div",{className:"ImpreseeImageContainer"},g.default.createElement("img",{className:"ImpreseeItemImage",alt:r.imageUrl?r.title:"",src:r.imageUrl})),g.default.createElement("div",{className:"ImpreseeTexts"},r.title&&g.default.createElement("span",{className:"ImpreseeTitle"},r.title),g.default.createElement("div",{className:"ImpreseeGetProductContainer"},g.default.createElement("div",{className:"ImpreseeProductPrices"},r.price&&g.default.createElement("span",{className:ws(r)},en(r.price,!0,r)),r.from_price&&r.price&&Number(r.price)!==Number(r.from_price)&&Number(r.price)<Number(r.from_price)&&g.default.createElement("span",{className:"ImpreseeNormalPrice"},en(r.from_price,!1,r)),r.from_price&&r.price&&Number(r.price)!==Number(r.price_from)&&Number(r.price)<Number(r.price_from)&&g.default.createElement("span",{className:"ImpreseeNormalPrice"},en(r.price_from,!1,r))))),n&&g.default.createElement(gs,{product:r})))},Rs=r(85),bs=r.n(Rs);r(35);function _s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Is=function(e){D()(r,e);var t=_s(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"componentDidMount",value:function(){this.setQueryParams({ISearchType:[],ISearchCode:[]},!0)}},{key:"render",value:function(){return g.default.createElement("div",{className:"ImpreseeErrorScreen"},g.default.createElement("img",{src:bs.a,alt:"Angry robot"}),g.default.createElement("h3",null,window._wssee[0].texts.error||(window._wssee[0].texts.oops||"Oops...")+" We didn't expect this at all."),g.default.createElement("span",null,window._wssee[0].texts.errorDescription||"It seems our system is overheating, please try again later."))}}]),r}(U.a),Cs=r(86),Ts=r.n(Cs),Bs=(r(36),function(e){var t=e.numberResults,r=e.queryText,n=e.onClick;return g.default.createElement("div",{className:"ImpreseeSeeAll",onClick:function(){(window._wssee[0].searchByText.pressSeeAll||function(e){})(r),n(r)},style:{backgroundColor:window._wssee[0].setup.mainColor||"#bababa"}},g.default.createElement("span",null,"".concat(window._wssee[0].texts.seeAllResults||"See all results"," (").concat(t,")")),g.default.createElement("img",{src:Ts.a,alt:"arrow"}))});r(155);function As(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Ds=function(e){D()(r,e);var t=As(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"getBannerStyle",value:function(){return this.props.style}},{key:"getAElementStyle",value:function(){if(!this.props.promotedBanner.redirect_url)return{pointerEvents:"none"}}},{key:"render",value:function(){return g.default.createElement("a",{href:this.props.promotedBanner.redirect_url,style:this.getAElementStyle()},g.default.createElement("img",{src:this.props.promotedBanner.image_url,alt:this.props.promotedBanner.image_caption,title:this.props.promotedBanner.image_caption,className:"ImpreseePromotedBanner",style:this.getBannerStyle()}))}}]),r}(g.Component),Os=r(87),xs=r.n(Os),Ls=(r(37),function(e){var t=e.title,r=e.mainColor,n=e.searching,a=e.display;return null==a||a?g.default.createElement("div",{className:"ImpreseeSearchResultsTitleBar"},g.default.createElement("div",{style:{display:"flex"}},g.default.createElement("div",{className:"ImpreseeBar",style:{backgroundColor:r}}),g.default.createElement("span",null,t)),n&&g.default.createElement("img",{src:xs.a,alt:window._wssee[0].texts.searchButtonLabel||"Search"})):null}),Ps=r(88),ks=r.n(Ps);r(67);function Ns(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Ms=function(e){D()(r,e);var t=Ns(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).applicationUuid=c.photoApp,n.beforeLoadResults=window._wssee[0].setup.beforeLoadResults||function(e){},n.onSearchFailed=window._wssee[0].setup.onSearchFailed||function(){},n.searchBars=n.props.searchBars,n.searchSuggestion=n.searchSuggestion.bind(B()(n)),n.autocompleteSearchBar=n.autocompleteSearchBar.bind(B()(n)),n}return C()(r,[{key:"searchSuggestion",value:function(){this.changeSearchBarsText(""),this.props.fullSearch(this.props.suggestion.name),this.props.pressSeeAll(this.props.suggestion.name)}},{key:"autocompleteSearchBar",value:function(e){e.stopPropagation(),this.changeSearchBarsText(this.props.suggestion.name),this.props.instantSearch(this.props.suggestion.name),this.focusInputAtEnd(this.props.activeSearchBar)}},{key:"changeSearchBarsText",value:function(e){for(var t=0,r=Array.from(this.searchBars);t<r.length;t++){var n=r[t];n&&(n.value=e)}}},{key:"focusInputAtEnd",value:function(e){var t=e.value.length;if(document.selection){e.focus();var r=document.selection.createRange();r.moveStart("character",-t),r.moveStart("character",t),r.moveEnd("character",0),r.select()}else(e.selectionStart||"0"===e.selectionStart)&&(e.selectionStart=t,e.selectionEnd=t,e.focus())}},{key:"render",value:function(){return g.default.createElement("div",{className:"ImpreseeSearchSuggestion",onClick:this.searchSuggestion},g.default.createElement("span",{className:"ImpreseeSearchSuggestionName"},this.props.suggestion.name),this.props.isMobile&&g.default.createElement("img",{className:"ImpreseeSearchSuggestionImg",onClick:this.autocompleteSearchBar,src:ks.a,alt:"autocomplete"}))}}]),r}(g.Component);function Fs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Hs=function(e){D()(r,e);var t=Fs(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"componentDidMount",value:function(){var e=document.querySelector(".ImpreseeCompleteSearchBar input");e&&this.props.searchBars.push(e)}},{key:"displaySearchSuggestions",value:function(){var e=this;return Xn()(this.props.searchSuggestions).map((function(t){return e.displaySearchSuggestion(t)}))}},{key:"displaySearchSuggestion",value:function(e){return g.default.createElement(Ms,{suggestion:e,key:e.rank,instantSearch:this.props.instantSearch,fullSearch:this.props.fullSearch,searchBars:this.props.searchBars,activeSearchBar:this.props.activeSearchBar,pressSeeAll:function(e){var t=window._wssee[0].searchByText.pressSeeAll||function(e){};t(e)},isMobile:this.props.isMobile})}},{key:"render",value:function(){return g.default.createElement("div",{className:this.props.isMobile?"ImpreseeSuggestionsDivMobile":"ImpreseeSuggestionsDivDesktop"},!this.props.isMobile&&g.default.createElement("header",{className:"ImpreseeDropDownSectionHeader"},g.default.createElement(Ls,{mainColor:window._wssee[0].setup.mainColor||"#bababa",title:window._wssee[0].texts.searchSuggestions||"Popular searches",searching:!1})),this.props.searchSuggestions.length>0&&g.default.createElement("div",{className:this.props.isMobile?"ImpreseeSuggestionsContentMobile":"ImpreseeSuggestionsContentDesktop"},this.displaySearchSuggestions()))}}]),r}(g.Component);var Us=Object(w.b)((function(e){return{searchSuggestions:e.searchSuggestions,activeSearchBar:e.activeSearchBar}}),{searchByText:ea})(Hs),Gs=r(42),js=r.n(Gs);r(68);function qs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Qs=function(e){D()(r,e);var t=qs(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"getFromPrice",value:function(e){var t=Number(e.price),r=Number(e.price_from),n=Number(e.from_price);return!isNaN(t)&&!isNaN(r)&&r!==t&&r>t?en(e.price_from):!isNaN(t)&&!isNaN(n)&&n!==t&&n>t?en(e.from_price):""}},{key:"getInventoryQuantity",value:function(e){return e.quantity?e.quantity.textValue:""}},{key:"getStarStyle",value:function(){return this.props.top?{top:"2px",height:"20px",width:"20px"}:{bottom:"2px",height:"15px",width:"15px"}}},{key:"getCornerStyle",value:function(){return this.props.top?{borderWidth:"40px 0 0 40px",borderColor:(window._wssee[0].setup.mainColor||"#bababa")+" transparent transparent transparent",top:"0"}:{borderWidth:"0 0 30px 30px",borderColor:"transparent transparent "+(window._wssee[0].setup.mainColor||"#bababa")+" transparent",bottom:"0"}}},{key:"getPriceClass",value:function(e){return an(e.from_price||e.price_from,e.price)?"ImpreseePrice":"ImpreseePrice ImpreseeNoDiscount"}},{key:"render",value:function(){var e=this.props.product;return g.default.createElement("a",{href:e.productUrl,className:"ImpreseePromotedProductLink"},g.default.createElement("div",vs()({className:"ImpreseePromotedProduct",style:{height:this.props.height+"px",borderLeftColor:window._wssee[0].setup.mainColor||"#bababa",maxWidth:this.props.maxWidth+"px"},key:e.rank},cn(e)),g.default.createElement("div",{className:"ImpreseePromotedProductCorner",style:this.getCornerStyle()}),g.default.createElement("img",{src:js.a,alt:"",className:"ImpreseePromotedProductStar",style:this.getStarStyle()}),g.default.createElement("img",{src:e.imageUrl,alt:"",className:"ImpreseePromotedProductImage"}),g.default.createElement("div",{className:"ImpreseeTexts ImpreseePromotedProductTexts"},e.title&&g.default.createElement("span",{className:"ImpreseeTitle"},e.title),e.name&&g.default.createElement("span",{className:"ImpreseeTitle"},e.name),g.default.createElement("div",{className:"ImpreseeGetProductContainer",style:{margin:"0"}},g.default.createElement("div",{className:"ImpreseeProductPrices"},g.default.createElement("div",{className:"ImpreseeNormalPriceAndDiscount"},g.default.createElement("span",{className:"ImpreseeNormalPrice"},this.getFromPrice(e))),e.price&&g.default.createElement("span",{className:this.getPriceClass(e)},en(e.price,!0,e)))))))}}]),r}(g.Component);N()(Qs,"defaultProps",{top:!1,height:60,maxWidth:900});var zs=Qs;function Ys(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Ws=function(e){D()(r,e);var t=Ys(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"renderPromotedProductsGrid",value:function(){var e=this;return Xn()(this.props.promotedProducts).slice(0,window._wssee[0].setup.recommendedProductsToDisplay||2).map((function(t){return e.getPromotedProductCell(t)}))}},{key:"getPromotedProductCell",value:function(e){return g.default.createElement(zs,{product:e,key:e.rank,top:this.props.top,height:this.props.height,maxWidth:this.props.maxWidth})}},{key:"getGridStyle",value:function(){return this.props.horizontal?{gridTemplateColumns:"repeat(2, 50%)"}:{gridTemplateColumns:"repeat(1, 100%)"}}},{key:"render",value:function(){return g.default.createElement("div",{className:"ImpreseePromotedProducts"},this.props.showTitle&&g.default.createElement("div",{className:"ImpreseePromotedProductsTitle"},g.default.createElement("img",{src:js.a,height:"20",width:"20",alt:"",style:{margin:"0px"}}),g.default.createElement("span",{style:{marginLeft:"5px"}},window._wssee[0].texts.searchRecommendedProducts||"Recommended products")),g.default.createElement("div",{className:"ImpreseePromotedProductsGrid",style:this.getGridStyle()},this.renderPromotedProductsGrid()))}}]),r}(g.Component);N()(Ws,"defaultProps",{top:!0,showTitle:!0,horizontal:!0,height:50,maxWidth:900});var Vs=Object(w.b)(null,{})(Ws);function Xs(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ks(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ks(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function Ks(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Js(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Zs=function(e){D()(r,e);var t=Js(r);function r(e){var a;if(_()(this,r),(a=t.call(this,e)).searchByPhoto=a.searchByPhoto.bind(B()(a)),a.searchBySketch=a.searchBySketch.bind(B()(a)),a.search=a.props.search,a.instantSearch=a.props.instantSearch,a.onBeforeSearch=function(){window._wssee[0].searchByText.useFullAsInstant||a.props.setDropDownStatus(n.LOADING_DROP_DOWN_RESULTS),(window._wssee[0].setup.onBeforeSearch||function(){})()},a.style={position:"absolute",top:0,right:0,left:0,minHeight:"100vh"},a.responsive={mobile:{breakpoint:{max:464,min:0},items:2,partialVisibilityGutter:40}},window._wssee[0].searchByText.mobileSearchTriggerSelector){var s=document.querySelector(window._wssee[0].searchByText.mobileSearchTriggerSelector);s&&s.addEventListener("click",(function(){a.props.setDropDownStatus(n.DISPLAY_DROP_DOWN),a.props.instantSearch("")}))}return a}return C()(r,[{key:"componentDidUpdate",value:function(e){var t=this;if((e.textResults!==this.props.textResults||e.queryTextInstantSearch!==this.props.queryTextInstantSearch)&&this.props.dropDownStatus===n.DISPLAY_DROP_DOWN)if(this.props.numberResults>0){var r=window._wssee[0].setup.afterLoadResults||function(e,t){};window.setTimeout((function(){r(o.INSTANT_SEARCH,t.props.queryTextInstantSearch)}),50)}else if(this.props.numberResults<=0&&this.props.queryTextInstantSearch.length>0){var a=window._wssee[0].setup.onEmptyResults||function(e,t){};window.setTimeout((function(){a(o.INSTANT_SEARCH,t.props.queryTextInstantSearch)}),50)}e.dropDownStatus!==this.props.dropDownStatus&&this.props.dropDownStatus===n.DISPLAY_DROP_DOWN&&u.onOpenDropDownResults()}},{key:"getStyle",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$s(Object(r),!0).forEach((function(t){N()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.style);return this.props.dropDownStatus===n.CLOSED?e.display="none":e.display="flex",e}},{key:"searchByPhoto",value:function(){this.props.setStatus(n.CROPPING)}},{key:"searchBySketch",value:function(){this.props.setStatus(n.DRAWING)}},{key:"renderSearchSuggestions",value:function(){var e=this;if(u.useSearchSuggestions)return g.default.createElement(Us,{fullSearch:function(t){e.props.addSearchByTextQuery(t,!0)},instantSearch:function(t){e.instantSearch(t,!0)},searchBars:this.props.searchBars,isMobile:!0})}},{key:"renderBanner",value:function(){if(!un(this.props.promotedBannerDropdown))return g.default.createElement(Ds,{promotedBanner:this.props.promotedBannerDropdown})}},{key:"renderPromotedProducts",value:function(){return g.default.createElement("section",{className:"ImpreseeDropDownSection ImpreseeProductsContainer",style:{width:"100%"}},g.default.createElement(Vs,{promotedProducts:this.props.promotedProductsDropdown,top:!1,showTitle:!1,horizontal:!0,height:60,maxWidth:320}))}},{key:"renderProducts",value:function(e){var t,r=Xn()(this.props.textResults),a=[],s=1,o=Xs(r);try{for(o.s();!(t=o.n()).done;){var i=t.value;a.push({id:s,product:i}),s+=1}}catch(e){o.e(e)}finally{o.f()}return this.props.dropDownStatus===n.ERROR?g.default.createElement(Is,null):a.length<=0?nn(r,this.props.queryTextInstantSearch,this.props.dropDownStatus,this.searchByPhoto,this.searchBySketch):a.map((function(e){return g.default.createElement(Es,{key:e.id,product:e.product,mainColor:c.mainColor})}))}},{key:"render",value:function(){return g.default.createElement("div",{className:"ImpreseeDropDownContainer ImpreseeMobile",style:this.getStyle()},g.default.createElement("header",null,g.default.createElement(ia,{search:this.search,inputClassName:u.overlayInputClassName,searchByTextApp:this.props.searchByTextApp,searchBars:this.props.searchBars,addSearchByTextQuery:this.props.addSearchByTextQuery,onBeforeSearch:this.onBeforeSearch,instantSearch:this.instantSearch,isMobile:!0})),g.default.createElement("section",null,this.renderBanner(),this.renderSearchSuggestions(),this.renderPromotedProducts(),g.default.createElement("section",{className:"ImpreseeDropDownSection"},g.default.createElement("div",{className:"ImpreseeHorizontalScroll",style:{flexDirection:"column"}},g.default.createElement("div",{className:"".concat(window._wssee[0].searchByText.displayMobileDropdownAsGrid?"ImpreseeMobileInstantGrid":"ImpreseeMobileInstantScroll")},this.renderProducts(),this.props.dropDownStatus!==n.ERROR&&this.props.textSearchMetadataInstantSearch.totalProducts>0&&g.default.createElement("div",{className:"ImpreseeSimpleProduct"}))),this.props.textSearchMetadataInstantSearch.totalProducts>0&&g.default.createElement("div",{className:"ImpreseeBlur"})),this.props.textSearchMetadataInstantSearch.totalProducts>0&&g.default.createElement(Bs,{numberResults:this.props.numberResults,queryText:this.props.queryTextInstantSearch,onClick:this.props.addSearchByTextQuery})))}}]),r}(g.Component);var eo=Object(w.b)((function(e){return{textResults:e.textResults,dropDownStatus:e.dropDownStatus,numberResults:e.numberResults,queryTextInstantSearch:e.queryTextInstantSearch,textSearchMetadataInstantSearch:e.textSearchMetadataInstantSearch,promotedProductsDropdown:e.promotedProductsDropdown,promotedBannerDropdown:e.promotedBannerDropdown,textQueryId:e.textQueryId}}),{setDropDownStatus:vn,setStatus:mn,searchByText:ea})(Zs);function to(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?to(Object(r),!0).forEach((function(t){N()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):to(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function no(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ao(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ao(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function so(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var oo=function(e){D()(r,e);var t=so(r);function r(e){var n;if(_()(this,r),(n=t.call(this,e)).lastSearchBarTop=null,n.pageSize=u.instantSearchDesktopResults,n.createGeneralSearchBar=n.createGeneralSearchBar.bind(B()(n)),n.onFocusSearchBar=n.onFocusSearchBar.bind(B()(n)),n.handleClickOutside=n.handleClickOutside.bind(B()(n)),n.searchByPhoto=n.searchByPhoto.bind(B()(n)),n.searchBySketch=n.searchBySketch.bind(B()(n)),n.timeoutFunction=n.timeoutFunction.bind(B()(n)),n.schedulePositionUpdate=n.schedulePositionUpdate.bind(B()(n)),n.setDropDownPosition=n.setDropDownPosition.bind(B()(n)),n.openDropdownOnActiveSearchBar=n.openDropdownOnActiveSearchBar.bind(B()(n)),n.onBlurSearchBar=n.onBlurSearchBar.bind(B()(n)),n.setTicking=n.setTicking.bind(B()(n)),n.search=n.props.search,n.instantSearch=n.props.instantSearch,n.onClickSeeAll=n.onClickSeeAll.bind(B()(n)),n.top=0,n.ticking=!1,n.style={position:"absolute"},n.state={style:n.style},n.arrowStyle={height:"".concat(13,"px")},n.extraSearchButtonsArray=[],n.props.searchBars&&n.props.searchBars.length>0){for(var a=0,s=Array.from(n.props.searchBars);a<s.length;a++){s[a].value=""}n.searchBar=n.props.searchBars[0]}if(window._wssee[0].searchByText.extraPressSeeAllButton){var o=document.querySelectorAll(window._wssee[0].searchByText.extraPressSeeAllButton);n.extraSearchButtonsArray=Array.from(o)}return n}return C()(r,[{key:"componentDidMount",value:function(){this.createGeneralSearchBar(),document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentDidUpdate",value:function(e,t){var r=this;if((e.textResults!==this.props.textResults||e.queryTextInstantSearch!==this.props.queryTextInstantSearch)&&this.props.dropDownStatus===n.DISPLAY_DROP_DOWN)if(this.props.numberResults>0){var a=window._wssee[0].setup.afterLoadResults||function(e,t){};window.setTimeout((function(){a(o.INSTANT_SEARCH,r.props.queryTextInstantSearch)}),50)}else if(this.props.numberResults<=0&&this.props.queryTextInstantSearch.length>0){var s=window._wssee[0].setup.onEmptyResults||function(e,t){};window.setTimeout((function(){s(o.INSTANT_SEARCH,r.props.queryTextInstantSearch)}),50)}e.dropDownStatus!==this.props.dropDownStatus&&this.props.dropDownStatus===n.DISPLAY_DROP_DOWN&&(window._wssee[0].searchByText.onOpenDropDownResults||function(){})()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside),window.removeEventListener("scroll",this.schedulePositionUpdate),window._wssee[0].searchByText&&window._wssee[0].searchByText.onScrollElementSelector&&document.querySelector(window._wssee[0].searchByText.onScrollElementSelector).removeEventListener("scroll",this.schedulePositionUpdate)}},{key:"searchByPhoto",value:function(){this.props.setDropDownStatus(n.CLOSED),this.props.setStatus(n.CROPPING)}},{key:"searchBySketch",value:function(){this.props.setDropDownStatus(n.CLOSED),this.props.setStatus(n.DRAWING)}},{key:"onFocusSearchBar",value:function(e){var t=this;this.searchBar=e.target,this.props.setActiveSearchBar(e.target);var r=this.searchBar;setTimeout((function(){(document.activeElement===r||document.activeElement.contains(r)&&"FORM"===document.activeElement.tagName)&&(t.openDropdownOnActiveSearchBar(),t.timeoutFunction())}),300)}},{key:"openDropdownOnActiveSearchBar",value:function(){this.props.dropDownStatus===n.CLOSED&&this.instantSearch(this.searchBar.value),this.generalSearchBar.changeInput(this.searchBar)}},{key:"onClickSeeAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.addSearchByTextQuery(e,t),this.props.setDropDownStatus(n.CLOSED),this.searchBar.value="",this.generalSearchBar.inputLastValue=""}},{key:"createGeneralSearchBar",value:function(){var e=this;this.generalSearchBar=new Gr(this.searchBar,this.search,this.props.searchByTextApp,window._wssee[0].searchByText.useFullAsInstant?100:window._wssee[0].searchByText.searchDelayMilis||300,this.props.searchBars,this.onFocusSearchBar,this.props.cleanQueryText,(function(){return e.props.setDropDownStatus(n.ERROR)}),(function(){window._wssee[0].searchByText.useFullAsInstant||e.props.setDropDownStatus(n.LOADING_DROP_DOWN_RESULTS),(window._wssee[0].setup.onBeforeSearch||function(){})()}),this.onClickSeeAll,this.props.lazySearchBar,!0,(function(){})),this.generalSearchBar.setListeners();for(var t=function(){var t=a[r];if(document.activeElement===t||document.activeElement.contains(t)&&"FORM"===document.activeElement.tagName){var n=e.timeoutFunction,s=e.openDropdownOnActiveSearchBar;e.searchBar=t,window.setTimeout((function(){(document.activeElement===t||document.activeElement.contains(t)&&"FORM"===document.activeElement.tagName)&&(n(),s())}),250)}},r=0,a=Array.from(this.props.searchBars);r<a.length;r++)t()}},{key:"handleClickOutside",value:function(e){if(this.searchContainer&&!this.searchContainer.contains(e.target)&&this.searchBar&&!this.searchBar.contains(e.target)&&this.props.dropDownStatus!==n.CLOSED){var t,r=!0,a=no(this.extraSearchButtonsArray);try{for(a.s();!(t=a.n()).done;){t.value.contains(e.target)&&(r=!1)}}catch(e){a.e(e)}finally{a.f()}if(r)(window._wssee[0].searchByText.onCloseResults||function(e){})(o.INSTANT_SEARCH),this.props.setDropDownStatus(n.CLOSED)}}},{key:"onBlurSearchBar",value:function(e){var t=this,r=function(){t.props.setDropDownStatus(n.CLOSED)};r=r.bind(this),window.setTimeout((function(){(window._wssee[0].searchByText.onCloseResults||function(e){})(o.INSTANT_SEARCH),r()}),250)}},{key:"setDropDownPosition",value:function(){var e=this.searchBar.getBoundingClientRect(),t=Math.round(e.top),r=Math.max(document.documentElement.clientWidth,window.innerWidth),n=r/2,a=Math.max(document.documentElement.clientHeight,window.innerHeight),s=a/2,o=ro({},this.style),i=ro({},this.arrowStyle);e.left<n?(o.left="".concat(e.left+(window._wssee[0].searchByText.offsetDropdownLocation||0),"px"),o.right="unset",i.left="".concat(50-(window._wssee[0].searchByText.offsetDropdownLocation||0),"px"),i.right="unset"):(o.right="".concat(r-e.right,"px"),o.left="unset",i.right="".concat(50-(window._wssee[0].searchByText.offsetDropdownLocation||0),"px"),i.left="unset"),e.top<s?(o.top="".concat(e.y+e.height+document.documentElement.scrollTop+13,"px"),o.bottom="unset",i.top="-13px",i.bottom="unset",i.transform="rotate(0deg)"):(o.bottom="".concat(13+a-(null!==this.lastSearchBarTop&&t===this.lastSearchBarTop?-1:1)*document.documentElement.scrollTop-e.top,"px"),o.top="unset",i.top="unset",i.bottom="-13px",i.transform="rotate(180deg)"),this.style=o,this.setState({style:o}),this.arrowStyle=i,this.lastSearchBarTop=t}},{key:"setTicking",value:function(e){this.ticking=e}},{key:"schedulePositionUpdate",value:function(){if(window._wssee[0].searchByText&&window._wssee[0].searchByText.loseSearchBarFocusOnScroll){for(var e=0,t=Array.from(this.props.searchBars);e<t.length;e++){t[e].blur()}this.props.setDropDownStatus(n.CLOSED)}else{var r=this.setTicking,a=this.setDropDownPosition;this.ticking||(window.requestAnimationFrame((function(){a(),r(!1)})),r(!0))}}},{key:"timeoutFunction",value:function(){this.setDropDownPosition(),window.addEventListener("scroll",this.schedulePositionUpdate),window._wssee[0].searchByText&&window._wssee[0].searchByText.onScrollElementSelector&&document.querySelector(window._wssee[0].searchByText.onScrollElementSelector).addEventListener("scroll",this.schedulePositionUpdate),window._wssee[0].searchByText.useFullAsInstant||this.props.setDropDownStatus(n.DISPLAY_DROP_DOWN)}},{key:"renderBannerOrPromotedProducts",value:function(){return g.default.createElement(g.default.Fragment,null,!un(this.props.promotedBannerDropdown)&&this.renderBanner(),!un(this.props.promotedProductsDropdown)&&this.renderPromotedProducts())}},{key:"renderBanner",value:function(){return g.default.createElement(Ds,{promotedBanner:this.props.promotedBannerDropdown,style:{maxWidth:"680px"}})}},{key:"renderPromotedProducts",value:function(){return g.default.createElement("section",{className:"ImpreseeDropDownSection ImpreseeProductsContainer",style:{width:"100%"}},g.default.createElement(Vs,{promotedProducts:this.props.promotedProductsDropdown,top:!1,showTitle:!1,horizontal:!0,height:60,maxWidth:320}))}},{key:"renderSearchSuggestions",value:function(){var e,t=this;if(null===(e=window._wssee[0].searchByText.useSearchSuggestions)||void 0===e||e)return g.default.createElement(Us,{fullSearch:function(e){t.onClickSeeAll(e,!0)},instantSearch:function(e){t.instantSearch(e,!0)},searchBars:this.props.searchBars,isMobile:!1})}},{key:"renderHeader",value:function(){return g.default.createElement("header",{className:"ImpreseeDropDownSectionHeader"},g.default.createElement(Ls,{mainColor:window._wssee[0].setup.mainColor||"#bababa",title:this.searchBar.value?window._wssee[0].texts.searchResultsTitle||"Search results":window._wssee[0].texts.searchRecommendedProducts||"Recommended products",searching:this.props.dropDownStatus===n.LOADING_DROP_DOWN_RESULTS}))}},{key:"renderProducts",value:function(){var e=Xn()(this.props.textResults);return this.props.dropDownStatus===n.ERROR?g.default.createElement(Is,null):0===e.length?nn(e,this.searchBar.value,this.props.dropDownStatus,this.searchByPhoto,this.searchBySketch):g.default.createElement("div",{className:"ImpreseeSimpleProductGrid"},e.map((function(e){return g.default.createElement(Es,{key:e.rank,product:e,promoted:!1,mainColor:window._wssee[0].setup.mainColor||"#bababa"})})))}},{key:"renderVisualSearchBubbles",value:function(){var e,t;return g.default.createElement("div",{className:"ImpreseeDropDownVisualSearchBubbleContainer"},(null===(e=window._wssee[0].setup.useSearchByPhoto)||void 0===e||e)&&g.default.createElement("div",{className:"ImpreseePhotoSearchButtonContainer"},g.default.createElement("div",{onClick:this.searchByPhoto,className:"ImpreseeDropDownVisualSearchBubble"},g.default.createElement("img",{src:window._wssee[0].setup.searchByPhotoIconURL?window._wssee[0].setup.searchByPhotoIconURL:zr.a,alt:window._wssee[0].texts.searchByPhoto||"Search by image",className:"ImpreseeDropDownVisualSearchBubbleImg"})),g.default.createElement("div",{className:"ImpreseeLabelContainer ".concat(window._wssee[0].setup.addLabelsToDesktopDropdown?"":"ImpreseeLabelHidden")},g.default.createElement("div",{className:"ImpreseeInnerLabelContainer"},g.default.createElement("span",null,window._wssee[0].texts.searchByPhoto||"Search by image")))),(null===(t=window._wssee[0].setup.useSearchBySketch)||void 0===t||t)&&g.default.createElement("div",{className:"ImpreseeSketchSearchButtonContainer"},g.default.createElement("div",{onClick:this.searchBySketch,className:"ImpreseeDropDownVisualSearchBubble"},g.default.createElement("img",{src:window._wssee[0].setup.searchBySketchIconURL?window._wssee[0].setup.searchBySketchIconURL:qr.a,alt:window._wssee[0].texts.searchBySketch||"Search by drawing",className:"ImpreseeDropDownVisualSearchBubbleImg"})),g.default.createElement("div",{className:"ImpreseeLabelContainer ".concat(window._wssee[0].setup.addLabelsToDesktopDropdown?"":"ImpreseeLabelHidden")},g.default.createElement("div",{class:"ImpreseeInnerLabelContainer"},g.default.createElement("span",null,window._wssee[0].texts.searchBySketch||"Search by drawing")))))}},{key:"render",value:function(){var e=this,t=Xn()(this.props.textResults);return this.props.dropDownStatus===n.DISPLAY_DROP_DOWN||this.props.dropDownStatus===n.LOADING_DROP_DOWN_RESULTS||this.props.dropDownStatus===n.ERROR?g.default.createElement("div",{className:"ImpreseeDropDownContainer",style:this.state.style,ref:function(t){return e.searchContainer=t}},g.default.createElement("div",{className:"ImpreseeDropDownArrow",style:this.arrowStyle},g.default.createElement("div",{className:"ImpreseeDropDownArrowOuter"}),g.default.createElement("div",{className:"ImpreseeDropDownArrowInner"})),g.default.createElement("section",null,g.default.createElement("div",{className:"ImpreseeDropDownResultsDesktop"},g.default.createElement("div",{className:"ImpreseeDropDownResultsDesktopUpper"},this.renderBannerOrPromotedProducts()),g.default.createElement("div",{className:"ImpreseeDropDownResultsDesktopLower"},this.renderSearchSuggestions(),g.default.createElement("div",{className:"ImpreseeDropDownProductsDiv ".concat(this.searchBar.value?"":"ImpreseeRecommendedProductsContainer")},t.length>0&&this.renderHeader(),g.default.createElement("section",{className:"ImpreseeDropDownSection ImpreseeProductsContainer"},this.renderProducts())))),t.length>0&&this.props.textSearchMetadataInstantSearch.totalProducts>0&&g.default.createElement(Bs,{numberResults:this.props.numberResults,queryText:this.props.queryTextInstantSearch,onClick:this.onClickSeeAll}),t.length>0&&this.renderVisualSearchBubbles())):g.default.createElement("div",null)}}]),r}(g.Component);var io=Object(w.b)((function(e){return{textResults:e.textResults,dropDownStatus:e.dropDownStatus,numberResults:e.numberResults,textQueryId:e.textQueryId,queryTextInstantSearch:e.queryTextInstantSearch,textSearchMetadataInstantSearch:e.textSearchMetadataInstantSearch,promotedProductsDropdown:e.promotedProductsDropdown,promotedBannerDropdown:e.promotedBannerDropdown}}),{setDropDownStatus:vn,searchByText:ea,setStatus:mn,cleanQueryText:Rn,setActiveSearchBar:yn})(oo),co=r(22),uo=r.n(co);function lo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var po=function(e){D()(r,e);var t=lo(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).oldHtmlStyle="",n.close=n.close.bind(B()(n)),n.onCloseResults=window._wssee[0].setup.onCloseResults||function(){},n}return C()(r,[{key:"componentDidUpdate",value:function(){this.props.isEmbedded?this.modalContainer=null:this.modalContainer=null!==this.props.containerSelector?document.querySelector(this.props.containerSelector):null,this.updateStyleHtml()}},{key:"componentDidMount",value:function(){var e=document.querySelector("html");this.oldHtmlStyle||(this.oldHtmlStyle=e.style||{}),this.classNames={modal:"".concat(a.IMPRESEE_MODAL_CLASS," ").concat(this.props.isMobile?"ImpreseeMobile":""),closeButton:a.CLOSE_BUTTON_CLASS,overlay:a.MODAL_OVERLAY_CLASS},this.props.isEmbedded?this.modalContainer=null:(this.modalContainer=null!==this.props.containerSelector?document.querySelector(this.props.containerSelector):null,this.modalContainer&&(this.oldMinHeight=this.modalContainer.style.minHeight)),(null!==this.props.containerSelector?document.querySelector(this.props.containerSelector):null)&&this.props.isEmbedded&&(this.classNames.modal="".concat(a.IMPRESEE_MODAL_CLASS_EMBEDDED_RESULTS," ").concat(this.props.isMobile?"ImpreseeMobile":""),this.classNames.overlay=a.MODAL_OVERLAY_CLASS_EMBEDDED_RESULTS)}},{key:"getModalStyle",value:function(){var e={},t=null!==this.props.containerSelector?document.querySelector(this.props.containerSelector):null;if(t&&this.props.isEmbedded){var r=t.offsetTop,a=this.props.resultsHeight;e.overlay={top:r,minHeight:this.props.statusResults===n.ERROR?"auto":a,overflow:"visible"},e.modal={top:r},this.modalContainer.style.minHeight=this.props.statusResults===n.ERROR?"auto":a+400+"px"}return e}},{key:"close",value:function(){null!==this.props.containerSelector&&zn()(document.querySelectorAll(".ImpreseeHide")).map((function(e){return e.classList.remove("ImpreseeHide")}));this.modalContainer&&this.oldMinHeight?this.modalContainer.style.minHeight=this.oldMinHeight:this.modalContainer&&!this.oldMinHeight&&this.modalContainer.style.removeProperty("min-height"),this.onCloseResults()}},{key:"updateStyleHtml",value:function(){if(null!==this.props.containerSelector?document.querySelector(this.props.containerSelector):null){var e=document.querySelector("html");e&&this.props.statusResults!==n.SEARCHING_BY_AREA&&this.props.statusResults!==n.CROPPING_QUERY?(e.style.position="relative",e.style.overflow="inherit",e.style.width="auto"):!e||this.props.statusResults!==n.SEARCHING_BY_AREA&&this.props.statusResults!==n.CROPPING_QUERY||(e.style.position="fixed",e.style.width="100%")}}},{key:"onOpenModal",value:function(){}},{key:"renderContent",value:function(){}},{key:"render",value:function(){return this.props.visible?g.default.createElement(Da,{modalId:this.modalId,classNames:this.classNames,open:this.props.isOpen,closeOnOverlayClick:!1,onClose:this.close,styles:this.getModalStyle(),onEntered:this.onOpenModal},this.renderContent()):""}}]),r}(g.Component);function ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var fo=function(e){D()(r,e);var t=ho(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"getFromPrice",value:function(e){var t=Number(e.price),r=Number(e.price_from),n=Number(e.from_price);return!isNaN(t)&&!isNaN(r)&&r!==t&&r>t?en(e.price_from,!1,e):!isNaN(t)&&!isNaN(n)&&n!==t&&n>t?en(e.from_price,!1,e):""}},{key:"getDiscount",value:function(e){var t,r=Jr(e.from_price||e.price_from,e.price);if(!an(e.from_price||e.price_from,e.price)||0===r||null!==(t=window._wssee[0].setup.displayOnSaleProducts)&&void 0!==t&&!t)return"";var n=window._wssee[0].setup.parseDiscountFunction||function(e){return"".concat(e,"%")};return g.default.createElement("div",{className:"ImpreseeDiscountPercentage",style:{backgroundColor:window._wssee[0].setup.colorOnSale||"#FF0000"}},n(r))}},{key:"getOnSaleSign",value:function(e){var t;return!an(e.from_price||e.price_from,e.price)||null!==(t=window._wssee[0].setup.displayOnSaleProducts)&&void 0!==t&&!t?"":g.default.createElement("div",{className:"ImpreseeOnSaleSign",style:{borderTopColor:window._wssee[0].setup.colorOnSale||"#FF0000"}},g.default.createElement("span",{style:{backgroundColor:window._wssee[0].setup.colorOnSale||"#FF0000"}},window._wssee[0].texts.onSale||"On sale"))}},{key:"getInventoryQuantity",value:function(e){return e.quantity?e.quantity.textValue:""}},{key:"getPriceClass",value:function(e){return an(e.from_price||e.price_from,e.price)?"ImpreseePrice":"ImpreseePrice ImpreseeNoDiscount"}},{key:"productContent",value:function(e){var t=window._wssee[0].setup.useAddToCartButton||!1;return g.default.createElement(g.default.Fragment,null,this.getOnSaleSign(e),g.default.createElement("div",{className:"ImpreseeItem"},g.default.createElement("div",{className:"ImpreseeImageContainer"},g.default.createElement("div",null,g.default.createElement("img",{className:"ImpreseeItemImage",alt:e.imageUrl?e.title:"",src:e.imageUrl}))),g.default.createElement("div",{className:"ImpreseeTexts",style:{paddingBottom:t?"10px":"7%"}},e.title&&g.default.createElement("span",{className:"ImpreseeTitle"},e.title),e.name&&g.default.createElement("span",{className:"ImpreseeTitle"},e.name),g.default.createElement("div",{className:"ImpreseeGetProductContainer"},g.default.createElement("div",{className:"ImpreseeProductPrices"},g.default.createElement("div",{className:"ImpreseeNormalPriceAndDiscount"},g.default.createElement("span",{className:"ImpreseeNormalPrice"},this.getFromPrice(e)),this.getDiscount(e)),e.price&&g.default.createElement("span",{className:this.getPriceClass(e)},en(e.price,!0,e))))),t&&g.default.createElement(gs,{product:e})))}},{key:"render",value:function(){var e,t=this.props.product;return null===(e=window._wssee[0].setup.useClickableProducts)||void 0===e||e?g.default.createElement("a",vs()({className:"ImpreseeProductLink ImpreseeProduct",href:t.productUrl,key:t.rank},cn(t)),this.productContent(t)):g.default.createElement("div",vs()({className:"ImpreseeProductLink ImpreseeProduct",key:t.rank},cn(t)),this.productContent(t))}}]),r}(g.Component);r(157);function mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var yo=function(e){D()(r,e);var t=mo(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).margins=100,n.mainColor=window._wssee[0].setup.mainColor||"#bababa",n.lastHeight=-1,n}return C()(r,[{key:"componentDidMount",value:function(){Xn()(this.props.results).length>0?(this.updateMargin(),this.props.updateResultsHeight(this.gridRef.scrollHeight+this.margins),setTimeout(this.props.afterLoadResults,1)):setTimeout(this.props.onEmptyResults,1)}},{key:"componentDidUpdate",value:function(e,t,r){e.results!==this.props.results&&(Xn()(this.props.results).length>0?(this.updateMargin(),this.props.updateResultsHeight(this.gridRef.scrollHeight+this.margins),setTimeout(this.props.afterLoadResults,1)):setTimeout(this.props.onEmptyResults,1))}},{key:"updateMargin",value:function(){if(this.props.isMobile){var e=document.querySelector(".ImpreseeQuery");e&&(this.margins=80+e.clientHeight)}}},{key:"renderContent",value:function(){var e=this;return Xn()(this.props.results).map((function(t){return e.getProductCell(t)}))}},{key:"getDisplayFormatClass",value:function(){return this.props.displayResultsFormat===n.DISPLAY_FORMAT_GRID?"ImpreseeGrid":this.props.displayResultsFormat===n.DISPLAY_FORMAT_LIST?"ImpreseeList":void 0}},{key:"getProductCell",value:function(e){return g.default.createElement(fo,{key:"product: ".concat(e.rank),product:e})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{ref:function(t){return e.gridRef=t},className:this.getDisplayFormatClass()},this.renderContent())}}]),r}(g.Component);yo.propTypes={afterLoadResults:F.a.func.isRequired};var vo=Object(w.b)((function(e){return{displayResultsFormat:e.displayResultsFormat}}),{updateResultsHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return{type:"UPDATE_RESULTS_HEIGHT",payload:e}}})(yo),So=r(89),go=r.n(So),wo=r(43),Eo=r.n(wo),Ro=(r(32),function(e){e.onClickClear;var t=e.title;return g.default.createElement("div",{className:"ImpreseeFilterHeader"},g.default.createElement("div",{className:"ImpreseeBar",style:{backgroundColor:window._wssee[0].setup.mainColor||"#bababa"}}),g.default.createElement("span",null,t),g.default.createElement("div",{className:"ImpreseeArrowDown"}))});function bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var _o=function(e,t){var r={},n=t.values;return Wn()(Xn()(e.values),(function(e){r[e.code]=n[e.code]||!1})),r},Io=function(e,t,r,n){return g.default.createElement(Ro,{title:e.title,onClickClear:function(){return function(e,t,r){var n={};Wn()(e,(function(e,t){n[t]=!1})),t(n),r(n)}(t,r,n)}})},Co=function(e){var t,r,n=e.filter,a=e.selectedFilterData,s=e.onChangeFilters,o=e.isActive,i=Object(g.useState)(o),c=Fr()(i,2),u=c[0],l=c[1],p=_o(n,a),d=Object(g.useState)(p),h=Fr()(d,2),f=h[0],m=h[1],y=(null===(t=window._wssee[0].setup)||void 0===t?void 0:t.filtersWithScroll)||!1,v=(null===(r=window._wssee[0].setup)||void 0===r?void 0:r.isFilterVisible)||function(e,t,r){return!0};return Object(g.useEffect)((function(){var e=_o(n,a);m(e)}),[a,n]),g.default.createElement(Eo.a,{classParentString:"ImpreseeCollapsible",style:{position:"relative"},handleTriggerClick:function(){l(!u)},trigger:Io(n,f,m,s),open:u,contentInnerClassName:"Collapsible__contentInner_values ".concat(y&&"ScrollFilter")},Wn()(Xn()(n.values),(function(e){var t;return e.code&&e.code in f&&v(n.code,e.valueTitle,e.code)?g.default.createElement("p",{key:"".concat(e.valueTitle,"-").concat(e.code)},g.default.createElement("input",{type:"checkbox",id:"".concat(e.valueTitle,"-").concat(e.code),"data-code":e.code,name:"".concat(e.valueTitle,"-").concat(e.code),value:f[e.code],checked:f[e.code],onChange:function(t){var r=t.target.checked,n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(r),!0).forEach((function(t){N()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},f);n[e.code]=r,m(n),s(n)}}),g.default.createElement("label",{htmlFor:e.code},g.default.createElement("span",null,e.valueTitle),null===(t=window._wssee[0].searchByText.showQtyInFilters)||void 0===t||t?" (".concat(e.numberMatches,")"):"")):""})),g.default.createElement("div",{className:"ImpreseeBlur",style:{marginTop:"10px",height:"10px",top:"auto",bottom:0,width:"100%",left:0}}))},To=r(104),Bo=(r(170),function(e){var t,r,n={};return t=tn(e.rangeStart),r=tn(e.rangeEnd),n[e.rangeStart]={style:{},label:t},n[e.rangeEnd]={style:{},label:r},n}),Ao=function(e,t){return t?[t.rangeStart,t.rangeEnd]:[e.rangeStart,e.rangeEnd]},Do=function(e,t,r,n,a,s,o){r[0].length>0&&Number(r[0])===Number.NaN&&(r[0]=o[0]),r[1].length>0&&Number(r[1])===Number.NaN&&(r[1]=o[1]),a(r),e&&window.clearTimeout(e),Number(r[0])<o[0]||Number(r[1])<o[0]||(r[0]=Number(r[0]),r[1]=Number(r[1]),t(window.setTimeout((function(){n(r),s(r)}),800)))},Oo=function(e,t,r,n){return g.default.createElement(Ro,{title:e.title,onClickClear:function(){return function(e,t,r,n){var a=[e.rangeStart,e.rangeEnd];t(a),r(a),n(a)}(e,t,r,n)}})},xo=function(e){var t=e.filter,r=e.selectedFilterData,n=e.onChangeRange,a=e.isActive,s=Object(g.useState)(a),o=Fr()(s,2),i=o[0],c=o[1],u=Ao(t,r),l=Object(g.useState)(u),p=Fr()(l,2),d=p[0],h=p[1],f=Object(g.useState)(u),m=Fr()(f,2),y=m[0],v=m[1],S=Object(g.useState)(0),w=Fr()(S,2),E=w[0],R=w[1],b=Object(g.useState)(0),_=Fr()(b,2),I=_[0],C=_[1];return Object(g.useEffect)((function(){var e=Ao(t,r);h(e),v(e)}),[r,t]),g.default.createElement(Eo.a,{classParentString:"ImpreseeCollapsible",trigger:Oo(t,v,h,n),handleTriggerClick:function(){c(!i)},open:i},g.default.createElement("div",{className:"ImpreseeRangesInInputRow"},g.default.createElement("input",{type:"text",value:d[0],onChange:function(e){var t=[e.target.value,d[1]];Do(E,R,t,v,h,n,u)}}),g.default.createElement("span",{style:{fontWeight:"bold"}},"-"),g.default.createElement("input",{type:"text",value:d[1],onChange:function(e){var t=e.target.value,r=[d[0],t];Do(I,C,r,v,h,n,u)}})),g.default.createElement("div",{className:"ImpreseeSliderContainer"},g.default.createElement(To.a,{handleStyle:[{borderColor:window._wssee[0].setup.mainColor||"#bababa"},{borderColor:window._wssee[0].setup.mainColor||"#bababa"}],railStyle:{backgroundColor:"#666",height:"3px"},dotStyle:{borderColor:"#666"},trackStyle:[{backgroundColor:window._wssee[0].setup.mainColor||"#bababa",height:"3px"},{backgroundColor:window._wssee[0].setup.mainColor||"#bababa",height:"3px"}],defaultValue:u,value:y,min:t.rangeStart,max:t.rangeEnd,allowCross:!1,onChange:function(e){v(e),h(e)},onAfterChange:function(e){v(e),h(e),n(e)},marks:Bo(t)})))},Lo=(r(171),function(e){var t=e.children,r=e.open,n=e.onClose,a=e.style;return g.default.createElement("div",null,g.default.createElement("div",{className:"ImpreseeSideSheetOverlay ".concat(r?"visible":""),onClick:n}),g.default.createElement("div",{style:a,className:"ImpreseeSideSheet ".concat(r?"opened":"closed")},t))});r(23);function Po(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ko(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Po(Object(r),!0).forEach((function(t){N()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Po(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function No(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Mo=function(e){D()(r,e);var t=No(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"addToHistory",value:function(e){var t,r=Xr(),n=(t=JSON.stringify(e),window.btoa(unescape(encodeURIComponent(t))));window.history.replaceState({page:0,filters:n,reorderBy:r.reorderBy},document.title,Kr(0,n,r.reorderBy))}},{key:"filterByValues",value:function(e,t){var r=ko({},this.props.selectedFilters);r[e]={type:o.VALUE_FILTER,values:t,code:e},this.addToHistory(r),this.props.search(r)}},{key:"filterByRange",value:function(e,t){var r=ko({},this.props.selectedFilters);r[e]={type:o.RANGE_FILTER,active:!0,rangeStart:t[0],rangeEnd:t[1],code:e},this.addToHistory(r),this.props.search(r)}},{key:"renderContent",value:function(){var e,t=this,r=window._wssee[0].setup||{},n=r.afterApplyFilters||function(e,t){},a=null===(e=r.startFilterOpen)||void 0===e||e;return go()(this.props.filterOptions)?[]:Wn()(Xn()(this.props.filterOptions),(function(e){return e.type===o.VALUE_FILTER?g.default.createElement("div",{"data-key":e.code,key:e.code},g.default.createElement(Co,{filter:e,onChangeFilters:function(r){t.filterByValues(e.code,r),n(e.code,r)},isActive:!t.props.isMobile&&a||t.props.selectedFilters[e.code]&&t.props.selectedFilters[e.code].active,selectedFilterData:t.props.selectedFilters[e.code]||null})):e.type===o.RANGE_FILTER?g.default.createElement("div",{"data-key":e.code,key:e.code},g.default.createElement(xo,{filter:e,onChangeRange:function(r){t.filterByRange(e.code,r),n(e.code,r)},selectedFilterData:t.props.selectedFilters[e.code]||null,isActive:!t.props.isMobile||t.props.selectedFilters[e.code]&&t.props.selectedFilters[e.code].active})):void 0}))}},{key:"getTitleForMobile",value:function(){return g.default.createElement("div",{className:"ImpreseeFilterTitleMobile"},g.default.createElement("div",{className:"ImpreseeCircle",style:{backgroundColor:window._wssee[0].setup.mainColor||"#bababa"}},this.props.numberActiveFilters),"".concat(window._wssee[0].texts.filtersTitle||"Filters",":"))}},{key:"render",value:function(){if(this.props.isMobile){var e=[(r="0x"+(r=(window._wssee[0].setup.mainColor||"#bababa").replace("#","")))>>16&255,r>>8&255,255&r],t=(window._wssee[0].texts.numberResultsTitle||"Displaying {1} results").split("{1}");return g.default.createElement("div",{className:"ImpreseeMobileFilters"},g.default.createElement(Lo,{open:this.props.sideSheetOpen,onClose:this.props.onCloseSideSheet,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"}},g.default.createElement("div",{style:{height:"calc(100% - 50px)"}},g.default.createElement("h2",null,this.getTitleForMobile()),this.props.textSearchMetadata.totalProducts>0&&g.default.createElement("span",null,t[0]," ",g.default.createElement("span",{style:{fontWeight:"bold"}},this.props.textSearchMetadata.totalProducts)," ",t[1]),g.default.createElement("div",{style:{maxHeight:"81%",overflowY:"scroll"}},this.renderContent()),g.default.createElement("div",{className:"ImpreseeBlur",style:{height:"75px",top:"auto",bottom:"50px",width:"100%",left:"10px"}})),g.default.createElement("div",{className:"ImpreseeMobileFilterButtonContainer"},g.default.createElement(La,{isMobile:this.props.isMobile}),g.default.createElement("div",{style:{flex:"1 50px",marginTop:"5px",height:"50px"}},g.default.createElement("button",{onClick:this.props.onResetFilters,style:{backgroundColor:"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat("0.3",")"),color:window._wssee[0].setup.mainColor||"#bababa"}},(window._wssee[0].texts.clearFilters||"Clear filters").toUpperCase()),g.default.createElement("button",{onClick:this.props.onCloseSideSheet,style:{color:"white",backgroundColor:window._wssee[0].setup.mainColor||"#bababa"}},(window._wssee[0].texts.applyFilters||"Apply").toUpperCase())))))}return g.default.createElement("div",{className:"ImpreseeFiltersColumn"},g.default.createElement("div",{className:"ImpreseeClearFilters"},g.default.createElement("span",{style:{color:window._wssee[0].setup.mainColor||"#bababa"},onClick:this.props.onResetFilters},window._wssee[0].texts.clearFilters||"Clear filters")),this.renderContent(),g.default.createElement(La,{isMobile:this.props.isMobile}));var r}}]),r}(g.Component);var Fo=Object(w.b)((function(e){return{queryText:e.queryText,sortResultsOptions:e.sortResultsOptions,resultsSortedBy:e.resultsSortedBy,filterOptions:e.filterOptions,selectedFilters:e.selectedFilters,pageSizeText:e.pageSizeText,textSearchMetadata:e.textSearchMetadata}}),{searchByText:ea,setFullSearchResultsStatus:Sn})(Mo),Ho=r(90),Uo=r.n(Ho),Go=r(49),jo=r.n(Go);function qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Qo={height:"20px",margin:"30px"},zo=function(e){D()(r,e);var t=qo(r);function r(e){var n;_()(this,r),n=t.call(this,e);var a=Xr();return n.state={page:parseInt(a.page)},n.changePage=n.changePage.bind(B()(n)),n}return C()(r,[{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect()}},{key:"handleObserver",value:function(e,t){var r=e[0].boundingClientRect.y;this.state.prevY>r&&this.state.page<this.props.textSearchMetadata.totalPages-1&&(this.changePage({selected:this.state.page+1}),this.setState({page:this.state.page+1})),this.setState({prevY:r})}},{key:"componentDidMount",value:function(){if($r()){this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef)}}},{key:"changePage",value:function(e){var t=Xr();this.props.search(this.props.selectedFilters,e.selected,o.SEARCH_BY_PAGE_CHANGE);var r=document.querySelector("#".concat(a.IMPRESEE_MODAL_ID_TEXT_RESULTS," .ImpreseeResults"));window.history.pushState({page:e.selected,filters:t.filterBase64,reorderBy:t.reorderBy},"".concat(document.title," | page ").concat(e.selected),Kr(e.selected,t.filterBase64,t.reorderBy)),r&&!$r()&&r.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){var e=this,t=$r();return g.default.createElement("div",null,t&&g.default.createElement("div",{ref:function(t){return e.loadingRef=t},style:Qo}),!t&&g.default.createElement(Uo.a,{breakLabel:"...",breakClassName:"break-me",pageCount:this.props.textSearchMetadata.totalPages,pageClassName:"ImpreseePage",marginPagesDisplayed:this.props.marginPages,pageRangeDisplayed:this.props.pagesDisplayed,forcePage:this.props.currentPageText,disableInitialCallback:!0,containerClassName:"ImpreseePagination",previousClassName:"ImpreseePreviousPage",nextClassName:"ImpreseeNextPage",onPageChange:this.changePage,initialPage:this.props.currentPageText,previousLabel:g.default.createElement("img",{src:jo.a,alt:"previous"}),nextLabel:g.default.createElement("img",{src:jo.a,alt:"next"})}))}}]),r}(g.Component);var Yo=Object(w.b)((function(e){return{textSearchMetadata:e.textSearchMetadata,currentPageText:e.currentPageText,selectedFilters:e.selectedFilters}}),{})(zo),Wo=r(91),Vo=r.n(Wo),Xo=r(92),Ko=r.n(Xo);function $o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Jo=function(e){D()(r,e);var t=$o(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:"ImpreseeChangeDisplayFormatContainer"},g.default.createElement("button",{className:"ImpreseeChangeDisplayFormatButton \n               ".concat(this.props.displayResultsFormat===n.DISPLAY_FORMAT_GRID?"ImpreseeActive":""),onClick:function(){return e.props.changeDisplayFormat(n.DISPLAY_FORMAT_GRID)}},g.default.createElement("img",{src:Ko.a,alt:n.DISPLAY_FORMAT_GRID})),g.default.createElement("div",{className:"ImpreseeVerticalLine"}),g.default.createElement("button",{className:"ImpreseeChangeDisplayFormatButton \n               ".concat(this.props.displayResultsFormat===n.DISPLAY_FORMAT_LIST?"ImpreseeActive":""),onClick:function(){return e.props.changeDisplayFormat(n.DISPLAY_FORMAT_LIST)}},g.default.createElement("img",{src:Vo.a,alt:n.DISPLAY_FORMAT_LIST})))}}]),r}(g.Component);var Zo=Object(w.b)((function(e){return{displayResultsFormat:e.displayResultsFormat}}),{changeDisplayFormat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"CHANGE_DISPLAY_FORMAT",payload:e}}})(Jo),ei=r(38),ti=r.n(ei),ri=r(93),ni=r.n(ri);function ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var si=function(e){D()(r,e);var t=ai(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).changeSortOption=n.changeSortOption.bind(B()(n)),n}return C()(r,[{key:"changeSortOption",value:function(e){this.props.setReorderBy(e.value);var t=Xr();window.history.replaceState({page:t.page,filters:t.filterBase64,reorderBy:e.value},document.title,Kr(t.page,t.filterBase64,e.value)),this.props.reorder(e.value)}},{key:"render",value:function(){var e=this;return ti()(this.props.sortResultsOptions).length<=0?"":g.default.createElement("div",{className:"ImpreseeSortByContainer",style:{color:"".concat(window._wssee[0].setup.mainColor||"#bababa")}},g.default.createElement("span",null,window._wssee[0].texts.sortBy||"Sort by"),this.props.resultsSortedBy&&g.default.createElement("div",{className:"ImpreseeSelectContainer"},g.default.createElement(ni.a,{style:{color:window._wssee[0].setup.mainColor||"#bababa"},value:this.props.resultsSortedBy,optionClassName:"needsclick",className:"ImpreseeSortBySelect",search:!1,onChange:this.changeSortOption,options:Wn()(ti()(this.props.sortResultsOptions),(function(t){return{value:t,name:e.props.sortResultsOptions[t].title}}))}),g.default.createElement("div",{className:"ImpreseeArrowDown",style:{cursor:"pointer",position:"absolute",right:"-20px",top:"50%",borderTopColor:window._wssee[0].setup.mainColor||"#bababa"}})))}}]),r}(g.Component);var oi=Object(w.b)((function(e){return{resultsSortedBy:e.resultsSortedBy,sortResultsOptions:e.sortResultsOptions}}),{setReorderBy:function(e){return{type:"SET_REORDER_VALUE",payload:e}}})(si);function ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var ci=function(e){D()(r,e);var t=ii(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"getTitleForDesktop",value:function(){var e=(window._wssee[0].texts.numberResultsTitle||"Displaying {1} results").split("{1}");return this.props.textSearchMetadata.totalProducts>0?g.default.createElement("div",{className:"ImpreseeTextSearchTitle"},g.default.createElement("h1",null,window._wssee[0].texts.resultsTitleforTextSearch||"Search results for",' "',g.default.createElement("span",{style:{fontWeight:"bold"}},this.props.queryText),'"'),g.default.createElement("div",null,e[0],g.default.createElement("span",{className:"ImpreseeNumberOfResults"},this.props.textSearchMetadata.totalProducts),e[1])):null}},{key:"getTitleForMobile",value:function(){var e=(window._wssee[0].texts.resultsTitleForMobile||'Displaying {1} results for "{2}"').split("{1}");return this.props.textSearchMetadata.totalProducts>0?g.default.createElement("div",{className:"ImpreseeTextSearchTitle"},g.default.createElement("div",null,e[0],g.default.createElement("span",{className:"ImpreseeNumberOfResults"},this.props.textSearchMetadata.totalProducts),e[1].replace("{2}",this.props.queryText))):null}},{key:"render",value:function(){return this.props.isMobile?this.getTitleForMobile():this.getTitleForDesktop()}}]),r}(g.Component);var ui=Object(w.b)((function(e){return{textSearchMetadata:e.textSearchMetadata,queryText:e.queryText}}),{})(ci),li=r(94),pi=r.n(li);r(177);function di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var hi=function(e){D()(r,e);var t=di(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).pagesDisplayed=e.isMobile?1:2,n.marginPages=e.isMobile?2:1,n}return C()(r,[{key:"renderBannerOrPromotedProducts",value:function(){return g.default.createElement(g.default.Fragment,null,!un(this.props.promotedBanner)&&this.renderBanner(),!un(this.props.promotedProducts)&&this.renderPromotedProducts())}},{key:"renderBanner",value:function(){return g.default.createElement(Ds,{promotedBanner:this.props.promotedBanner})}},{key:"renderPromotedProducts",value:function(){return g.default.createElement(Vs,{promotedProducts:this.props.promotedProducts,top:!this.props.isMobile,showTitle:!0,horizontal:!this.props.isMobile,height:this.props.isMobile?60:80})}},{key:"render",value:function(){var e=this;return this.props.textSearchMetadata.totalProducts<=0||!this.props.textSearchMetadata.totalProducts?"":g.default.createElement("header",{className:"ImpreseeTextSearchResultsHeader"},g.default.createElement(ui,{isMobile:this.props.isMobile}),this.renderBannerOrPromotedProducts(),g.default.createElement("div",{className:"ImpreseeFiltersContainer"},g.default.createElement(oi,{reorder:function(t){return e.props.search(e.props.selectedFilters,0,o.SEARCH_BY_REORDER,t)}}),g.default.createElement("div",{className:"ImpreseeFilterAndDisplayContainer"},g.default.createElement("button",{className:"ImpreseeMobileFiltersButton",onClick:this.props.openMobileFilters},g.default.createElement("img",{src:pi.a,alt:window._wssee[0].texts.filtersTitle||"Filters"}),this.props.numberActiveFilters>0&&g.default.createElement("div",{className:"ImpreseeSmallCircle",style:{backgroundColor:window._wssee[0].setup.mainColor||"#bababa",position:"absolute",top:"5px",left:"30px"}},this.props.numberActiveFilters),g.default.createElement("span",{style:{fontWeight:"normal",color:"black",fontSize:"1.1em"}},window._wssee[0].texts.filtersTitle||"Filters")),g.default.createElement("div",{style:{display:"flex",alignItems:"center"}},!this.props.isMobile&&this.props.textSearchMetadata.totalProducts>0&&!$r()&&g.default.createElement(Yo,{search:this.props.search,pagesDisplayed:this.pagesDisplayed,marginPages:this.marginPages}),this.props.textSearchMetadata.totalProducts>0&&g.default.createElement(Zo,null)))))}}]),r}(g.Component);var fi=Object(w.b)((function(e){return{textSearchMetadata:e.textSearchMetadata,selectedFilters:e.selectedFilters,promotedProducts:e.promotedProducts,promotedBanner:e.promotedBanner}}),{})(hi),mi=r(95),yi=r.n(mi);function vi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Si=function(e){D()(r,e);var t=vi(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).modalId=a.IMPRESEE_MODAL_ID_TEXT_RESULTS,n.search=n.search.bind(B()(n)),n.onChangeInput=n.onChangeInput.bind(B()(n)),n.onEnter=n.onEnter.bind(B()(n)),n.close=n.close.bind(B()(n)),n.openSideSheet=n.openSideSheet.bind(B()(n)),n.closeSideSheet=n.closeSideSheet.bind(B()(n)),n.onOpenModal=n.onOpenModal.bind(B()(n)),n.instantSearchInFullResults=n.instantSearchInFullResults.bind(B()(n)),n.extraMillisInstant=400,n.searchWithFilters=n.searchWithFilters.bind(B()(n)),n.setListeners=n.setListeners.bind(B()(n)),n.state={sideSheetOpen:!1,searchType:o.SEARCH_BY_TEXT},n.setStateValue=!1,n.state={inputValue:""},n.onCloseResults=function(){(window._wssee[0].searchByText.onCloseResults||function(e){})(o.SEARCH_BY_TEXT)},n.setInputListener=!1,n.oldHtmlPosition="",n.fullSearchQuery="",n}return C()(r,[{key:"onLoadWithPage",value:function(){}},{key:"componentDidMount",value:function(){var e=this;uo()(P()(r.prototype),"componentDidMount",this).call(this),this.setState({searchType:o.SEARCH_BY_TEXT}),window.onpopstate=function(){var t=Xr();e.search(t.filters,t.page,o.SEARCH_BY_PAGE_CHANGE,$r(),!0)}}},{key:"componentDidUpdate",value:function(e,t,a){var s=this;uo()(P()(r.prototype),"componentDidUpdate",this).call(this,e,t,a),this.props.loadedEmptySearchResultsSecreen&&this.props.loadedEmptySearchResultsSecreen!==e.loadedEmptySearchResultsSecreen&&window.setTimeout((function(){return s.searchBarInputRef.focus()}),100),this.props.queryText&&!this.fullSearchQuery&&(this.fullSearchQuery=this.props.queryText),this.searchBarInputRef&&this.props.queryText!==this.searchBarInputRef.value&&this.props.queryText!==e.queryText&&""!==e.queryText&&this.searchBarInputRef.value!==e.queryText&&""!==this.searchBarInputRef.value&&this.generalSearchBar&&this.generalSearchBar.searchManually(),this.searchBarInputRef&&!this.setInputListener&&(this.createGeneralSearchBar(),this.searchBarInputRef.value=this.props.queryText||"",this.searchBarInputRef.onfocusin=function(e){return e.stopPropagation()},this.setInputListener=!0),this.searchBarInputRef&&this.props.fullTextSearchDisplay===n.DISPLAYING_RESULTS&&(this.searchBarInputRef.value=this.props.queryText||"")}},{key:"componentWillUnmount",value:function(){this.generalSearchBar&&this.generalSearchBar.destroyInputListeners()}},{key:"getResultsHeight",value:function(){return this.props.resultsHeight+(this.props.isMobile?96:0)}},{key:"getModalStyle",value:function(){var e=window._wssee[0].searchByText.computeTopFromElement||null,t=window._wssee[0].setup.isVtexIO||!1;if(e&&this.props.isEmbedded){this.modalContainer&&this.props.fullTextSearchDisplay!==n.CLOSED_RESULTS&&(this.modalContainer.style.minHeight="".concat(this.getResultsHeight(),"px"));var a={modal:{}};a.overlay={minHeight:this.props.statusResults===n.ERROR?"auto":this.getResultsHeight(),overflow:"visible"};for(var s=document.querySelectorAll("".concat(e)),o=null,i=0,c=0,u=Array.from(s);c<u.length;c++){var l=u[c];l.classList.contains("ImpreseeTextSearchResultsHeader")||l.offsetHeight>i&&(i=l.offsetHeight,o=l)}if(o){var p=o.offsetHeight,d=getComputedStyle(o);p+=parseInt(d.marginTop)+parseInt(d.marginBottom),p=isNaN(p)?0:p;var h=o.getBoundingClientRect(),f={top:h.top,left:h.left},m=parseInt(f.top);if(m=isNaN(m)?0:m,m+=p,t){var y=-1,v=document.querySelector(".ImpreseeGeneralModalOverlay.ImpreseeModalOverlay.ImpreseeEmbeddedResults");if(v){var S=v.style.top;S&&(y=parseInt(S.replace("px","")))}y>=0&&(m=Math.max(y,m))}m>0&&(a.overlay.top="".concat(m,"px"))}return a}return uo()(P()(r.prototype),"getModalStyle",this).call(this)}},{key:"onChangeInput",value:function(e){var t=e.target;this.setState({inputValue:t.value||""})}},{key:"onEnter",value:function(e){var t=e.target;"Enter"!==e.code&&13!==e.keyCode||(t.blur(),e.preventDefault(),e.stopPropagation())}},{key:"openSideSheet",value:function(){var e=document.querySelector("html");e&&e.style&&(this.oldHtmlPosition=e.style.position||"",e.style.position="fixed"),this.setState({sideSheetOpen:!0})}},{key:"onOpenModal",value:function(){var e=this;this.searchBarInputRef&&window.setTimeout((function(){return e.searchBarInputRef.focus()}),200)}},{key:"closeSideSheet",value:function(){var e=document.querySelector("html");e&&e.style&&(e.style.position=this.oldHtmlPosition),this.setState({sideSheetOpen:!1})}},{key:"getStyleWithFiltersOpenMobile",value:function(){return this.props.isMobile&&this.state.sideSheetOpen?{overflowY:"hidden",height:window.innerHeight}:{}}},{key:"close",value:function(){uo()(P()(r.prototype),"close",this).call(this),this.props.emptyQuery(),this.props.setFullSearchResultsStatus(n.CLOSED_RESULTS)}},{key:"updateStyleHtml",value:function(){if(uo()(P()(r.prototype),"updateStyleHtml",this).call(this),null!==this.props.containerSelector?document.querySelector(this.props.containerSelector):null){var e=document.documentElement;e&&(e.style.top="0")}}},{key:"search",value:function(e,t,r){var a=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];null!=s&&0!==s.length||(s=this.props.resultsSortedBy),""!==this.props.queryText&&this.props.fullTextSearchDisplay!==n.CLOSED_RESULTS&&this.props.searchByText(this.props.queryText,this.props.searchByTextApp,this.props.textQueryId,(function(){(window._wssee[0].setup.beforeLoadResults||function(e){})()}),(function(){(window._wssee[0].setup.onSearchFailed||function(){})(),a.props.setFullSearchResultsStatus(n.ERROR)}),(function(){(window._wssee[0].setup.onBeforeSearch||function(){})(),a.props.setFullSearchResultsStatus(n.SEARCHING_BY_CHANGING_PARAMETERS)}),this.props.pageSizeText,r,e,s,t,(window._wssee[0].setup.createHiddenFilters||function(){})()||[],i,o)}},{key:"searchWithFilters",value:function(e){this.setState({searchType:o.SEARCH_BY_FILTER}),this.search(e,0,o.SEARCH_BY_FILTERING)}},{key:"getNumberActiveFilters",value:function(){return Object.values(this.props.selectedFilters).filter((function(e){if(e.type===o.RANGE_FILTER)return e.active;if(e.type===o.VALUE_FILTER){for(var t=e.values,r=0,n=Object.values(t);r<n.length;r++){var a=n[r];if(a)return a}return!1}return!1})).length}},{key:"instantSearchInFullResults",value:function(e,t,r,n,a){var s=this;this.props.searchByText(e,t,this.props.textQueryId,(function(t){r(t),s.props.addQueryParams(e)}),n,a,window._wssee[0].searchByText.pageSize||16,o.FULL_SEARCH_TEXT,{},null,0,(window._wssee[0].setup.createHiddenFilters||function(){})()||[])}},{key:"createGeneralSearchBar",value:function(){var e=this;this.generalSearchBar=new Gr(this.searchBarInputRef,this.instantSearchInFullResults,this.props.searchByTextApp,(window._wssee[0].searchByText.searchDelayMilis||300)+this.extraMillisInstant,this.props.searchBars,(function(){}),this.props.cleanQueryText,(function(){return e.props.setFullSearchResultsStatus(n.ERROR)}),(function(){return e.props.setFullSearchResultsStatus(n.SEARCHING_BY_CHANGING_PARAMETERS)}),this.props.addSearchByTextQuery,(function(){return null}),!1),this.generalSearchBar.setListeners()}},{key:"setListeners",value:function(){this.searchBarInputRef&&!this.searchBarInputRef.dataset.isAlreadySearchBar&&(this.generalSearchBar.changeInput(this.searchBarInputRef),this.generalSearchBar.setInputListeners(),this.searchBarInputRef.focus())}},{key:"renderSearchResults",value:function(){var e=this;return g.default.createElement("div",null,0===this.props.textSearchMetadata.totalProducts&&this.props.queryText&&this.props.queryText.length>0&&g.default.createElement(Vr,{query:this.props.queryText,searchByPhoto:function(){return e.props.setStatus(n.CROPPING)},searchBySketch:function(){return e.props.setStatus(n.DRAWING)}}),g.default.createElement(vo,{afterLoadResults:function(){var t=window._wssee[0].setup.afterLoadResults||function(e,t){};t(e.props.textSearchMetadata.type,e.props.queryText)},onEmptyResults:function(){var t=window._wssee[0].setup.onEmptyResults||function(e,t){};t(e.props.textSearchMetadata.type,e.props.queryText)},results:this.props.fullTextResults}),this.props.textSearchMetadata.totalProducts>0&&g.default.createElement(Yo,{onChangePage:function(){return e.setState({searchType:o.SEARCH_BY_CHANGE_PAGE_EVENT})},search:this.search,pagesDisplayed:this.props.pagesDisplayed,marginPages:this.props.marginPages}))}},{key:"renderInstantSearchBar",value:function(){var e=this;return this.props.isMobile?"":g.default.createElement(aa,{onClick:function(){return e.close()},onClickSearchBySketch:function(){return e.props.setStatus(n.DRAWING)},onClickSearchByPhoto:function(){return e.props.setStatus(n.CROPPING)},leftImage:yi.a,input:g.default.createElement("input",{className:"ImpreseeSearchBarInFullSearch",ref:function(t){return e.searchBarInputRef=t},onKeyUp:function(){},onChange:function(){}})})}},{key:"renderResultsContent",value:function(){var e,t,r,a=this,s=null===(e=(window._wssee[0].searchByText||{}).showSearchBarInFullResults)||void 0===e||e,o=this.getNumberActiveFilters(),i=!!window._wssee&&(null===(t=window._wssee[0])||void 0===t||null===(r=t.searchByText)||void 0===r?void 0:r.useMobileEmbedded)||!1;return g.default.createElement("div",{style:{display:"flex",flexDirection:"column"}},s&&g.default.createElement("div",{className:"ImpreseeFullResultsModalSearchBarContainer"},this.renderInstantSearchBar()),g.default.createElement("div",{className:"ImpreseeFullTextSearchResultsScreen",style:this.getStyleWithFiltersOpenMobile()},this.props.isMobile&&!i&&g.default.createElement("header",null,g.default.createElement(aa,{onClick:function(){return a.close()},onClickSearchBySketch:function(){return a.props.setStatus(n.DRAWING)},onClickSearchByPhoto:function(){return a.props.setStatus(n.CROPPING)},onLoad:function(){a.setListeners()},input:g.default.createElement("input",{autoFocus:!0,enterkeyhint:"go",autocomplete:"off",className:"ImpreseeFullSearchMobileBar",ref:function(e){a.searchBarInputRef=e},onKeyUp:this.onEnter})})),g.default.createElement(Fo,{sideSheetOpen:this.state.sideSheetOpen,searchByTextApp:this.props.searchByTextApp,onCloseSideSheet:this.closeSideSheet,search:this.searchWithFilters,numberActiveFilters:o,isMobile:this.props.isMobile,onResetFilters:function(){return a.searchWithFilters({})}}),g.default.createElement("div",{className:"ImpreseeSearchResultsContainer"},this.props.fullTextSearchDisplay===n.SEARCHING_BY_CHANGING_PARAMETERS&&g.default.createElement("div",{className:"ImpreseeSearchingByChangingPage"}),g.default.createElement(fi,{openMobileFilters:this.openSideSheet,searchByTextApp:this.props.searchByTextApp,search:this.search,isMobile:this.props.isMobile,numberActiveFilters:o}),this.renderSearchResults())))}},{key:"renderContent",value:function(){var e,t,r,a=null===(e=(window._wssee[0].searchByText||{}).showSearchBarInFullResults)||void 0===e||e,s=!Tn.isMobile||Tn.isMobile&&!!window._wssee&&(null===(t=window._wssee[0])||void 0===t||null===(r=t.searchByText)||void 0===r?void 0:r.useMobileEmbedded);switch(this.props.fullTextSearchDisplay){case n.SEARCHING:return g.default.createElement("div",{className:"ImpreseeLoadingScreen"},g.default.createElement("img",{src:ds.a,alt:"loading..."}));case n.DISPLAYING_RESULTS:this.fullSearchQuery!==this.props.queryText&&(this.fullSearchQuery=this.props.queryText,this.setInputListener=!1,this.setStateValue=!1);case n.SEARCHING_BY_CHANGING_PARAMETERS:return g.default.createElement("div",{className:"ImpreseeResults ".concat(s?"ImpreseeEmbeddedResults":"")},g.default.createElement("section",{className:"ImpreseeResultsGrid ".concat(a?"":"ImpreseeNoTopMargin")},this.renderResultsContent()));case n.ERROR:return g.default.createElement(Is,null);default:return""}}}]),r}(po);var gi=Object(w.b)((function(e){return{fullTextSearchDisplay:e.fullTextSearchDisplay,fullTextResults:e.fullTextResults,textSearchMetadata:e.textSearchMetadata,currentPageText:e.currentPageText,queryText:e.queryText,selectedFilters:e.selectedFilters,pageSizeText:e.pageSizeText,textQueryId:e.textQueryId,resultsSortedBy:e.resultsSortedBy,filterOptions:e.filterOptions,promotedProducts:e.promotedProducts,promotedBanner:e.promotedBanner,loadedEmptySearchResultsSecreen:e.loadedEmptySearchResultsSecreen}}),{setFullSearchResultsStatus:Sn,searchByText:ea,setStatus:mn,cleanQueryText:Rn})(Si),wi=r(96),Ei=r.n(wi),Ri=r(97),bi=r.n(Ri);r(178);function _i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Ii=function(e){D()(r,e);var t=_i(r);function r(){return _()(this,r),t.apply(this,arguments)}return C()(r,[{key:"renderContent",value:function(){var e=20;return this.props.isMobile&&(e=4),Ei()(e,(function(e){return g.default.createElement("div",{key:e,className:"ImpreseeLoadingItem ImpreseeLoadingImageContainer"},g.default.createElement("img",{className:"ImpreseeLoadingItemImage",src:bi.a,alt:"loading"}))}))}},{key:"render",value:function(){return g.default.createElement("div",{className:"ImpreseeLoadingGrid"},this.renderContent())}}]),r}(g.Component),Ci=r(44),Ti=r.n(Ci),Bi=r(98),Ai=r.n(Bi),Di=r(99),Oi=r.n(Di);r(179);function xi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Li=function(e){D()(r,e);var t=xi(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).backToDetections=n.backToDetections.bind(B()(n)),n.search=n.search.bind(B()(n)),n.mainColor=window._wssee[0].setup.mainColor||"#bababa",n.applicationUuid=c.photoApp,n}return C()(r,[{key:"backToDetections",value:function(){this.props.setStatus(n.DISPLAYING_RESULTS)}},{key:"search",value:function(){var e=this.cropper.getCropBoxData(),t=document.querySelector(".cropper-container.cropper-bg").parentElement;this.props.setStatus(n.SEARCHING_BY_AREA);var r=e.left/t.clientWidth*100,a=(e.top-document.body.scrollTop)/t.clientHeight*100,s=e.width/t.clientWidth*100,o=e.height/t.clientHeight*100;this.props.setCustomDetection(r,a,s,o)}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},g.default.createElement("div",{className:"ImpreseeQueryCropperContainer"},g.default.createElement(ns.a,{src:this.props.localQueryImage||this.props.queryImage.queryUrl,ref:function(t){e.cropper=t},autoCropArea:.6,checkCrossOrigin:!1,style:{overflowX:"hidden",overflowY:"hidden",maxWidth:"100%",maxHeight:"100%",height:this.props.displayedQuerySize.height,width:this.props.displayedQuerySize.width},minContainerWidth:this.props.displayedQuerySize.width,minContainerHeight:this.props.displayedQuerySize.height,zoomOnWheel:!1,zoomOnTouch:!1,dragMode:"none",guides:!1}),g.default.createElement("div",{className:"ImpreseeBackToDetections",onClick:this.backToDetections},g.default.createElement("img",{src:Ai.a,alt:"back to detections"}))),g.default.createElement("div",{className:"ImpreseeCustomSearchRow"},g.default.createElement("img",{style:{height:"20px",marginLeft:"10px"},src:Ti.a,alt:"crop icon"}),g.default.createElement("span",{style:{flex:1,textAlign:"center"}},window._wssee[0].texts.customSelectionSearchLabel||"Custom search")),g.default.createElement("div",{className:"ImpreseeLine",key:"crop_query:impresee line"}),g.default.createElement("div",{className:"ImpreseeSearchCustomArea"},g.default.createElement("div",{className:"ImpreseeSearchAreaButton",onClick:this.search,style:{backgroundColor:this.mainColor}},g.default.createElement("img",{src:Oi.a,alt:"search"}))))}}]),r}(g.Component);var Pi=Object(w.b)((function(e){return{queryImage:e.queryImage,displayedQuerySize:e.displayedQuerySize,localQueryImage:e.localQueryImage}}),{setStatus:mn,performSearch:xn,setCustomDetection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=o.CUSTOM_DETECTION;return{type:"SET_CUSTOM_RECT",payload:{id:a,x:e,y:t,width:r,height:n}}}})(Li);r(180);function ki(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Ni=function(e){D()(r,e);var t=ki(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).state={cssClasses:"ImpreseeSearchQuery ImpreseeLoadingImage"},n.imageLoaded=n.imageLoaded.bind(B()(n)),n}return C()(r,[{key:"imageLoaded",value:function(){var e=this.imageRef.height,t=this.imageRef.width;this.props.setDisplayedQuerySize(t,e),t>e?this.setState({cssClasses:"ImpreseeSearchQuery ImpreseeHorizontalQuery"}):this.setState({cssClasses:"ImpreseeSearchQuery ImpreseeVerticalQuery"})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:this.state.cssClasses,ref:function(t){return e.queryContainerRef=t}},g.default.createElement("img",{ref:function(t){return e.imageRef=t},alt:"query",onLoad:this.imageLoaded,src:this.props.queryImage.queryUrl}))}}]),r}(g.Component);var Mi=Object(w.b)((function(e){return{queryImage:e.queryImage}}),{setDisplayedQuerySize:En})(Ni),Fi=r(100),Hi=r.n(Fi);r(185);function Ui(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Gi=function(e){D()(r,e);var t=Ui(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).state={cssClasses:"ImpreseeDetectionQuery ImpreseeLoadingImage"},n.imageLoaded=n.imageLoaded.bind(B()(n)),n.changeToCropping=n.changeToCropping.bind(B()(n)),n.impreseeApp=c.photoApp,n.mainColor=window._wssee[0].setup.mainColor||"#bababa",n.maxHeight=.6*window.innerHeight,n.canvas=null,n}return C()(r,[{key:"componentDidMount",value:function(){(this.props.selectedDetection===o.CUSTOM_DETECTION||this.props.selectedDetection>0)&&0===Xn()(this.props.results).length&&this.updateResultsWithDetection(this.props.selectedDetection),this.imageRef&&this.imageRef.complete&&this.imageLoaded()}},{key:"componentDidUpdate",value:function(e,t,r){if(0===this.props.displayedQuerySize.height&&0===this.props.displayedQuerySize.width&&this.imageRef.complete&&this.props.status===n.CLOSED){var s=document.getElementById(a.IMAGE_CANVAS);null!==s&&s.clientWidth>0&&s.clientHeight>0&&this.setDisplayQuerySizeWithCanvasSize(s.clientWidth,s.clientHeight)}else if(this.props.displayedQuerySize.height>0&&this.props.displayedQuerySize.width>0&&this.imageRef.complete&&this.props.status===n.CLOSED){null===document.getElementById(a.IMAGE_CANVAS)&&null!=this.canvas&&this.queryContainerRef.prepend(this.canvas)}e.selectedDetection!==this.props.selectedDetection&&this.updateResultsWithDetection(this.props.selectedDetection)}},{key:"loadImageWithCallback",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};Hi()(this.props.localQueryImage||this.props.queryImage.queryUrl,(function(r,n){if("error"===r.type)console.error("Couldn't load Image");else{var s=document.getElementById(a.IMAGE_CANVAS);s&&s.remove(),r.id=a.IMAGE_CANVAS,e.queryContainerRef&&(e.canvas=r,e.queryContainerRef.prepend(r),t())}}),{orientation:!0,crossOrigin:"anonymous"})}},{key:"setDisplayQuerySizeWithCanvasSize",value:function(e,t){var r=e,n=t;t>this.maxHeight&&(r=this.maxHeight*e/t,n=this.maxHeight),this.props.setDisplayedQuerySize(r,n)}},{key:"getQueryImageClass",value:function(){var e=this.props.queryImage.queryHeight;return this.props.queryImage.queryWidth>e?"ImpreseeDetectionQuery ImpreseeHorizontalQuery":"ImpreseeDetectionQuery ImpreseeVerticalQuery"}},{key:"imageLoaded",value:function(){var e=this;this.loadImageWithCallback((function(){var t=document.getElementById(a.IMAGE_CANVAS);e.setDisplayQuerySizeWithCanvasSize(t.clientWidth,t.clientHeight)}))}},{key:"changeToCropping",value:function(){this.props.setStatus(n.CROPPING_QUERY)}},{key:"renderDetection",value:function(){var e;if(this.props.selectedDetection&&this.props.detections[this.props.selectedDetection]?e=this.props.detections[this.props.selectedDetection]:this.props.selectedDetection===o.CUSTOM_DETECTION&&this.props.customDetection&&(e=this.props.customDetection),e)return g.default.createElement("div",{key:"detection_query:".concat(this.props.selectedDetection),className:"ImpreseeSelectedArea",style:{top:"calc(".concat(e.y,"%"),left:"calc(".concat(e.x,"%"),width:"".concat(e.width,"%"),height:"".concat(e.height,"%"),borderColor:this.mainColor}})}},{key:"updateResultsWithDetection",value:function(e){var t,r=e;e===o.CUSTOM_DETECTION?(t=this.props.customDetection,r=0):t=this.props.detections[e],t&&(window.scrollTo(0,0),this.props.performSearchByArea(this.impreseeApp,this.props.detectionUuid,r,{top:t.y/100,left:t.x/100,width:t.width/100,height:t.height/100},this.props.beforeLoadResults,this.props.onSearchFailed))}},{key:"onClickDetectionDot",value:function(e){e!==this.props.selectedDetection&&this.props.updatedSelectedDetection(e)}},{key:"renderDetectionDots",value:function(){var e=this;return Xn()(this.props.detections).map((function(t){var r="calc(".concat(t.y+t.height/2,"% - 19px)"),n="calc(".concat(t.x+t.width/2,"% - 19px)");return g.default.createElement("div",{className:"ImpreseeDetectionDotContainer",key:"".concat(t.id,"_detection"),onClick:function(){return e.onClickDetectionDot(t.id)},style:{top:r,left:n}},g.default.createElement("div",{className:"ImpreseeDetectionDot",style:{backgroundColor:e.mainColor}}))}))}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{key:"detection_query:container",className:this.getQueryImageClass(),style:this.props.detectionStyle,ref:function(t){return e.queryContainerRef=t}},g.default.createElement("img",{key:"detection_query:image",ref:function(t){return e.imageRef=t},alt:"query",onLoad:this.imageLoaded,src:this.props.localQueryImage||this.props.queryImage.queryUrl}),this.renderDetection(),this.renderDetectionDots(),g.default.createElement("div",{key:"detection_query:crop_icon",className:"ImpreseeCropQuery",onClick:this.changeToCropping,style:this.props.statusResults===n.SEARCHING_BY_AREA?{display:"none"}:{}},g.default.createElement("img",{src:Ti.a,alt:"crop a custom area"})))}}]),r}(g.Component);Gi.propTypes={beforeLoadResults:F.a.func.isRequired,onSearchFailed:F.a.func.isRequired};var ji=Object(w.b)((function(e){return{detections:e.detections,selectedDetection:e.selectedDetection,statusResults:e.statusResults,localQueryImage:e.localQueryImage,customDetection:e.customDetection,queryImage:e.queryImage,displayedQuerySize:e.displayedQuerySize,status:e.status,detectionUuid:e.detectionUuid,results:e.results}}),{updatedSelectedDetection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"CHANGE_SELECTED_DETECTION",payload:e}},performSearchByArea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){};return function(){var u=_n()(Cn.a.mark((function u(l){var p,d,h;return Cn.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return l({type:hn,payload:{}}),l({type:pn,payload:n.SEARCHING_BY_AREA}),p=s.searchByBoxURL+e,u.prev=3,u.next=6,On(p,{search_type:"FULL",is_mobile:Tn.isMobile||window.innerWidth<=768?"true":"false",page_size:100,query_image:{image_base64:"",image_upload_id:t,box_rank:r,box_custom:a}});case 6:if(d=u.sent,(h=d.data).type=o.SEARCH_BY_PHOTO,0===h.status){u.next=13;break}return c(),l({type:pn,payload:n.ERROR}),u.abrupt("return");case 13:i(o.SEARCH_BY_PHOTO),l({type:hn,payload:h}),u.next=24;break;case 17:if(u.prev=17,u.t0=u.catch(3),u.t0.message!==o.CANCEL_REQUEST){u.next=22;break}return console.log("Only one request allowed at a time"),u.abrupt("return");case 22:c(),l({type:pn,payload:n.ERROR});case 24:case"end":return u.stop()}}),u,null,[[3,17]])})));return function(e){return u.apply(this,arguments)}}()},setStatus:mn,setDisplayedQuerySize:En})(Gi),qi=(r(186),r(101)),Qi=r.n(qi);function zi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Yi=function(e){D()(r,e);var t=zi(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).onSketchLoad=n.onSketchLoad.bind(B()(n)),n}return C()(r,[{key:"onSketchLoad",value:function(){this.props.setDisplayedQuerySize(this.sketchRef.width,this.sketchRef.height)}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:"ImpreseeSketchQuery"},g.default.createElement("img",{ref:function(t){return e.sketchRef=t},onLoad:this.onSketchLoad,className:"ImpreseeSketch",alt:"query",src:this.props.queryImage.queryUrl}),g.default.createElement("a",{href:this.props.queryImage.queryUrl,download:"sketch.jpg",rel:"noopener noreferrer",target:"_blank"},g.default.createElement("img",{className:"ImpreseeDownloadSketch",alt:"download query",src:Qi.a})))}}]),r}(g.Component);var Wi=Object(w.b)((function(e){return{queryImage:e.queryImage}}),{setDisplayedQuerySize:En})(Yi),Vi=(r(187),r(102)),Xi=r.n(Vi),Ki=r(103),$i=r.n(Ki);function Ji(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Zi=function(e){D()(r,e);var t=Ji(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).onClick=n.onClick.bind(B()(n)),n}return C()(r,[{key:"getIcon",value:function(){var e;return this.props.searchType===o.SEARCH_BY_PHOTO?e=window._wssee[0].setup.searchByPhotoIconURL?window._wssee[0].setup.searchByPhotoIconURL:$i.a:this.props.searchType===o.SEARCH_BY_SKETCH&&(e=window._wssee[0].setup.searchBySketchIconURL?window._wssee[0].setup.searchBySketchIconURL:Xi.a),g.default.createElement("img",{className:"ImpreseeSearchAgainIcon",alt:"search again",src:e,onClick:this.onClick})}},{key:"onClick",value:function(){this.props.searchType===o.SEARCH_BY_PHOTO?this.props.setStatus(n.CROPPING):this.props.searchType===o.SEARCH_BY_SKETCH&&this.props.setStatus(n.DRAWING)}},{key:"render",value:function(){return g.default.createElement("div",{className:"ImpreseeSearchAgain"},this.getIcon())}}]),r}(g.Component);var ec=Object(w.b)((function(e){return{searchType:e.searchType}}),{setStatus:mn})(Zi),tc=(r(188),function(){return g.default.createElement("div",{className:"ImpreseeWhiteOverlay"})});function rc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var nc=function(e){D()(r,e);var t=rc(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).state={className:a.IMPRESEE_RESULTS_CLASS},n}return C()(r,[{key:"componentDidMount",value:function(){this.modalContainer=document.querySelector(window._wssee[0].setup.container||null)||null,window._wssee[0].setup.container&&this.modalContainer?this.setState({className:a.IMPRESEE_RESULTS_CLASS_EMBEDDED_RESULTS}):this.setState({className:a.IMPRESEE_RESULTS_CLASS}),this.props.searchUuid&&this.props.searchType&&window._wssee[0].setup.addSearchDataToUrl&&this.setQueryParams({ISearchType:this.props.searchType,ISearchCode:this.props.searchUuid},!0)}},{key:"componentDidUpdate",value:function(e,t,r){e.searchUuid!==this.props.searchUuid&&window._wssee[0].setup.addSearchDataToUrl&&this.setQueryParams({ISearchType:this.props.searchType,ISearchCode:this.props.searchUuid},!0)}},{key:"renderQuery",value:function(){return this.props.statusResults===n.CROPPING_QUERY?g.default.createElement(Pi,null):this.props.searchType===o.SEARCH_BY_PHOTO&&window._wssee[0].setup.useDetection?g.default.createElement(ji,{key:"impresee_results:detection_query",beforeLoadResults:window._wssee[0].setup.beforeLoadResults||function(e){},onSearchFailed:window._wssee[0].setup.onSearchFailed||function(){},detectionStyle:this.getQueryStyle()}):this.props.searchType===o.SEARCH_BY_PHOTO?g.default.createElement(Mi,null):this.props.searchType===o.SEARCH_BY_SKETCH?g.default.createElement(Wi,null):void 0}},{key:"renderResults",value:function(){var e=this;switch(this.props.statusResults){case n.SEARCHING_BY_AREA:return g.default.createElement(Ii,{isMobile:this.props.isMobile});case n.CROPPING_QUERY:return[g.default.createElement(tc,{key:"impresee:whiteOverlay"}),g.default.createElement(vo,{key:"impresee:impreseeSearchResults",results:this.props.results,afterLoadResults:function(){var t=window._wssee[0].setup.afterLoadResults||function(e,t){};t(e.props.searchType,"")}})];case n.DISPLAYING_RESULTS:return g.default.createElement(vo,{afterLoadResults:function(){var t=window._wssee[0].setup.afterLoadResults||function(e,t){};t(e.props.searchType,"")},results:this.props.results,isMobile:this.props.isMobile});default:return""}}},{key:"getGridStyle",value:function(){switch(this.props.statusResults){case n.SEARCHING_BY_AREA:return{overflowY:"hidden"};case n.CROPPING_QUERY:return this.props.isMobile?{display:"none"}:{position:"relative",overflowY:"hidden"};default:return{}}}},{key:"getQueryStyle",value:function(){return this.props.statusResults===n.CROPPING_QUERY?{height:"100%",maxHeight:"calc(100% - 50px)",overflow:"hidden"}:window._wssee[0].setup.useDetection&&this.props.searchType===o.SEARCH_BY_PHOTO&&this.props.displayedQuerySize.height>0&&this.props.displayedQuerySize.width>0?{height:this.props.displayedQuerySize.height,width:this.props.displayedQuerySize.width}:window._wssee[0].setup.useDetection&&this.props.searchType===o.SEARCH_BY_PHOTO&&0===this.props.displayedQuerySize.height&&0===this.props.displayedQuerySize.width?{height:null,width:null}:void 0}},{key:"getClassNameForQueryOrientation",value:function(){return this.props.displayedQuerySize.width>this.props.displayedQuerySize.height?"ImpreseeHorizontalQuery":"ImpreseeVerticalQuery"}},{key:"render",value:function(){return g.default.createElement("div",{className:this.state.className},g.default.createElement("aside",{className:"ImpreseeQuery ".concat(this.getClassNameForQueryOrientation()),style:this.getQueryStyle()},this.renderQuery()),g.default.createElement("div",{style:{paddingTop:"5px"},className:"ImpreseePoweredBy"},g.default.createElement(La,{isMobile:this.props.isMobile})),g.default.createElement(ec,null),g.default.createElement("section",{className:"ImpreseeResultsGrid",style:this.getGridStyle()},g.default.createElement(Ls,{mainColor:window._wssee[0].setup.mainColor||"#bababa",title:window._wssee[0].texts.searchResultsTitle||"Search results"}),this.renderResults()))}}]),r}(U.a);var ac=Object(w.b)((function(e){return{searchUuid:e.searchUuid,searchType:e.searchType,statusResults:e.statusResults,displayedQuerySize:e.displayedQuerySize,results:e.results}}))(nc);function sc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var oc=function(e){D()(r,e);var t=sc(r);function r(e){var n;return _()(this,r),(n=t.call(this,e)).modalId=a.IMPRESEE_MODAL_ID_RESULTS,n}return C()(r,[{key:"getModalStyle",value:function(){var e=uo()(P()(r.prototype),"getModalStyle",this).call(this);return this.props.statusResults!==n.SEARCHING_BY_AREA&&this.props.statusResults!==n.CROPPING_QUERY||(e.modal={overflowY:"hidden"}),e}},{key:"close",value:function(){uo()(P()(r.prototype),"close",this).call(this),this.props.emptySearchInfo(),this.props.setStatus(n.CLOSED_RESULTS)}},{key:"renderContent",value:function(){switch(this.props.statusResults){case n.CROPPING_QUERY:case n.SEARCHING_BY_AREA:case n.DISPLAYING_RESULTS:return g.default.createElement(ac,{isMobile:this.props.isMobile});case n.ERROR:return g.default.createElement(Is,null);default:return""}}}]),r}(po);var ic=Object(w.b)((function(e){return{statusResults:e.statusResults}}),{setStatus:mn})(oc);r(189);function cc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return uc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uc(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var a=P()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var pc=function(e){D()(r,e);var t=lc(r);function r(e){var a;return _()(this,r),a=t.call(this,e),N()(B()(a),"onBeforeSearch",(function(){window._wssee[0].searchByText.useFullAsInstant||a.props.setDropDownStatus(n.LOADING_DROP_DOWN_RESULTS),(window._wssee[0].setup.onBeforeSearch||function(){})()})),a.overlayOpenClass="impresee-overlay-open",a.count=0,a.debugMode=window._wssee[0].debug||!1,a.searchBar=null,a.handleAnalyticsLoad=a.handleAnalyticsLoad.bind(B()(a)),a.emptyTextQuery=a.emptyTextQuery.bind(B()(a)),a.handleAnalyticsLoadError=a.handleAnalyticsLoadError.bind(B()(a)),a.searchByTextApp=a.getTextSearchApp(),a.addQueryParams=a.addQueryParams.bind(B()(a)),a.emptyVisualSearchInfo=a.emptyVisualSearchInfo.bind(B()(a)),a.addSearchByTextQuery=a.addSearchByTextQuery.bind(B()(a)),a.performInstantSearch=a.performInstantSearch.bind(B()(a)),a.updateIsMobile=a.updateIsMobile.bind(B()(a)),a.instantSearch=a.instantSearch.bind(B()(a)),a.handleWindowSizeChange=a.handleWindowSizeChange.bind(B()(a)),a.openEmptyFullTextSearchResults=a.openEmptyFullTextSearchResults.bind(B()(a)),e.searchBarSelector&&(a.searchBars=Array.from(document.querySelectorAll(e.searchBarSelector))),Tn.isMobile||window.innerWidth<=768?a.ImpreseeDropDownResults=eo:a.ImpreseeDropDownResults=io,a.state={isMobile:Tn.isMobile||window.innerWidth<=768},a}return C()(r,[{key:"updateIsMobile",value:function(){this.setState({isMobile:Tn.isMobile||window.innerWidth<=768})}},{key:"handleWindowSizeChange",value:function(){this.updateIsMobile()}},{key:"openEmptyFullTextSearchResults",value:function(){var e,t,r=!!window._wssee&&(null===(e=window._wssee[0])||void 0===e||null===(t=e.searchByText)||void 0===t?void 0:t.useMobileEmbedded)||!1;window.location.hash.indexOf("#openitext")>=0&&!r?(this.props.emptyFullTextSearch(),this.props.setFullSearchResultsStatus(n.DISPLAYING_RESULTS),this.props.focusSearchBar()):r&&console.warn("openitext not available with mobile embedded")}},{key:"componentDidMount",value:function(){window.addEventListener("hashchange",this.openEmptyFullTextSearchResults),this.openEmptyFullTextSearchResults(),this.updateIsMobile(),this.beforeLoadResults=this.props.beforeLoadResults||function(e){},this.loadButtons(),this.loadData(),this.updateModalSizeState(),this.loadFullSearchByTextPanel(),this.openVisualSearchPanel(),this.loadImageSearchButtons(),window._wseeRefreshSearch=this.refreshSearch.bind(this),window.addEventListener("resize",this.handleWindowSizeChange);var e=window._wssee[0].setup.triggerOpenITextSelector||"";if(e){var t=document.querySelector(e);t&&t.addEventListener("click",(function(){window.location.hash="#openitext",window.setTimeout((function(){var e=document.querySelector(".ImpreseeFullSearchMobileBar");e.click(),e.focus()}),10)}))}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowSizeChange)}},{key:"componentDidUpdate",value:function(e){this.loadFullSearchByTextPanel(),e.displaySearchBarOverlayStatus!==this.props.displaySearchBarOverlayStatus&&this.props.displaySearchBarOverlayStatus===n.OPEN?document.body.classList.add(this.overlayOpenClass):e.displaySearchBarOverlayStatus!==this.props.displaySearchBarOverlayStatus&&this.props.displaySearchBarOverlayStatus===n.CLOSED&&document.body.classList.remove(this.overlayOpenClass)}},{key:"loadData",value:function(){var e=this.queryParams.ISearchCode||null,t=this.queryParams.ISearchType||null;if(e&&t){var r=this.getImpreseeApp(t);r&&this.props.loadSearch(r,e,t,this.beforeLoadResults)}}},{key:"refreshSearch",value:function(){var e=Xr(),t=this.queryParams.IText||null;if(null!==t&&t.length>0&&this.props.fullTextSearchDisplay!==n.CLOSED_RESULTS){var r=decodeURIComponent(t);this.performSearchByText(r,e.page,e.filters,e.reorderBy,!1,!0)}}},{key:"addSearchByTextQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.props.dropDownStatus!==n.CLOSED||window._wssee[0].searchByText.useFullAsInstant||window._wssee[0].searchByText.allowEmptySearch){if(this.setQueryParamsText(e),!window._wssee[0].searchByText.useFullAsInstant){var r=window._wssee[0].searchByText.onCloseResults||function(e){};r(o.INSTANT_SEARCH),this.props.setDropDownStatus(n.CLOSED),this.props.clearInstantSearchresults()}this.performSearchByText(e,void 0,void 0,void 0,t)}}},{key:"performSearchByText",value:function(e,t,r,a){var s=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];(null!==e&&(0!==e.length||i)||window._wssee[0].searchByText.allowEmptySearch)&&this.props.searchByText(e,this.searchByTextApp,this.props.textQueryId,window._wssee[0].setup.beforeLoadResults||function(e){},(function(){(window._wssee[0].setup.onSearchFailed||function(){})(),s.props.setFullSearchResultsStatus(n.ERROR)}),(function(){s.props.setFullSearchResultsStatus(n.SEARCHING)}),window._wssee[0].searchByText.pageSize||16,o.FULL_SEARCH_TEXT,r,a,t,(window._wssee[0].setup.createHiddenFilters||function(){})()||[],c,$r(),0,i)}},{key:"performInstantSearch",value:function(e,t,r,n,a){var s,i,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return this.state.isMobile?(s=window._wssee[0].searchByText.displayMobileDropdownAsGrid?u.instantSearchMobileResultsGrid:u.instantSearchMobileResults,i=u.numSuggestionsMobile):(s=u.instantSearchDesktopResults,i=u.numSuggestionsDesktop),this.props.searchByText(e,t,this.props.textQueryId,r,n,a,s,window._wssee[0].searchByText.useFullAsInstant?o.FULL_SEARCH_TEXT:o.SIMPLE_SEARCH_TEXT,void 0,void 0,void 0,(window._wssee[0].setup.createHiddenFilters||function(){})()||[],!1,!1,i,c)}},{key:"instantSearch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.performInstantSearch(e,this.searchByTextApp,c.beforeLoadResults,window._wssee[0].setup.onSearchFailed||function(){},this.onBeforeSearch,t)}},{key:"loadFullSearchByTextPanel",value:function(){var e=Xr(),t=this.queryParams.IText||null;if(null!==t&&t.length>0&&this.props.fullTextSearchDisplay===n.CLOSED_RESULTS){var r=decodeURIComponent(t);this.performSearchByText(r,e.page,e.filters,e.reorderBy,!1,!0)}}},{key:"openVisualSearchPanel",value:function(){var e=this.queryParams.imsee_state||null;e===n.OPEN_VISUAL_SEARCH_ON_LOAD?this.props.setStatus(n.CROPPING):e===n.OPEN_SKETCH_SEARCH_ON_LOAD&&this.props.setStatus(n.DRAWING)}},{key:"emptyTextQuery",value:function(){var e;(null===(e=window._wssee[0].searchByText.addTextSearchToUrl)||void 0===e||e)&&this.setQueryParams({IText:[]},!0)}},{key:"emptyVisualSearchInfo",value:function(){this.setQueryParams({ISearchCode:[],ISearchType:[]},!0)}},{key:"setQueryParamsText",value:function(e){var t;if(null===(t=window._wssee[0].searchByText.addTextSearchToUrl)||void 0===t||t){var r=window._wssee[0].searchByText.baseSearchUrl||"";window.history.pushState({query:e},document.title,"".concat(r)),this.setQueryParams({IText:e})}}},{key:"addQueryParams",value:function(e){this.setQueryParamsText(encodeURIComponent(e))}},{key:"updateModalSizeState",value:function(){var e,t;this.state.isMobile?(e=window.innerHeight,t=window.innerWidth):(e=window.innerHeight-108,t=.8*window.innerWidth),this.props.changedModalSize(t,e)}},{key:"loadButtons",value:function(){var e=this;if(this.props.photoButton){var t,r=cc(document.getElementsByClassName(this.props.photoButton));try{for(r.s();!(t=r.n()).done;){t.value.addEventListener("click",(function(){return e.props.setStatus(n.CROPPING)}))}}catch(e){r.e(e)}finally{r.f()}}if(this.props.sketchButton){var a,s=cc(document.getElementsByClassName(this.props.sketchButton));try{for(s.s();!(a=s.n()).done;){a.value.addEventListener("click",(function(){return e.props.setStatus(n.DRAWING)}))}}catch(e){s.e(e)}finally{s.f()}}}},{key:"loadImageSearchButtons",value:function(){var e=this,t=document.body;if(""!==this.props.imageSearchButton){var r=t.querySelectorAll("img.".concat(this.props.imageSearchButton));this.loadImageSearchButtonsInNodes(r);new MutationObserver((function(t,r){var n,a=cc(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=s.target,i=[];"childList"===s.type?i=o.querySelectorAll("img.".concat(e.props.imageSearchButton)):"attributes"===s.type&&"IMG"===o.tagName&&o.classList.contains(e.props.imageSearchButton)&&(i=[o]),i.length>0&&e.loadImageSearchButtonsInNodes(i)}}catch(e){a.e(e)}finally{a.f()}})).observe(t,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["class"]})}}},{key:"loadImageSearchButtonsInNodes",value:function(e){var t,r,n,a=cc(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(!s.classList.contains(ye)){s.classList.add(ye);var o=document.createElement("div");o.classList.add("ImpreseeImageSearchTriggerContainer"),n=o,(r=s)&&n&&r.parentNode.insertBefore(n,r),g.default.render(g.default.createElement(w.a,{store:this.props.store},g.default.createElement(Fn,{imageUrl:s.src})),o)}}}catch(e){a.e(e)}finally{a.f()}}},{key:"addAnalyticsAccount",value:function(e,t){e("config",t,{custom_map:{dimension1:"sketch_app",dimension2:"product_seen",dimension3:"photo_app",metric1:"displayed_product"}})}},{key:"handleAnalyticsLoad",value:function(){var e,t;window.dataLayer=window.dataLayer||[],window.impreseeGtag=function(){window.dataLayer.push(arguments)},window.impreseeGtag("js",new Date),this.addAnalyticsAccount(window.impreseeGtag,"UA-115773194-5"),c.customGoogleAnalytics&&this.addAnalyticsAccount(window.impreseeGtag,c.customGoogleAnalytics),window.impreseeGtag("config","AW-812288795"),this.props.photoButton?e=c.photoApp:this.props.sketchApp&&(t=c.sketchApp),Zr("load_impresee",{event_category:"load",event_label:window.location.hostname,sketch_app:t,photo_app:e})}},{key:"handleAnalyticsLoadError",value:function(){console.error("Couldn't load analytics, we won't register anything!")}},{key:"getImpreseeApp",value:function(e){return e===o.SEARCH_BY_SKETCH?c.sketchApp:e===o.SEARCH_BY_PHOTO?c.photoApp:null}},{key:"getTextSearchApp",value:function(){var e=u.textSearchApp;return e||(console.warn("Search by text app was not provided. Using search by photo app"),c.photoApp)}},{key:"getLazySearchBar",value:function(){return document.querySelector(".".concat(u.overlayInputClassName))}},{key:"render",value:function(){var e,t,r,a,s=!!window._wssee&&(null===(e=window._wssee[0])||void 0===e||null===(t=e.searchByText)||void 0===t?void 0:t.useMobileEmbedded)||!1;return g.default.createElement("div",{className:"ImpreseeApp"},u.useText&&g.default.createElement(this.ImpreseeDropDownResults,{searchBars:this.searchBars,searchByTextApp:this.searchByTextApp,addSearchByTextQuery:this.addSearchByTextQuery,lazySearchBar:this.getLazySearchBar,search:this.performInstantSearch,instantSearch:this.instantSearch}),!!window._wssee[0].searchByText.useButtonAsSearchBar&&(null===(r=window._wssee[0].searchByText.useText)||void 0===r||r)&&g.default.createElement(qn,{instantSearch:this.instantSearch,isMobile:this.state.isMobile}),!!window._wssee[0].searchByText.useButtonAsSearchBar&&(null===(a=window._wssee[0].searchByText.useText)||void 0===a||a)&&g.default.createElement("div",{style:{display:this.props.displaySearchBarOverlayStatus===n.OPEN?"block":"none"}},g.default.createElement(la,{searchByTextApp:this.searchByTextApp,searchBars:this.searchBars,addSearchByTextQuery:this.addSearchByTextQuery,lazySearchBar:this.getLazySearchBar,search:this.performInstantSearch,instantSearch:this.instantSearch})),g.default.createElement(ms,{isMobile:this.state.isMobile}),g.default.createElement(ic,{statusResults:this.props.statusResults,resultsHeight:this.props.resultsHeight,containerSelector:window._wssee[0].setup.container||null,emptySearchInfo:this.emptyVisualSearchInfo,isMobile:this.state.isMobile,isOpen:this.props.statusResults!==n.CLOSED_RESULTS,isEmbedded:null!==(window._wssee[0].setup.container||null),visible:!0,pagesDisplayed:this.state.isMobile?1:5,marginPages:this.state.isMobile?2:5}),g.default.createElement(gi,{isMobile:this.state.isMobile,addQueryParams:this.addQueryParams,searchByTextApp:this.searchByTextApp,containerSelector:window._wssee[0].searchByText.fullTextSearchContainerSelector||null,isOpen:this.props.fullTextSearchDisplay!==n.CLOSED_RESULTS,emptyQuery:this.emptyTextQuery,statusResults:this.props.fullTextSearchDisplay,resultsHeight:this.props.resultsHeight,addSearchByTextQuery:this.addSearchByTextQuery,isEmbedded:!this.state.isMobile||s,visible:this.state.isMobile||null!==document.querySelector(u.fullTextSearchContainerSelector),pagesDisplayed:this.state.isMobile?1:5,marginPages:this.state.isMobile?2:5}))}}]),r}(U.a);pc.propTypes={beforeLoadResults:F.a.func};var dc=Object(w.b)((function(e){return{dropDownStatus:e.dropDownStatus,statusResults:e.statusResults,fullTextSearchDisplay:e.fullTextSearchDisplay,textQueryId:e.textQueryId,resultsHeight:e.resultsHeight,displaySearchBarOverlayStatus:e.displaySearchBarOverlayStatus}}),{setStatus:mn,searchByText:ea,loadSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){};return function(){var c=_n()(Cn.a.mark((function c(u){var l,p,d;return Cn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(u({type:pn,payload:n.SEARCHING}),l=s.searchByBoxURL+e,c.prev=2,r!==o.SEARCH_BY_PHOTO){c.next=9;break}return c.next=6,On(l,{search_type:"FULL",is_mobile:Tn.isMobile?"true":"false",page_size:100,query_image:{image_upload_id:t,box_rank:0,box_custom:null}});case 6:p=c.sent,c.next=12;break;case 9:return c.next=11,On(l,{search_type:"FULL",is_mobile:Tn.isMobile?"true":"false",page_size:100,query_sketch:{sketch_upload_id:t}});case 11:p=c.sent;case 12:if((d=p.data).type=r,0===d.status){c.next=18;break}return a(),u({type:pn,payload:n.ERROR}),c.abrupt("return");case 18:i(r),u({type:"LOAD_SEARCH",payload:d}),c.next=29;break;case 22:if(c.prev=22,c.t0=c.catch(2),c.t0.message!==o.CANCEL_REQUEST){c.next=27;break}return console.log("Only one request allowed at a time"),c.abrupt("return");case 27:a(),u({type:pn,payload:n.ERROR});case 29:case"end":return c.stop()}}),c,null,[[2,22]])})));return function(e){return c.apply(this,arguments)}}()},changedModalSize:gn,setFullSearchResultsStatus:Sn,setDropDownStatus:vn,clearInstantSearchresults:ta,emptyFullTextSearch:function(){return{type:"CLEAN_FULL_TEXT"}},focusSearchBar:function(){return{type:"FOCUS_SEARCH_BAR"}}})(pc);function hc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return fc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fc(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function fc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mc=function(e){var t,r={},n=hc(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,s=(a.images||[]).filter((function(e){return e.is_match}))[0]||{};r[a.rank]={imageUrl:s.value||"",productUrl:a.url,rank:a.rank};var o,i=hc(a.texts||[]);try{for(i.s();!(o=i.n()).done;){var c=o.value,u=c.code,l=c.value;r[a.rank][u]=l}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}return r};function yc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return vc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vc(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return gc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gc(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ec(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ec(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function Ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rc(Object(r),!0).forEach((function(t){N()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ic(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ic(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function Ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Tc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tc(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function Tc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ac(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ac(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function Ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Oc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oc(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function Oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Lc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lc(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function Lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return kc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kc(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw s}}}}function kc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nc=Object(E.b)({queryImage:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"LOAD_SEARCH":case dn:var a=r.payload;return{queryUrl:e=a.query_image&&a.query_image.image_url||null};case fn:var s=r.payload,o=s.query_image||[];e=o.image_url||null;var i=o.image_width,c=o.image_height;return{queryUrl:e,queryWidth:i,queryHeight:c};case pn:switch(r.payload){case n.SEARCHING:return"";default:return t}default:return t}},queryText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FULL":var r=t.payload;return e===r.query_text?e:r.query_text||"";case"CLEAN_FULL_TEXT":return"";default:return e}},results:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SEARCH":case hn:case dn:case fn:var r=t.payload,a=r.products;if(!a)return{};if("3.0"===r.impresee_version){var s,o={},i=hc(a);try{for(i.s();!(s=i.n()).done;){for(var c=s.value,u={},l=0,p=Object.keys(c);l<p.length;l++){var d=p[l];"debug"!==d&&(u[d]=c[d])}o[c.rank]={imageUrl:c.image,productUrl:c.url,rank:c.rank,price:c.price,price_from:c.price_from,name:c.name,data:u};var h,f=c.product_texts||[],m=hc(f);try{for(m.s();!(h=m.n()).done;){var y=h.value;o[c.rank][y.code]=y.value}}catch(e){m.e(e)}finally{m.f()}}}catch(e){i.e(e)}finally{i.f()}return o}return mc(a);case"SET_CUSTOM_RECT":return{};case pn:switch(t.payload){case n.SEARCHING:return{};default:return e}default:return e}},searchType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SEARCH":case dn:case fn:var r=t.payload;return r.type||null;default:return e}},searchUuid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SEARCH":case hn:case dn:case fn:var r=t.payload,n=r.query_image||{};return n.upload_id||null;default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CLOSED",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pn:switch(t.payload){case n.DRAWING:case n.CROPPING:case n.SEARCHING:return t.payload;case n.ERROR:case n.CLOSED:case n.DISPLAYING_RESULTS:return n.CLOSED;default:return e}case dn:case fn:case hn:case"LOAD_SEARCH":return n.CLOSED;default:return e}},modalSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:300,height:600},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODAL_SIZE":return t.payload;default:return e}},loadedImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_IMAGE":return t.payload;default:return e}},statusResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CLOSED_RESULTS",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pn:switch(t.payload){case n.CLOSED_RESULTS:return n.CLOSED_RESULTS;case n.ERROR:return n.ERROR;case n.SEARCHING_BY_AREA:return n.SEARCHING_BY_AREA;case n.CROPPING_QUERY:return n.CROPPING_QUERY;case n.DISPLAYING_RESULTS:return n.DISPLAYING_RESULTS;default:return e}case dn:case"LOAD_SEARCH":case hn:case fn:return n.DISPLAYING_RESULTS;default:return e}},resultsHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_RESULTS_HEIGHT":return t.payload;default:return e}},selectedDetection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SEARCH":case fn:var r=t.payload,a=r.query_image||[],s=a.image_detections||null;if(!s||0===s.length)return 0;var i=s[0];return i.rank;case"CHANGE_SELECTED_DETECTION":return t.payload;case"SET_CUSTOM_RECT":return o.CUSTOM_DETECTION;case pn:switch(t.payload){case n.SEARCHING:return 0;default:return e}default:return e}},detections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SEARCH":case fn:var r=t.payload,n=r.query_image||[],a=n.image_detections;if(!a)return{};var s,o={},i=yc(a);try{for(i.s();!(s=i.n()).done;){var c=s.value;o[c.rank]={x:Math.max(100*c.left,1),y:Math.max(100*c.top,1),width:Math.min(100*c.width,99),height:Math.min(100*c.height,99),id:c.rank}}}catch(e){i.e(e)}finally{i.f()}return o;default:return e}},displayedQuerySize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:0,height:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DISPLAY_QUERY_SIZE":return t.payload;case"LOAD_IMAGE":return{width:0,height:0};default:return e}},customDetection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CUSTOM_RECT":return t.payload;case"LOAD_SEARCH":var r=t.payload.box;return r?{x:100*r.left,y:100*r.top,width:100*r.width,height:100*r.height}:e;default:return e}},detectionUuid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fn:var r=t.payload;return(r.query_image||[]).upload_id||null;case"LOAD_SEARCH":var n=t.payload;return(n.query_image||[]).upload_id||e;default:return e}},localQueryImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_LOCAL_QUERY":return t.payload;default:return e}},dropDownStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CLOSED",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DROPDOWN_STATUS":switch(t.payload){case n.LOADING_DROP_DOWN_RESULTS:case n.DISPLAY_DROP_DOWN:case n.ERROR:return t.payload;default:return n.CLOSED}case"INSTANT":return e===n.CLOSED?n.CLOSED:n.DISPLAY_DROP_DOWN;default:return e}},textResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSTANT":var r=t.payload,a=r.products;if(!a)return{};var s,o={},i=Sc(a);try{for(i.s();!(s=i.n()).done;){for(var c=s.value,u={},l=0,p=Object.keys(c);l<p.length;l++){var d=p[l];"debug"!==d&&(u[d]=c[d])}o[c.rank]={imageUrl:c.image,productUrl:c.url,title:c.name,price:c.price,from_price:c.price_from,rank:c.rank,data:u}}}catch(e){i.e(e)}finally{i.f()}return o;case"FULL":case"CLEAR_INSTANT_SEARCH_RESULTS":return{};case pn:switch(t.payload){case n.LOADING_DROP_DOWN_RESULTS:return{};default:return e}default:return e}},numberResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSTANT":var r=t.payload,a=r.products;return a?r.total_products||(null==a?void 0:a.length):0;case pn:switch(t.payload){case n.LOADING_DROP_DOWN_RESULTS:return 0;default:return e}default:return e}},textQueryId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTER":case"REORDER":case"FULL":case"INSTANT":var r=t.payload;return window._see_query_id=r.query_id||e,r.query_id||e;default:return e}},fullTextSearchDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CLOSED_RESULTS",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_FULL_TEXT_SEARCH_STATUS":switch(t.payload){case n.SEARCHING:case n.DISPLAYING_RESULTS:case n.SEARCHING_BY_CHANGING_PARAMETERS:case n.ERROR:return t.payload;default:return n.CLOSED_RESULTS}case"PAGE":case"REORDER":case"FULL":case"FILTER":return n.DISPLAYING_RESULTS;default:return e}},fullTextResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r={};switch(t.type){case"PAGE":var n=window._wssee||[{}],a=n[0].searchByText||{},s=a.useInfiniteScroll||!1;r=s?bc({},e):{};case"REORDER":case"FILTER":case"FULL":var o=t.payload,i=o.products;if(!i)return{};var c,u=wc(i);try{for(u.s();!(c=u.n()).done;){for(var l=c.value,p={},d=0,h=Object.keys(l);d<h.length;d++){var f=h[d];"debug"!==f&&(p[f]=l[f])}r["".concat(l.id,"-").concat(l.rank)]={imageUrl:l.image,productUrl:l.url,title:l.name,price:l.price,from_price:l.price_from,rank:l.rank,data:p}}}catch(e){u.e(e)}finally{u.f()}return r;case"CLEAN_FULL_TEXT":return{};default:return e}},promotedProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PAGE":case"REORDER":case"FILTER":case"FULL":var r=t.payload,n=r.promoted_products;if(!n)return{};var a,s={},o=_c(n);try{for(o.s();!(a=o.n()).done;){for(var i=a.value,c={},u=0,l=Object.keys(i);u<l.length;u++){var p=l[u];"debug"!==p&&(c[p]=i[p])}s[i.promoted_rank]={imageUrl:i.image,productUrl:i.url,title:i.name,price:i.price,from_price:i.price_from,rank:i.promoted_rank,data:c}}}catch(e){o.e(e)}finally{o.f()}return s;default:return e}},promotedBanner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PAGE":case"REORDER":case"FILTER":case"FULL":var r=t.payload;return r.promoted_banner?r.promoted_banner:{};default:return e}},promotedProductsDropdown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSTANT":var r=t.payload,n=r.promoted_products;if(!n)return{};var a,s={},o=Cc(n);try{for(o.s();!(a=o.n()).done;){for(var i=a.value,c={},u=0,l=Object.keys(i);u<l.length;u++){var p=l[u];"debug"!==p&&(c[p]=i[p])}s[i.promoted_rank]={imageUrl:i.image,productUrl:i.url,title:i.name,price:i.price,from_price:i.price_from,rank:i.promoted_rank,data:c}}}catch(e){o.e(e)}finally{o.f()}return s;case"FULL":case"CLEAR_INSTANT_SEARCH_RESULTS":return{};default:return e}},promotedBannerDropdown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSTANT":var r=t.payload;return r.promoted_banner?r.promoted_banner:{};case"FULL":case"CLEAR_INSTANT_SEARCH_RESULTS":return{};default:return e}},textSearchMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r={},n=t.payload;switch(t.type){case"FILTER":return r.type=Ae,r.totalPages=n.total_pages||0,r.totalProducts=n.total_products||0,r;case"REORDER":return r.type=De,r.totalPages=n.total_pages||0,r.totalProducts=n.total_products||0,r;case"FULL":return r.type=Te,r.totalPages=n.total_pages||0,r.totalProducts=n.total_products||0,r;case"CLEAN_FULL_TEXT":return{};default:return e}},currentPageText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PAGE":case"REORDER":case"FILTER":case"FULL":var r=t.payload,n=r.num_page||0;return n;default:return e}},pageSizeText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FULL":return window._wssee[0].searchByText.pageSize||16;default:return e}},sortResultsOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FULL":var r=t.payload,n=r.sort_list;if(!n)return{};var a,s={},o=Bc(n);try{for(o.s();!(a=o.n()).done;){var i=a.value;s[i.code]={title:i.title,code:i.code}}}catch(e){o.e(e)}finally{o.f()}return s;default:return e}},resultsSortedBy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REORDER":case"FULL":var r=t.payload,n=r.sort_list;if(!n)return e;var a,s,o=!0,i=Dc(n);try{for(i.s();!(s=i.n()).done;){var c=s.value;if(o&&(o=!1,a=c.code),c.active)return c.code}}catch(e){i.e(e)}finally{i.f()}return a||e;case"SET_REORDER_VALUE":return t.payload;default:return e}},filterOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FULL":case"FILTER":var r=t.payload,n=r.filter_list;if(!n)return{};var a,s={},i=xc(n);try{for(i.s();!(a=i.n()).done;){var c=a.value;if(s[c.code]={title:c.title,code:c.code},c.filter_type===o.RANGE_FILTER){s[c.code].type=o.RANGE_FILTER,s[c.code].rangeStart=Math.floor(Number(c.range_start)),s[c.code].rangeEnd=Math.ceil(Number(c.range_end));var u=window._wssee[0].setup.parseFilterRange||function(e){return e};s[c.code]=u(s[c.code])}else if(c.filter_type===o.VALUE_FILTER){s[c.code].type=o.VALUE_FILTER,s[c.code].values={};var l,p=0,d=xc(c.options);try{for(d.s();!(l=d.n()).done;){var h=l.value;s[c.code].values[p]={valueTitle:h.title,numberMatches:h.cont,code:h.code},p+=1}}catch(e){d.e(e)}finally{d.f()}}}}catch(e){i.e(e)}finally{i.f()}return s;default:return e}},selectedFilters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTER":case"FULL":var r=t.payload,n=r.filter_list;if(!n)return{};var a,s={},i=Pc(n);try{for(i.s();!(a=i.n()).done;){var c=a.value;if(s[c.code]={code:c.code,active:c.active},c.filter_type===o.RANGE_FILTER){if(s[c.code].type=o.RANGE_FILTER,s[c.code].rangeStart=Math.floor(Number(c.range_user_start||c.range_start)),s[c.code].rangeEnd=Math.ceil(Number(c.range_user_end||c.range_end)),!c.range_user_start&&!c.range_user_end){var u=window._wssee[0].setup.parseFilterRange||function(e){return e};s[c.code]=u(s[c.code])}}else if(c.filter_type===o.VALUE_FILTER){s[c.code].type=o.VALUE_FILTER,s[c.code].values={};var l,p=Pc(c.options);try{for(p.s();!(l=p.n()).done;){var d=l.value;s[c.code].values[d.code]=d.active}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){i.e(e)}finally{i.f()}return s;default:return e}},displayResultsFormat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GRID",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DISPLAY_FORMAT":switch(t.payload){case n.DISPLAY_FORMAT_GRID:case n.DISPLAY_FORMAT_LIST:return t.payload;default:return e}case"LOAD_SEARCH":case hn:case dn:return n.DISPLAY_FORMAT_GRID;default:return e}},queryTextInstantSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSTANT":var r=t.payload;return e===r.query_text?e:r.query_text||"";case"CLEAN_TEXT_QUERY":case"CLEAR_INSTANT_SEARCH_RESULTS":return"";default:return e}},textSearchMetadataInstantSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSTANT":var r=t.payload,n={};return n.totalPages=r.total_pages||0,n.totalProducts=r.total_products||0,n;case"CLEAR_INSTANT_SEARCH_RESULTS":return{};default:return e}},displaySearchBarOverlayStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CLOSED",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_SEARCH_BAR_OVERLAY":return n.OPEN;case"HIDE_SEARCH_BAR_OVERLAY":return n.CLOSED;case"CHANGE_FULL_TEXT_SEARCH_STATUS":switch(t.payload){case n.SEARCHING:case n.DISPLAYING_RESULTS:case n.SEARCHING_BY_CHANGING_PARAMETERS:case n.ERROR:return n.CLOSED;default:return e}default:return e}},searchSuggestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSTANT":case"FULL":var r=t.payload,n=r.suggestions;return n||{};default:return e}},activeSearchBar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACTIVE_SEARCH_BAR":var r=t.payload;return null==r?{}:r;default:return e}},loadedEmptySearchResultsSecreen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOCUS_SEARCH_BAR":return!0;default:return e}}});An.a.defaults.withCredentials=!0,window._wssee[0].searchByText||(window._wssee[0].searchByText={}),window._wssee[0].texts||(window._wssee[0].texts={}),An.a.defaults.withCredentials=!0;var Mc,Fc=window._wssee[0].setup,Hc=window._wssee[0].searchByText||{},Uc=Fc.loadAfterPageRender||!1;function Gc(e,t,r,n,a,s,o,i){0===e?window._impresee_app=g.default.render(g.default.createElement(w.a,{store:t},g.default.createElement(dc,{store:t,photoButton:r,sketchButton:n,imageSearchButton:a,searchBarSelector:s,beforeLoadResults:o})),i):console.error("App is inactive ".concat(Fc.photoApp||Hc.textSearchApp))}function jc(){var e=document.getElementsByTagName("body");if(e.length>0){var t,r,n,a,o,i=e[0],c=function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=r.length,a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*n));return t}(15),u=document.querySelector("#".concat(c));null===u&&((u=document.createElement("div")).id=c,i.appendChild(u));var l=Object(E.c)(Nc,{},Object(E.a)(R.a));if(0===window._wssee.length)return void console.error("Missing parameters!");var p=Fc.photoApp||"",d=Fc.photoButton||"",h=window._wssee[0].setup.imageSearchButton||"impresee-one-click-search-img";if(0!==p.length&&0===d.length&&Fc.useSearchByPhoto&&null!==(t=window._wssee[0].searchByText.useText)&&void 0!==t&&!t)return void console.error("Missing photoButton parameter when a photoApp has been given!");if(0!==d.length&&0===p.length&&Fc.useSearchByPhoto&&null!==(r=window._wssee[0].searchByText.useText)&&void 0!==r&&!r)return void console.error("Missing photoApp parameter when a photoButton has been given!");var f=Fc.sketchButton||"",m=Fc.sketchApp||"";if(0!==m.length&&0===f.length&&Fc.useSearchBySketch&&null!==(n=window._wssee[0].searchByText.useText)&&void 0!==n&&!n)return void console.error("Missing sketchButton parameter when a sketchApp has been given!");if(0!==f.length&&0===m.length&&Fc.useSearchBySketch&&null!==(a=window._wssee[0].searchByText.useText)&&void 0!==a&&!a)return void console.error("Missing sketchApp parameter when a sketchButton has been given!");var y=Fc.onSearchFailed||null;if(y&&"function"===!S()(y))return void console.error("onSearchFailed must be a function!");var v=Fc.afterLoadResults||null;if(v&&"function"===!S()(v))return void console.error("afterLoadResults must be a function!");var g=Fc.beforeLoadResults||null;if(g&&"function"===!S()(g))return void console.error("beforeLoadResults must be a function!");var w=Hc&&Hc.searchBarSelector||null,b=null===(o=window._wssee[0].searchByText.useText)||void 0===o||o,_=window._wssee[0].searchByText.useButtonAsSearchBar||!1;if(null===w&&b&&!_)throw Error("Nowhere to embed Impresee's search bar!");if(function(){var e=window.sessionStorage.getItem("wsee_status_app_valid"),t=window.sessionStorage.getItem("wsee_status_app_time");if(null===e||null===t)return!1;var r=Number(t)||0;return!(Date.now()-r>18e5)&&0===Number(e)}()){var I=sessionStorage.getItem("wsee_status_app_valid");Gc(Number(I),l,d,f,h,w,g,u)}else{!(window._wssee&&window._wssee.length>0&&window._wssee[0].setup)||window._wssee[0].setup.allowImpreseeCookies,An()("".concat(s.verifyApp).concat(Fc.photoApp||Hc.textSearchApp,"?v=").concat("v5.6"),{headers:ln(),withCredentials:!0}).then((function(e){var t=e.data;Gc(t.status,l,d,f,h,w,g,u),sessionStorage.setItem("wsee_status_app_valid",t.status),sessionStorage.setItem("wsee_status_app_time",Date.now())})).catch((function(e){console.error(console.error("Error getting app status: ".concat(Fc.photoApp||Hc.textSearchApp)))}))}}else console.log("This site has no body!")}Uc?(Mc=jc,"complete"===document.readyState||"interactive"===document.readyState?setTimeout(Mc,1):document.addEventListener("DOMContentLoaded",Mc)):jc()}]));